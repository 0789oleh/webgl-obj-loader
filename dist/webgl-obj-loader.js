(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("OBJ", [], factory);
	else if(typeof exports === 'object')
		exports["OBJ"] = factory();
	else
		root["OBJ"] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} /**
                                                                                                                                                                                                                                  * A class to represent the memory layout for a vertex attribute array. Used by
                                                                                                                                                                                                                                  * {@link Mesh}'s TBD(...) method to generate a packed array from mesh data.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * Layout can sort of be thought of as a C-style struct declaration.
                                                                                                                                                                                                                                  * {@link Mesh}'s TBD(...) method will use the {@link Layout} instance to
                                                                                                                                                                                                                                  * pack an array in the given attribute order.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * Layout also is very helpful when calling a WebGL context's
                                                                                                                                                                                                                                  * <code>vertexAttribPointer</code> method. If you've created a buffer using
                                                                                                                                                                                                                                  * a Layout instance, then the same Layout instance can be used to determine
                                                                                                                                                                                                                                  * the size, type, normalized, stride, and offset parameters for
                                                                                                                                                                                                                                  * <code>vertexAttribPointer</code>.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * For example:
                                                                                                                                                                                                                                  * <pre><code>
                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                  * const index = glctx.getAttribLocation(shaderProgram, "pos");
                                                                                                                                                                                                                                  * glctx.vertexAttribPointer(
                                                                                                                                                                                                                                  *   layout.position.size,
                                                                                                                                                                                                                                  *   glctx[layout.position.type],
                                                                                                                                                                                                                                  *   layout.position.normalized,
                                                                                                                                                                                                                                  *   layout.position.stride,
                                                                                                                                                                                                                                  *   layout.position.offset);
                                                                                                                                                                                                                                  * </code></pre>
                                                                                                                                                                                                                                  * @see {@link Mesh}
                                                                                                                                                                                                                                  */var
Layout =
/**
          * Create a Layout object. This constructor will throw if any duplicate
          * attributes are given.
          * @param {Array} ...attributes - An ordered list of attributes that
          *        describe the desired memory layout for each vertex attribute.
          *        <p>
          *
          * @see {@link Mesh}
          */exports.Layout =
function Layout() {_classCallCheck(this, Layout);for (var _len = arguments.length, attributes = Array(_len), _key = 0; _key < _len; _key++) {attributes[_key] = arguments[_key];}
    this.attributes = attributes;
    var offset = 0;
    var maxStrideMultiple = 0;var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {
        for (var _iterator = attributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attribute = _step.value;
            if (this[attribute.key]) {
                throw new DuplicateAttributeException(attribute);
            }
            // Add padding to satisfy WebGL's requirement that all
            // vertexAttribPointer calls have an offset that is a multiple of
            // the type size.
            if (offset % attribute.sizeOfType !== 0) {
                offset += attribute.sizeOfType - offset % attribute.sizeOfType;
                console.warn("Layout requires padding before " + attribute.key + " attribute");
            }
            this[attribute.key] = {
                attribute: attribute,
                size: attribute.size,
                type: attribute.type,
                normalized: attribute.normalized,
                offset: offset };

            offset += attribute.sizeInBytes;
            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);
        }
        // Add padding to the end to satisfy WebGL's requirement that all
        // vertexAttribPointer calls have a stride that is a multiple of the
        // type size. Because we're putting differently sized attributes into
        // the same buffer, it must be padded to a multiple of the largest
        // type size.
    } catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}if (offset % maxStrideMultiple !== 0) {
        offset += maxStrideMultiple - offset % maxStrideMultiple;
        console.warn("Layout requires padding at the back");
    }
    this.stride = offset;var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {
        for (var _iterator2 = attributes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var _attribute = _step2.value;
            this[_attribute.key].stride = this.stride;
        }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}
};


/**
    * An exception for when two or more of the same attributes are found in the
    * same layout.
    * @private
    */var
DuplicateAttributeException =
/**
                               * Create a DuplicateAttributeException
                               * @param {Attribute} attribute - The attribute that was found more than
                               *        once in the {@link Layout}
                               */
function DuplicateAttributeException(attribute) {_classCallCheck(this, DuplicateAttributeException);
    this.message = "found duplicate attribute: " + attribute.key;
};


/**
    * Represents how a vertex attribute should be packed into an buffer.
    * @private
    */var
Attribute =
/**
             * Create an attribute. Do not call this directly, use the predefined
             * constants.
             * @param {string} key - The name of this attribute as if it were a key in
             *        an Object. Use the camel case version of the upper snake case
             *        const name.
             * @param {number} size - The number of components per vertex attribute.
             *        Must be 1, 2, 3, or 4.
             * @param {string} type - The data type of each component for this
             *        attribute. Possible values:<br/>
             *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>
             *        "SHORT": signed 16-bit integer, with values in
             *            [-32768, 32767]<br/>
             *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in
             *            [0, 255]<br/>
             *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in
             *            [0, 65535]<br/>
             *        "FLOAT": 32-bit floating point number
             * @param {boolean} normalized - Whether integer data values should be
             *        normalized when being casted to a float.<br/>
             *        If true, signed integers are normalized to [-1, 1].<br/>
             *        If true, unsigned integers are normalized to [0, 1].<br/>
             *        For type "FLOAT", this parameter has no effect.
             */
function Attribute(key, size, type) {var normalized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;_classCallCheck(this, Attribute);
    this.key = key;
    this.size = size;
    this.type = type;
    this.normalized = false;
    this.sizeOfType = sizeInBytesOfType(type);
    this.sizeInBytes = this.sizeOfType * size;
};


/**
    * @param {string} type - A type accepted by {@link Attribute}.
    * @return The size (in bytes) for a given type.
    * @see {@link Attribute}
    * @private
    */
function sizeInBytesOfType(type) {
    switch (type) {
        case "BYTE":
        case "UNSIGNED_BYTE":
            return 1;
        case "SHORT":
        case "UNSIGNED_SHORT":
            return 2;
        case "FLOAT":
            return 4;}

}

// Geometry attributes
/**
 * Attribute layout to pack a vertex's x, y, & z as floats
 *
 * @see {@link Layout}
 */
Layout.POSITION = new Attribute("position", 3, "FLOAT");

/**
                                                          * Attribute layout to pack a vertex's normal's x, y, & z as floats
                                                          *
                                                          * @see {@link Layout}
                                                          */
Layout.NORMAL = new Attribute("normal", 3, "FLOAT");

/**
                                                      * Attribute layout to pack a vertex's normal's x, y, & z as floats.
                                                      * <p>
                                                      * This value will be computed on-the-fly based on the texture coordinates.
                                                      * If no texture coordinates are available, the generated value will default to
                                                      * 0, 0, 0.
                                                      *
                                                      * @see {@link Layout}
                                                      */
Layout.TANGENT = new Attribute("tangent", 3, "FLOAT");

/**
                                                        * Attribute layout to pack a vertex's normal's bitangent x, y, & z as floats.
                                                        * <p>
                                                        * This value will be computed on-the-fly based on the texture coordinates.
                                                        * If no texture coordinates are available, the generated value will default to
                                                        * 0, 0, 0.
                                                        * @see {@link Layout}
                                                        */
Layout.BITANGENT = new Attribute("bitangent", 3, "FLOAT");

/**
                                                            * Attribute layout to pack a vertex's texture coordinates' u & v as floats
                                                            *
                                                            * @see {@link Layout}
                                                            */
Layout.UV = new Attribute("uv", 2, "FLOAT");

// Material attributes

/**
 * Attribute layout to pack an unsigned short to be interpreted as a the index
 * into a {@link Mesh}'s materials list.
 * <p>
 * The intention of this value is to send all of the {@link Mesh}'s materials
 * into multiple shader uniforms and then reference the current one by this
 * vertex attribute.
 * <p>
 * example glsl code:
 *
 * <pre><code>
 *  // this is bound using MATERIAL_INDEX
 *  attribute int materialIndex;
 *
 *  struct Material {
 *    vec3 diffuse;
 *    vec3 specular;
 *    vec3 specularExponent;
 *  };
 *
 *  uniform Material materials[MAX_MATERIALS];
 *
 *  // ...
 *
 *  vec3 diffuse = materials[materialIndex];
 *
 * </code></pre>
 * TODO: More description & test to make sure subscripting by attributes even
 * works for webgl
 *
 * @see {@link Layout}
 */
Layout.MATERIAL_INDEX = new Attribute("materialIndex", 1, "SHORT");
Layout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, "UNSIGNED_SHORT");
Layout.AMBIENT = new Attribute("ambient", 3, "FLOAT");
Layout.DIFFUSE = new Attribute("diffuse", 3, "FLOAT");
Layout.SPECULAR = new Attribute("specular", 3, "FLOAT");
Layout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, "FLOAT");
Layout.EMISSIVE = new Attribute("emissive", 3, "FLOAT");
Layout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, "FLOAT");
Layout.DISSOLVE = new Attribute("dissolve", 1, "FLOAT");
Layout.ILLUMINATION = new Attribute("illumination", 1, "UNSIGNED_SHORT");
Layout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, "FLOAT");
Layout.SHARPNESS = new Attribute("sharpness", 1, "FLOAT");
Layout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, "SHORT");
Layout.MAP_AMBIENT = new Attribute("mapAmbient", 1, "SHORT");
Layout.MAP_SPECULAR = new Attribute("mapSpecular", 1, "SHORT");
Layout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, "SHORT");
Layout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, "SHORT");
Layout.ANTI_ALIASING = new Attribute("antiAliasing", 1, "UNSIGNED_SHORT");
Layout.MAP_BUMP = new Attribute("mapBump", 1, "SHORT");
Layout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, "SHORT");
Layout.MAP_DECAL = new Attribute("mapDecal", 1, "SHORT");
Layout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, "SHORT");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _layout = __webpack_require__(0);function _toConsumableArray(arr) {if (Array.isArray(arr)) {for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {arr2[i] = arr[i];}return arr2;} else {return Array.from(arr);}}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The main Mesh class. The constructor will parse through the OBJ file data
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * and collect the vertex, vertex normal, texture, and face information. This
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * information can then be used later on when creating your VBOs. See
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * OBJ.initMeshBuffers for an example of how to use the newly created Mesh
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */var
Mesh = function () {
    /**
                     * Create a Mesh
                     * @param {String} objectData - a string representation of an OBJ file with
                     *     newlines preserved.
                     * @param {Object} options - a JS object containing valid options. See class
                     *     documentation for options.
                     * @param {bool} options.enableWTextureCoord - Texture coordinates can have
                     *     an optional "w" coordinate after the u and v coordinates. This extra
                     *     value can be used in order to perform fancy transformations on the
                     *     textures themselves. Default is to truncate to only the u an v
                     *     coordinates. Passing true will provide a default value of 0 in the
                     *     event that any or all texture coordinates don't provide a w value.
                     *     Always use the textureStride attribute in order to determine the
                     *     stride length of the texture coordinates when rendering the element
                     *     array.
                     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents
                     *     and bitangents when loading of the OBJ is completed. This adds two new
                     *     attributes to the Mesh instance: `tangents` and `bitangents`.
                     */
    function Mesh(objectData, options) {_classCallCheck(this, Mesh);
        options = options || {};
        options.materials = options.materials || {};
        options.enableWTextureCoord = !!options.enableWTextureCoord;
        options.indicesPerMaterial = !!options.indicesPerMaterial;

        var self = this;
        // the list of unique vertex, normal, texture, attributes
        self.vertices = [];
        self.vertexNormals = [];
        self.textures = [];
        // the indicies to draw the faces
        self.indices = [];
        self.textureStride = options.enableWTextureCoord ? 3 : 2;

        /*
                                                                  The OBJ file format does a sort of compression when saving a model in a
                                                                  program like Blender. There are at least 3 sections (4 including textures)
                                                                  within the file. Each line in a section begins with the same string:
                                                                    * 'v': indicates vertex section
                                                                    * 'vn': indicates vertex normal section
                                                                    * 'f': indicates the faces section
                                                                    * 'vt': indicates vertex texture section (if textures were used on the model)
                                                                  Each of the above sections (except for the faces section) is a list/set of
                                                                  unique vertices.
                                                                   Each line of the faces section contains a list of
                                                                  (vertex, [texture], normal) groups.
                                                                   **Note:** The following documentation will use a capital "V" Vertex to
                                                                  denote the above (vertex, [texture], normal) groups whereas a lowercase
                                                                  "v" vertex is used to denote an X, Y, Z coordinate.
                                                                   Some examples:
                                                                      // the texture index is optional, both formats are possible for models
                                                                      // without a texture applied
                                                                      f 1/25 18/46 12/31
                                                                      f 1//25 18//46 12//31
                                                                       // A 3 vertex face with texture indices
                                                                      f 16/92/11 14/101/22 1/69/1
                                                                       // A 4 vertex face
                                                                      f 16/92/11 40/109/40 38/114/38 14/101/22
                                                                   The first two lines are examples of a 3 vertex face without a texture applied.
                                                                  The second is an example of a 3 vertex face with a texture applied.
                                                                  The third is an example of a 4 vertex face. Note: a face can contain N
                                                                  number of vertices.
                                                                   Each number that appears in one of the groups is a 1-based index
                                                                  corresponding to an item from the other sections (meaning that indexing
                                                                  starts at one and *not* zero).
                                                                   For example:
                                                                      `f 16/92/11` is saying to
                                                                        - take the 16th element from the [v] vertex array
                                                                        - take the 92nd element from the [vt] texture array
                                                                        - take the 11th element from the [vn] normal array
                                                                      and together they make a unique vertex.
                                                                  Using all 3+ unique Vertices from the face line will produce a polygon.
                                                                   Now, you could just go through the OBJ file and create a new vertex for
                                                                  each face line and WebGL will draw what appears to be the same model.
                                                                  However, vertices will be overlapped and duplicated all over the place.
                                                                   Consider a cube in 3D space centered about the origin and each side is
                                                                  2 units long. The front face (with the positive Z-axis pointing towards
                                                                  you) would have a Top Right vertex (looking orthogonal to its normal)
                                                                  mapped at (1,1,1) The right face would have a Top Left vertex (looking
                                                                  orthogonal to its normal) at (1,1,1) and the top face would have a Bottom
                                                                  Right vertex (looking orthogonal to its normal) at (1,1,1). Each face
                                                                  has a vertex at the same coordinates, however, three distinct vertices
                                                                  will be drawn at the same spot.
                                                                   To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`
                                                                  groups), while iterating through the face lines, when a group is encountered
                                                                  the whole group string ('16/92/11') is checked to see if it exists in the
                                                                  packed.hashindices object, and if it doesn't, the indices it specifies
                                                                  are used to look up each attribute in the corresponding attribute arrays
                                                                  already created. The values are then copied to the corresponding unpacked
                                                                  array (flattened to play nice with WebGL's ELEMENT_ARRAY_BUFFER indexing),
                                                                  the group string is added to the hashindices set and the current unpacked
                                                                  index is used as this hashindices value so that the group of elements can
                                                                  be reused. The unpacked index is incremented. If the group string already
                                                                  exists in the hashindices object, its corresponding value is the index of
                                                                  that group and is appended to the unpacked indices array.
                                                                  */











        this.name = "";
        var verts = [];
        var vertNormals = [];
        var textures = [];
        var unpacked = {};
        var materialNamesByIndex = [];
        var materialIndicesByName = {};
        // keep track of what material we've seen last
        var currentMaterialIndex = -1;
        // keep track if pushing indices by materials - otherwise not used
        var currentObjectByMaterialIndex = 0;
        // unpacking stuff
        unpacked.verts = [];
        unpacked.norms = [];
        unpacked.textures = [];
        unpacked.hashindices = {};
        unpacked.indices = [[]];
        unpacked.materialIndices = [];
        unpacked.index = 0;

        var VERTEX_RE = /^v\s/;
        var NORMAL_RE = /^vn\s/;
        var TEXTURE_RE = /^vt\s/;
        var FACE_RE = /^f\s/;
        var WHITESPACE_RE = /\s+/;
        var USE_MATERIAL_RE = /^usemtl/;

        // array of lines separated by the newline
        var lines = objectData.split("\n");

        for (var i = 0; i < lines.length; i++) {
            var line = lines[i].trim();
            if (!line || line.startsWith("#")) {
                continue;
            }
            var elements = line.split(WHITESPACE_RE);
            elements.shift();

            if (VERTEX_RE.test(line)) {
                // if this is a vertex
                verts.push.apply(verts, _toConsumableArray(elements));
            } else if (NORMAL_RE.test(line)) {
                // if this is a vertex normal
                vertNormals.push.apply(vertNormals, _toConsumableArray(elements));
            } else if (TEXTURE_RE.test(line)) {
                var coords = elements;
                // by default, the loader will only look at the U and V
                // coordinates of the vt declaration. So, this truncates the
                // elements to only those 2 values. If W texture coordinate
                // support is enabled, then the texture coordinate is
                // expected to have three values in it.
                if (elements.length > 2 && !options.enableWTextureCoord) {
                    coords = elements.slice(0, 1);
                } else if (elements.length === 2 && options.enableWTextureCoord) {
                    // If for some reason W texture coordinate support is enabled
                    // and only the U and V coordinates are given, then we supply
                    // the default value of 0 so that the stride length is correct
                    // when the textures are unpacked below.
                    coords.push(0);
                }
                textures.push.apply(textures, _toConsumableArray(coords));
            } else if (USE_MATERIAL_RE.test(line)) {
                var materialName = elements[0];

                // check to see if we've ever seen it before
                if (!(materialName in materialIndicesByName)) {
                    // new material we've never seen
                    materialNamesByIndex.push(materialName);
                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;
                    // push new array into indices
                    if (options.indicesPerMaterial) {
                        // already contains an array at index zero, don't add
                        if (materialIndicesByName[materialName] > 0) {
                            unpacked.indices.push([]);
                        }
                    }
                }
                // keep track of the current material index
                currentMaterialIndex = materialIndicesByName[materialName];
                // update current index array
                if (options.indicesPerMaterial) {
                    currentObjectByMaterialIndex = currentMaterialIndex;
                }
            } else if (FACE_RE.test(line)) {
                // if this is a face
                /*
                split this face into an array of Vertex groups
                for example:
                   f 16/92/11 14/101/22 1/69/1
                becomes:
                  ['16/92/11', '14/101/22', '1/69/1'];
                */
                var quad = false;
                for (var j = 0, eleLen = elements.length; j < eleLen; j++) {
                    // Triangulating quads
                    // quad: 'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2 v3/t3/vn3/'
                    // corresponding triangles:
                    //      'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2'
                    //      'f v2/t2/vn2 v3/t3/vn3 v0/t0/vn0'
                    if (j === 3 && !quad) {
                        // add v2/t2/vn2 in again before continuing to 3
                        j = 2;
                        quad = true;
                    }
                    var hash0 = elements[0] + "," + currentMaterialIndex;
                    var hash = elements[j] + "," + currentMaterialIndex;
                    if (hash in unpacked.hashindices) {
                        unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);
                    } else {
                        /*
                            Each element of the face line array is a Vertex which has its
                            attributes delimited by a forward slash. This will separate
                            each attribute into another array:
                                '19/92/11'
                            becomes:
                                Vertex = ['19', '92', '11'];
                            where
                                Vertex[0] is the vertex index
                                Vertex[1] is the texture index
                                Vertex[2] is the normal index
                             Think of faces having Vertices which are comprised of the
                             attributes location (v), texture (vt), and normal (vn).
                             */
                        var vertex = elements[j].split("/");
                        // it's possible for faces to only specify the vertex
                        // and the normal. In this case, vertex will only have
                        // a length of 2 and not 3 and the normal will be the
                        // second item in the list with an index of 1.
                        var normalIndex = vertex.length - 1;
                        /*
                                                              The verts, textures, and vertNormals arrays each contain a
                                                              flattend array of coordinates.
                                                               Because it gets confusing by referring to Vertex and then
                                                              vertex (both are different in my descriptions) I will explain
                                                              what's going on using the vertexNormals array:
                                                               vertex[2] will contain the one-based index of the vertexNormals
                                                              section (vn). One is subtracted from this index number to play
                                                              nice with javascript's zero-based array indexing.
                                                               Because vertexNormal is a flattened array of x, y, z values,
                                                              simple pointer arithmetic is used to skip to the start of the
                                                              vertexNormal, then the offset is added to get the correct
                                                              component: +0 is x, +1 is y, +2 is z.
                                                               This same process is repeated for verts and textures.
                                                              */




                        // Vertex position
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 0]);
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 1]);
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 2]);
                        // Vertex textures
                        if (textures.length) {
                            var stride = options.enableWTextureCoord ? 3 : 2;
                            unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 0]);
                            unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 1]);
                            if (options.enableWTextureCoord) {
                                unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 2]);
                            }
                        }
                        // Vertex normals
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 0]);
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 1]);
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 2]);
                        // Vertex material indices
                        unpacked.materialIndices.push(currentMaterialIndex);
                        // add the newly created Vertex to the list of indices
                        unpacked.hashindices[hash] = unpacked.index;
                        unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);
                        // increment the counter
                        unpacked.index += 1;
                    }
                    if (j === 3 && quad) {
                        // add v0/t0/vn0 onto the second triangle
                        unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash0]);
                    }
                }
            }
        }
        self.vertices = unpacked.verts;
        self.vertexNormals = unpacked.norms;
        self.textures = unpacked.textures;
        self.vertexMaterialIndices = unpacked.materialIndices;
        self.indices = options.indicesPerMaterial ? unpacked.indices : unpacked.indices[currentObjectByMaterialIndex];

        self.materialNames = materialNamesByIndex;
        self.materialIndices = materialIndicesByName;
        self.materialsByIndex = {};

        if (options.calcTangentsAndBitangents) {
            this.calculateTangentsAndBitangents();
        }
    }

    /**
       * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the
       * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix
       * when distorting the normals through normal maps.
       * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/
       *
       * This method requires the normals and texture coordinates to be parsed and set up correctly.
       * Adds the tangents and bitangents as members of the class instance.
       */_createClass(Mesh, [{ key: "calculateTangentsAndBitangents", value: function calculateTangentsAndBitangents()
        {
            console.assert(
            this.vertices &&
            this.vertices.length &&
            this.vertexNormals &&
            this.vertexNormals.length &&
            this.textures &&
            this.textures.length,
            "Missing attributes for calculating tangents and bitangents");


            var unpacked = {};
            unpacked.tangents = [].concat(_toConsumableArray(new Array(this.vertices.length))).map(function (v) {return 0;});
            unpacked.bitangents = [].concat(_toConsumableArray(new Array(this.vertices.length))).map(function (v) {return 0;});

            // Loop through all faces in the whole mesh
            var indices = void 0;
            // If sorted by material
            if (Array.isArray(this.indices[0])) {
                indices = [].concat.apply([], this.indices);
            } else {
                indices = this.indices;
            }

            var vertices = this.vertices;
            var normals = this.vertexNormals;
            var uvs = this.textures;

            for (var i = 0; i < indices.length; i += 3) {
                var i0 = indices[i + 0];
                var i1 = indices[i + 1];
                var i2 = indices[i + 2];

                var x_v0 = vertices[i0 * 3 + 0];
                var y_v0 = vertices[i0 * 3 + 1];
                var z_v0 = vertices[i0 * 3 + 2];

                var x_uv0 = uvs[i0 * 2 + 0];
                var y_uv0 = uvs[i0 * 2 + 1];

                var x_v1 = vertices[i1 * 3 + 0];
                var y_v1 = vertices[i1 * 3 + 1];
                var z_v1 = vertices[i1 * 3 + 2];

                var x_uv1 = uvs[i1 * 2 + 0];
                var y_uv1 = uvs[i1 * 2 + 1];

                var x_v2 = vertices[i2 * 3 + 0];
                var y_v2 = vertices[i2 * 3 + 1];
                var z_v2 = vertices[i2 * 3 + 2];

                var x_uv2 = uvs[i2 * 2 + 0];
                var y_uv2 = uvs[i2 * 2 + 1];

                var x_deltaPos1 = x_v1 - x_v0;
                var y_deltaPos1 = y_v1 - y_v0;
                var z_deltaPos1 = z_v1 - z_v0;

                var x_deltaPos2 = x_v2 - x_v0;
                var y_deltaPos2 = y_v2 - y_v0;
                var z_deltaPos2 = z_v2 - z_v0;

                var x_uvDeltaPos1 = x_uv1 - x_uv0;
                var y_uvDeltaPos1 = y_uv1 - y_uv0;

                var x_uvDeltaPos2 = x_uv2 - x_uv0;
                var y_uvDeltaPos2 = y_uv2 - y_uv0;

                var rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;
                var r = 1.0 / (Math.abs(rInv < 0.0001) ? 1.0 : rInv);

                // Tangent
                var x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;
                var y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;
                var z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;

                // Bitangent
                var x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;
                var y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;
                var z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;

                // Gram-Schmidt orthogonalize
                //t = glm::normalize(t - n * glm:: dot(n, t));
                var x_n0 = normals[i0 * 3 + 0];
                var y_n0 = normals[i0 * 3 + 1];
                var z_n0 = normals[i0 * 3 + 2];

                var x_n1 = normals[i1 * 3 + 0];
                var y_n1 = normals[i1 * 3 + 1];
                var z_n1 = normals[i1 * 3 + 2];

                var x_n2 = normals[i2 * 3 + 0];
                var y_n2 = normals[i2 * 3 + 1];
                var z_n2 = normals[i2 * 3 + 2];

                // Tangent
                var n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;
                var n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;
                var n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;

                var x_resTangent0 = x_tangent - x_n0 * n0_dot_t;
                var y_resTangent0 = y_tangent - y_n0 * n0_dot_t;
                var z_resTangent0 = z_tangent - z_n0 * n0_dot_t;

                var x_resTangent1 = x_tangent - x_n1 * n1_dot_t;
                var y_resTangent1 = y_tangent - y_n1 * n1_dot_t;
                var z_resTangent1 = z_tangent - z_n1 * n1_dot_t;

                var x_resTangent2 = x_tangent - x_n2 * n2_dot_t;
                var y_resTangent2 = y_tangent - y_n2 * n2_dot_t;
                var z_resTangent2 = z_tangent - z_n2 * n2_dot_t;

                var magTangent0 = Math.sqrt(
                x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);

                var magTangent1 = Math.sqrt(
                x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);

                var magTangent2 = Math.sqrt(
                x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);


                // Bitangent
                var n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;
                var n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;
                var n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;

                var x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;
                var y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;
                var z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;

                var x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;
                var y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;
                var z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;

                var x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;
                var y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;
                var z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;

                var magBitangent0 = Math.sqrt(
                x_resBitangent0 * x_resBitangent0 +
                y_resBitangent0 * y_resBitangent0 +
                z_resBitangent0 * z_resBitangent0);

                var magBitangent1 = Math.sqrt(
                x_resBitangent1 * x_resBitangent1 +
                y_resBitangent1 * y_resBitangent1 +
                z_resBitangent1 * z_resBitangent1);

                var magBitangent2 = Math.sqrt(
                x_resBitangent2 * x_resBitangent2 +
                y_resBitangent2 * y_resBitangent2 +
                z_resBitangent2 * z_resBitangent2);


                unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;
                unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;
                unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;

                unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;
                unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;
                unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;

                unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;
                unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;
                unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;

                unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;
                unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;
                unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;

                unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;
                unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;
                unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;

                unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;
                unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;
                unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;

                // TODO: check handedness
            }

            this.tangents = unpacked.tangents;
            this.bitangents = unpacked.bitangents;
        }

        /**
           * @param {Layout} layout - A {@link Layout} object that describes the
           * desired memory layout of the generated buffer
           * @return {ArrayBuffer} The packed array in the ... TODO
           */ }, { key: "makeBufferData", value: function makeBufferData(
        layout) {
            var numItems = this.vertices.length / 3;
            var buffer = new ArrayBuffer(layout.stride * numItems);
            buffer.numItems = numItems;
            var dataView = new DataView(buffer);
            for (var i = 0, vertexOffset = 0; i < numItems; i++) {
                vertexOffset = i * layout.stride;
                // copy in the vertex data in the order and format given by the
                // layout param
                var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {for (var _iterator = layout.attributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attribute = _step.value;
                        var offset = vertexOffset + layout[attribute.key].offset;
                        switch (attribute.key) {
                            case _layout.Layout.POSITION.key:
                                dataView.setFloat32(offset, this.vertices[i * 3], true);
                                dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);
                                dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);
                                break;
                            case _layout.Layout.UV.key:
                                dataView.setFloat32(offset, this.textures[i * 2], true);
                                dataView.setFloat32(offset + 4, this.vertices[i * 2 + 1], true);
                                break;
                            case _layout.Layout.NORMAL.key:
                                dataView.setFloat32(offset, this.vertexNormals[i * 3], true);
                                dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);
                                dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);
                                break;
                            case _layout.Layout.MATERIAL_INDEX.key:
                                dataView.setInt16(offset, this.vertexMaterialIndices[i], true);
                                break;
                            case _layout.Layout.AMBIENT.key:{
                                    var materialIndex = this.vertexMaterialIndices[i];
                                    var material = this.materialsByIndex[materialIndex];
                                    if (!material) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[materialIndex] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, material.ambient[0], true);
                                    dataView.setFloat32(offset + 4, material.ambient[1], true);
                                    dataView.setFloat32(offset + 8, material.ambient[2], true);
                                    break;
                                }
                            case _layout.Layout.DIFFUSE.key:{
                                    var _materialIndex = this.vertexMaterialIndices[i];
                                    var _material = this.materialsByIndex[_materialIndex];
                                    if (!_material) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material.diffuse[0], true);
                                    dataView.setFloat32(offset + 4, _material.diffuse[1], true);
                                    dataView.setFloat32(offset + 8, _material.diffuse[2], true);
                                    break;
                                }
                            case _layout.Layout.SPECULAR.key:{
                                    var _materialIndex2 = this.vertexMaterialIndices[i];
                                    var _material2 = this.materialsByIndex[_materialIndex2];
                                    if (!_material2) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex2] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material2.specular[0], true);
                                    dataView.setFloat32(offset + 4, _material2.specular[1], true);
                                    dataView.setFloat32(offset + 8, _material2.specular[2], true);
                                    break;
                                }
                            case _layout.Layout.SPECULAR_EXPONENT.key:{
                                    var _materialIndex3 = this.vertexMaterialIndices[i];
                                    var _material3 = this.materialsByIndex[_materialIndex3];
                                    if (!_material3) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex3] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material3.specularExponent, true);
                                    break;
                                }
                            case _layout.Layout.EMISSIVE.key:{
                                    var _materialIndex4 = this.vertexMaterialIndices[i];
                                    var _material4 = this.materialsByIndex[_materialIndex4];
                                    if (!_material4) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex4] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material4.emissive[0], true);
                                    dataView.setFloat32(offset + 4, _material4.emissive[1], true);
                                    dataView.setFloat32(offset + 8, _material4.emissive[2], true);
                                    break;
                                }
                            case _layout.Layout.TRANSMISSION_FILTER.key:{
                                    var _materialIndex5 = this.vertexMaterialIndices[i];
                                    var _material5 = this.materialsByIndex[_materialIndex5];
                                    if (!_material5) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex5] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material5.transmissionFilter[0], true);
                                    dataView.setFloat32(offset + 4, _material5.transmissionFilter[1], true);
                                    dataView.setFloat32(offset + 8, _material5.transmissionFilter[2], true);
                                    break;
                                }
                            case _layout.Layout.DISSOLVE.key:{
                                    var _materialIndex6 = this.vertexMaterialIndices[i];
                                    var _material6 = this.materialsByIndex[_materialIndex6];
                                    if (!_material6) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex6] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material6.dissolve, true);
                                    break;
                                }
                            case _layout.Layout.ILLUMINATION.key:{
                                    var _materialIndex7 = this.vertexMaterialIndices[i];
                                    var _material7 = this.materialsByIndex[_materialIndex7];
                                    if (!_material7) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex7] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setInt16(offset, _material7.illumination, true);
                                    break;
                                }
                            case _layout.Layout.REFRACTION_INDEX.key:{
                                    var _materialIndex8 = this.vertexMaterialIndices[i];
                                    var _material8 = this.materialsByIndex[_materialIndex8];
                                    if (!_material8) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex8] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material8.refractionIndex, true);
                                    break;
                                }
                            case _layout.Layout.SHARPNESS.key:{
                                    var _materialIndex9 = this.vertexMaterialIndices[i];
                                    var _material9 = this.materialsByIndex[_materialIndex9];
                                    if (!_material9) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex9] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setFloat32(offset, _material9.sharpness, true);
                                    break;
                                }
                            case _layout.Layout.ANTI_ALIASING.key:{
                                    var _materialIndex10 = this.vertexMaterialIndices[i];
                                    var _material10 = this.materialsByIndex[_materialIndex10];
                                    if (!_material10) {
                                        console.warn(
                                        'Material "' +
                                        this.materialNames[_materialIndex10] +
                                        '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');

                                        break;
                                    }
                                    dataView.setInt16(offset, _material10.antiAliasing, true);
                                    break;
                                }}

                    }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}
            }
            return buffer;
        } }, { key: "makeIndexBufferData", value: function makeIndexBufferData()

        {
            var buffer = new Uint16Array(this.indices);
            buffer.numItems = this.indices.length;
            return buffer;
        } }, { key: "addMaterialLibrary", value: function addMaterialLibrary(

        mtl) {
            for (var name in mtl.materials) {
                if (!(name in this.materialIndices)) {
                    // This material is not referenced by the mesh
                    continue;
                }

                var material = mtl.materials[name];

                // Find the material index for this material
                var materialIndex = this.materialIndices[material.name];

                // Put the material into the materialsByIndex object at the right
                // spot as determined when the obj file was parsed
                this.materialsByIndex[materialIndex] = material;
            }
        } }]);return Mesh;}();exports.default = Mesh;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _toArray(arr) {return Array.isArray(arr) ? arr : Array.from(arr);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * The Material class.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */var
Material =
/**
            * Constructor
            * @param {String} name the unique name of the material
            */exports.Material =
function Material(name) {_classCallCheck(this, Material);
    // the unique material ID.
    this.name = name;
    // The values for the following attibutes
    // are an array of R, G, B normalized values.
    // Ka - Ambient Reflectivity
    this.ambient = [0, 0, 0];
    // Kd - Defuse Reflectivity
    this.diffuse = [0, 0, 0];
    // Ks
    this.specular = [0, 0, 0];
    // Ke
    this.emissive = [0, 0, 0];
    // Tf
    this.transmissionFilter = [0, 0, 0];
    // d
    this.dissolve = 0;
    // valid range is between 0 and 1000
    this.specularExponent = 0;
    // either d or Tr; valid values are normalized
    this.transparency = 0;
    // illum - the enum of the illumination model to use
    this.illumination = 0;
    // Ni - Set to "normal" (air).
    this.refractionIndex = 1;
    // sharpness
    this.sharpness = 0;
    // map_Kd
    this.mapDiffuse = null;
    // map_Ka
    this.mapAmbient = null;
    // map_Ks
    this.mapSpecular = null;
    // map_Ns
    this.mapSpecularExponent = null;
    // map_d
    this.mapDissolve = null;
    // map_aat
    this.antiAliasing = false;
    // map_bump or bump
    this.mapBump = null;
    // disp
    this.mapDisplacement = null;
    // decal
    this.mapDecal = null;
    // map_Ke
    this.mapEmissive = null;
    // refl - when the reflection type is a cube, there will be multiple refl
    //        statements for each side of the cube. If it's a spherical
    //        reflection, there should only ever be one.
    this.mapReflections = [];
};


/**
    * https://en.wikipedia.org/wiki/Wavefront_.obj_file
    * http://paulbourke.net/dataformats/mtl/
    */var
MaterialLibrary = exports.MaterialLibrary = function () {
    /**
                                                          * Constructs the Material Parser
                                                          * @param {String} mtlData the MTL file contents
                                                          */
    function MaterialLibrary(mtlData) {_classCallCheck(this, MaterialLibrary);
        this.data = mtlData;
        this.currentMaterial = null;
        this.materials = {};

        this.parse();
    }

    /* eslint-disable camelcase */
    /* the function names here disobey camelCase conventions
                                    to make parsing/routing easier. see the parse function
                                    documentation for more information. */

    /**
                                                                            * Creates a new Material object and adds to the registry.
                                                                            * @param {string[]} tokens the tokens associated with the directive
                                                                            */_createClass(MaterialLibrary, [{ key: "parse_newmtl", value: function parse_newmtl(
        tokens) {
            var name = tokens[0];
            // console.info('Parsing new Material:', name);

            this.currentMaterial = new Material(name);
            this.materials[name] = this.currentMaterial;
        }

        /**
           * See the documenation for parse_Ka below for a better understanding.
           *
           * Given a list of possible color tokens, returns an array of R, G, and B
           * color values.
           *
           * @param {string[]} tokens the tokens associated with the directive
           * @return {*} a 3 element array containing the R, G, and B values
           * of the color.
           */ }, { key: "parseColor", value: function parseColor(
        tokens) {
            if (tokens[0] == "spectral") {
                console.error(
                "The MTL parser does not support spectral curve files. You will " +
                "need to convert the MTL colors to either RGB or CIEXYZ.");

                return;
            }

            if (tokens[0] == "xyz") {
                console.warn("TODO: convert XYZ to RGB");
                return;
            }

            // from my understanding of the spec, RGB values at this point
            // will either be 3 floats or exactly 1 float, so that's the check
            // that i'm going to perform here
            if (tokens.length == 3) {
                return tokens.map(parseFloat);
            }

            // Since tokens at this point has a length of 3, we're going to assume
            // it's exactly 1, skipping the check for 2.
            var value = parseFloat(tokens[0]);
            // in this case, all values are equivalent
            return [value, value, value];
        }

        /**
           * Parse the ambient reflectivity
           *
           * A Ka directive can take one of three forms:
           *   - Ka r g b
           *   - Ka spectral file.rfl
           *   - Ka xyz x y z
           * These three forms are mutually exclusive in that only one
           * declaration can exist per material. It is considered a syntax
           * error otherwise.
           *
           * The "Ka" form specifies the ambient reflectivity using RGB values.
           * The "g" and "b" values are optional. If only the "r" value is
           * specified, then the "g" and "b" values are assigned the value of
           * "r". Values are normally in the range 0.0 to 1.0. Values outside
           * of this range increase or decrease the reflectivity accordingly.
           *
           * The "Ka spectral" form specifies the ambient reflectivity using a
           * spectral curve. "file.rfl" is the name of the ".rfl" file containing
           * the curve data. "factor" is an optional argument which is a multiplier
           * for the values in the .rfl file and defaults to 1.0 if not specified.
           *
           * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.
           * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments
           * are optional and take on the value of the "x" component if only "x" is
           * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and
           * increase or decrease ambient reflectivity accordingly outside of that
           * range.
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Ka", value: function parse_Ka(
        tokens) {
            this.currentMaterial.ambient = this.parseColor(tokens);
        }

        /**
           * Diffuse Reflectivity
           *
           * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules
           * are the same
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Kd", value: function parse_Kd(
        tokens) {
            this.currentMaterial.diffuse = this.parseColor(tokens);
        }

        /**
           * Spectral Reflectivity
           *
           * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules
           * are the same
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Ks", value: function parse_Ks(
        tokens) {
            this.currentMaterial.specular = this.parseColor(tokens);
        }

        /**
           * Emissive
           *
           * The amount and color of light emitted by the object.
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Ke", value: function parse_Ke(
        tokens) {
            this.currentMaterial.emissive = this.parseColor(tokens);
        }

        /**
           * Transmission Filter
           *
           * Any light passing through the object is filtered by the transmission
           * filter, which only allows specific colors to pass through. For example, Tf
           * 0 1 0 allows all of the green to pass through and filters out all of the
           * red and blue.
           *
           * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules
           * are the same
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Tf", value: function parse_Tf(
        tokens) {
            this.currentMaterial.transmissionFilter = this.parseColor(tokens);
        }

        /**
           * Specifies the dissolve for the current material.
           *
           * Statement: d [-halo] `factor`
           *
           * Example: "d 0.5"
           *
           * The factor is the amount this material dissolves into the background. A
           * factor of 1.0 is fully opaque. This is the default when a new material is
           * created. A factor of 0.0 is fully dissolved (completely transparent).
           *
           * Unlike a real transparent material, the dissolve does not depend upon
           * material thickness nor does it have any spectral character. Dissolve works
           * on all illumination models.
           *
           * The dissolve statement allows for an optional "-halo" flag which indicates
           * that a dissolve is dependent on the surface orientation relative to the
           * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",
           * will be fully dissolved at its center and will appear gradually more opaque
           * toward its edge.
           *
           * "factor" is the minimum amount of dissolve applied to the material. The
           * amount of dissolve will vary between 1.0 (fully opaque) and the specified
           * "factor". The formula is:
           *
           *    dissolve = 1.0 - (N*v)(1.0-factor)
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_d", value: function parse_d(
        tokens) {
            // this ignores the -halo option as I can't find any documentation on what
            // it's supposed to be.
            this.currentMaterial.dissolve = parseFloat(tokens.pop());
        }

        /**
           * The "illum" statement specifies the illumination model to use in the
           * material. Illumination models are mathematical equations that represent
           * various material lighting and shading effects.
           *
           * The illumination number can be a number from 0 to 10. The following are
           * the list of illumination enumerations and their summaries:
           * 0. Color on and Ambient off
           * 1. Color on and Ambient on
           * 2. Highlight on
           * 3. Reflection on and Ray trace on
           * 4. Transparency: Glass on, Reflection: Ray trace on
           * 5. Reflection: Fresnel on and Ray trace on
           * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on
           * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on
           * 8. Reflection on and Ray trace off
           * 9. Transparency: Glass on, Reflection: Ray trace off
           * 10. Casts shadows onto invisible surfaces
           *
           * Example: "illum 2" to specify the "Highlight on" model
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_illum", value: function parse_illum(
        tokens) {
            this.currentMaterial.illumination = parseInt(tokens[0]);
        }

        /**
           * Optical Density (AKA Index of Refraction)
           *
           * Statement: Ni `index`
           *
           * Example: Ni 1.0
           *
           * Specifies the optical density for the surface. `index` is the value
           * for the optical density. The values can range from 0.001 to 10.  A value of
           * 1.0 means that light does not bend as it passes through an object.
           * Increasing the optical_density increases the amount of bending. Glass has
           * an index of refraction of about 1.5. Values of less than 1.0 produce
           * bizarre results and are not recommended
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Ni", value: function parse_Ni(
        tokens) {
            this.currentMaterial.refractionIndex = parseFloat(tokens[0]);
        }

        /**
           * Specifies the specular exponent for the current material. This defines the
           * focus of the specular highlight.
           *
           * Statement: Ns `exponent`
           *
           * Example: "Ns 250"
           *
           * `exponent` is the value for the specular exponent. A high exponent results
           * in a tight, concentrated highlight. Ns Values normally range from 0 to
           * 1000.
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_Ns", value: function parse_Ns(
        tokens) {
            this.currentMaterial.specularExponent = parseInt(tokens[0]);
        }

        /**
           * Specifies the sharpness of the reflections from the local reflection map.
           *
           * Statement: sharpness `value`
           *
           * Example: "sharpness 100"
           *
           * If a material does not have a local reflection map defined in its material
           * defintions, sharpness will apply to the global reflection map defined in
           * PreView.
           *
           * `value` can be a number from 0 to 1000. The default is 60. A high value
           * results in a clear reflection of objects in the reflection map.
           *
           * Tip: sharpness values greater than 100 introduce aliasing effects in
           * flat surfaces that are viewed at a sharp angle.
           *
           * @param {string[]} tokens the tokens associated with the directive
           */ }, { key: "parse_sharpness", value: function parse_sharpness(
        tokens) {
            this.currentMaterial.sharpness = parseInt(tokens[0]);
        }

        /**
           * Parses the -cc flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -cc flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_cc", value: function parse_cc(
        values, options) {
            options.colorCorrection = values[0] == "on";
        }

        /**
           * Parses the -blendu flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -blendu flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_blendu", value: function parse_blendu(
        values, options) {
            options.horizontalBlending = values[0] == "on";
        }

        /**
           * Parses the -blendv flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -blendv flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_blendv", value: function parse_blendv(
        values, options) {
            options.verticalBlending = values[0] == "on";
        }

        /**
           * Parses the -boost flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -boost flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_boost", value: function parse_boost(
        values, options) {
            options.boostMipMapSharpness = parseFloat(values[0]);
        }

        /**
           * Parses the -mm flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -mm flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_mm", value: function parse_mm(
        values, options) {
            options.modifyTextureMap.brightness = parseFloat(values[0]);
            options.modifyTextureMap.contrast = parseFloat(values[1]);
        }

        /**
           * Parses and sets the -o, -s, and -t  u, v, and w values
           *
           * @param {string[]} values the values passed to the -o, -s, -t flag
           * @param {Object} option the Object of either the -o, -s, -t option
           * @param {Integer} defaultValue the Object of all image options
           */ }, { key: "parse_ost", value: function parse_ost(
        values, option, defaultValue) {
            while (values.length < 3) {
                values.push(defaultValue);
            }

            option.u = parseFloat(values[0]);
            option.v = parseFloat(values[1]);
            option.w = parseFloat(values[2]);
        }

        /**
           * Parses the -o flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -o flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_o", value: function parse_o(
        values, options) {
            this.parse_ost(values, options.offset, 0);
        }

        /**
           * Parses the -s flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -s flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_s", value: function parse_s(
        values, options) {
            this.parse_ost(values, options.scale, 1);
        }

        /**
           * Parses the -t flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -t flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_t", value: function parse_t(
        values, options) {
            this.parse_ost(values, options.turbulence, 0);
        }

        /**
           * Parses the -texres flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -texres flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_texres", value: function parse_texres(
        values, options) {
            options.textureResolution = parseFloat(values[0]);
        }

        /**
           * Parses the -clamp flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -clamp flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_clamp", value: function parse_clamp(
        values, options) {
            options.clamp = values[0] == "on";
        }

        /**
           * Parses the -bm flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -bm flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_bm", value: function parse_bm(
        values, options) {
            options.bumpMultiplier = parseFloat(values[0]);
        }

        /**
           * Parses the -imfchan flag and updates the options object with the values.
           *
           * @param {string[]} values the values passed to the -imfchan flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_imfchan", value: function parse_imfchan(
        values, options) {
            options.imfChan = values[0];
        }

        /**
           * This only exists for relection maps and denotes the type of reflection.
           *
           * @param {string[]} values the values passed to the -type flag
           * @param {Object} options the Object of all image options
           */ }, { key: "parse_type", value: function parse_type(
        values, options) {
            options.reflectionType = values[0];
        }

        /**
           * Parses the texture's options and returns an options object with the info
           *
           * @param {string[]} tokens all of the option tokens to pass to the texture
           * @return {Object} a complete object of objects to apply to the texture
           */ }, { key: "parseOptions", value: function parseOptions(
        tokens) {
            var options = {
                colorCorrection: false,
                horizontalBlending: true,
                verticalBlending: true,
                boostMipMapSharpness: 0,
                modifyTextureMap: {
                    brightness: 0,
                    contrast: 1 },

                offset: { u: 0, v: 0, w: 0 },
                scale: { u: 1, v: 1, w: 1 },
                turbulence: { u: 0, v: 0, w: 0 },
                clamp: false,
                textureResolution: null,
                bumpMultiplier: 1,
                imfChan: null };


            var option = void 0;
            var values = void 0;
            var optionsToValues = {};

            tokens.reverse();

            while (tokens.length) {
                var token = tokens.pop();

                if (token.startsWith("-")) {
                    option = token.substr(1);
                    optionsToValues[option] = [];
                } else {
                    optionsToValues[option].push(token);
                }
            }

            for (option in optionsToValues) {
                if (!optionsToValues.hasOwnProperty(option)) {
                    continue;
                }
                values = optionsToValues[option];
                var optionMethod = this["parse_" + option];
                if (optionMethod) {
                    optionMethod.bind(this)(values, options);
                }
            }

            return options;
        }

        /**
           * Parses the given texture map line.
           *
           * @param {string[]} tokens all of the tokens representing the texture
           * @return {Object} a complete object of objects to apply to the texture
           */ }, { key: "parseMap", value: function parseMap(
        tokens) {
            // according to wikipedia:
            // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)
            // there is at least one vendor that places the filename before the options
            // rather than after (which is to spec). All options start with a '-'
            // so if the first token doesn't start with a '-', we're going to assume
            // it's the name of the map file.
            var filename = void 0;
            var options = void 0;
            if (!tokens[0].startsWith("-")) {var _tokens = _toArray(
                tokens);filename = _tokens[0];options = _tokens.slice(1);
            } else {
                filename = tokens.pop();
                options = tokens;
            }

            options = this.parseOptions(options);
            options["filename"] = filename;
            return options;
        }

        /**
           * Parses the ambient map.
           *
           * @param {string[]} tokens list of tokens for the map_Ka direcive
           */ }, { key: "parse_map_Ka", value: function parse_map_Ka(
        tokens) {
            this.currentMaterial.mapAmbient = this.parseMap(tokens);
        }

        /**
           * Parses the diffuse map.
           *
           * @param {string[]} tokens list of tokens for the map_Kd direcive
           */ }, { key: "parse_map_Kd", value: function parse_map_Kd(
        tokens) {
            this.currentMaterial.mapDiffuse = this.parseMap(tokens);
        }

        /**
           * Parses the specular map.
           *
           * @param {string[]} tokens list of tokens for the map_Ks direcive
           */ }, { key: "parse_map_Ks", value: function parse_map_Ks(
        tokens) {
            this.currentMaterial.mapSpecular = this.parseMap(tokens);
        }

        /**
           * Parses the emissive map.
           *
           * @param {string[]} tokens list of tokens for the map_Ke direcive
           */ }, { key: "parse_map_Ke", value: function parse_map_Ke(
        tokens) {
            this.currentMaterial.mapEmissive = this.parseMap(tokens);
        }

        /**
           * Parses the specular exponent map.
           *
           * @param {string[]} tokens list of tokens for the map_Ns direcive
           */ }, { key: "parse_map_Ns", value: function parse_map_Ns(
        tokens) {
            this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);
        }

        /**
           * Parses the dissolve map.
           *
           * @param {string[]} tokens list of tokens for the map_d direcive
           */ }, { key: "parse_map_d", value: function parse_map_d(
        tokens) {
            this.currentMaterial.mapDissolve = this.parseMap(tokens);
        }

        /**
           * Parses the anti-aliasing option.
           *
           * @param {string[]} tokens list of tokens for the map_aat direcive
           */ }, { key: "parse_map_aat", value: function parse_map_aat(
        tokens) {
            this.currentMaterial.antiAliasing = tokens[0] == "on";
        }

        /**
           * Parses the bump map.
           *
           * @param {string[]} tokens list of tokens for the map_bump direcive
           */ }, { key: "parse_map_bump", value: function parse_map_bump(
        tokens) {
            this.currentMaterial.mapBump = this.parseMap(tokens);
        }

        /**
           * Parses the bump map.
           *
           * @param {string[]} tokens list of tokens for the bump direcive
           */ }, { key: "parse_bump", value: function parse_bump(
        tokens) {
            this.parse_map_bump(tokens);
        }

        /**
           * Parses the disp map.
           *
           * @param {string[]} tokens list of tokens for the disp direcive
           */ }, { key: "parse_disp", value: function parse_disp(
        tokens) {
            this.currentMaterial.mapDisplacement = this.parseMap(tokens);
        }

        /**
           * Parses the decal map.
           *
           * @param {string[]} tokens list of tokens for the map_decal direcive
           */ }, { key: "parse_decal", value: function parse_decal(
        tokens) {
            this.currentMaterial.mapDecal = this.parseMap(tokens);
        }

        /**
           * Parses the refl map.
           *
           * @param {string[]} tokens list of tokens for the refl direcive
           */ }, { key: "parse_refl", value: function parse_refl(
        tokens) {
            this.currentMaterial.mapReflections.push(this.parseMap(tokens));
        }

        /**
           * Parses the MTL file.
           *
           * Iterates line by line parsing each MTL directive.
           *
           * This function expects the first token in the line
           * to be a valid MTL directive. That token is then used
           * to try and run a method on this class. parse_[directive]
           * E.g., the `newmtl` directive would try to call the method
           * parse_newmtl. Each parsing function takes in the remaining
           * list of tokens and updates the currentMaterial class with
           * the attributes provided.
           */ }, { key: "parse", value: function parse()
        {
            var lines = this.data.split(/\r?\n/);var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {
                for (var _iterator = lines[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var line = _step.value;
                    line = line.trim();
                    if (!line || line.startsWith("#")) {
                        continue;
                    }

                    var tokens = line.split(/\s/);
                    var directive = void 0;var _tokens2 =
                    tokens;var _tokens3 = _toArray(_tokens2);directive = _tokens3[0];tokens = _tokens3.slice(1);

                    var parseMethod = this["parse_" + directive];

                    if (!parseMethod) {
                        console.warn("Don't know how to parse the directive: \"" + directive + "\"");
                        continue;
                    }

                    // console.log(`Parsing "${directive}" with tokens: ${tokens}`);
                    parseMethod.bind(this)(tokens);
                }

                // some cleanup. These don't need to be exposed as public data.
            } catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}delete this.data;
            this.currentMaterial = null;
        }

        /* eslint-enable camelcase*/ }]);return MaterialLibrary;}();

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(4);


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.version = exports.deleteMeshBuffers = exports.initMeshBuffers = exports.downloadMeshes = exports.downloadModels = exports.Layout = exports.MaterialLibrary = exports.Material = exports.Mesh = undefined;var _mesh = __webpack_require__(1);var _mesh2 = _interopRequireDefault(_mesh);
var _material = __webpack_require__(2);
var _layout = __webpack_require__(0);
var _utils = __webpack_require__(5);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

exports.













version = version = "1.1.0"; /**
                              * @namespace
                              */exports.Mesh = _mesh2.default;exports.Material = _material.Material;exports.MaterialLibrary = _material.MaterialLibrary;exports.Layout = _layout.Layout;exports.downloadModels = _utils.downloadModels;exports.downloadMeshes = _utils.downloadMeshes;exports.initMeshBuffers = _utils.initMeshBuffers;exports.deleteMeshBuffers = _utils.deleteMeshBuffers;exports.version = version;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports.



































































































downloadModels = downloadModels;exports.







































































































downloadMeshes = downloadMeshes;exports.

















































































































initMeshBuffers = initMeshBuffers;exports.






deleteMeshBuffers = deleteMeshBuffers;var _mesh = __webpack_require__(1);var _mesh2 = _interopRequireDefault(_mesh);var _material = __webpack_require__(2);var _layout = __webpack_require__(0);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function downloadMtlTextures(mtl, root) {var mapAttributes = ["mapDiffuse", "mapAmbient", "mapSpecular", "mapDissolve", "mapBump", "mapDisplacement", "mapDecal", "mapEmissive"];if (!root.endsWith("/")) {root += "/";}var textures = [];for (var material in mtl.materials) {if (!mtl.materials.hasOwnProperty(material)) {continue;}material = mtl.materials[material];var _loop = function _loop(attr) {var mapData = material[attr];if (!mapData) {return "continue";}var url = root + mapData.filename;textures.push(fetch(url).then(function (response) {if (!response.ok) {throw new Error();}return response.blob();}).then(function (data) {var image = new Image();image.src = URL.createObjectURL(data);mapData.texture = image;return new Promise(function (resolve) {return image.onload = function () {return Promise.resolve();};});}).catch(function () {console.error("Unable to download texture: " + url);}));};var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {for (var _iterator = mapAttributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attr = _step.value;var _ret = _loop(attr);if (_ret === "continue") continue;}} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}}return Promise.all(textures);} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Accepts a list of model request objects and returns a Promise that
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * resolves when all models have been downloaded and parsed.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The list of model objects follow this interface:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  obj: 'path/to/model.obj',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  mtl: true | 'path/to/model.mtl',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  downloadMtlTextures: true | false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  mtlTextureRoot: '/models/suzanne/maps'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  name: 'suzanne'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The `obj` attribute is required and should be the path to the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * model's .obj file relative to the current repo (absolute URLs are
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * suggested).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The `mtl` attribute is optional and can either be a boolean or
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * a path to the model's .mtl file relative to the current URL. If
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * the value is `true`, then the path and basename given for the `obj`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * attribute is used replacing the .obj suffix for .mtl
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * E.g.: {obj: 'models/foo.obj', mtl: true} would search for 'models/foo.mtl'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The `name` attribute is optional and is a human friendly name to be
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * included with the parsed OBJ and MTL files. If not given, the base .obj
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * filename will be used.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The `downloadMtlTextures` attribute is a flag for automatically downloading
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * any images found in the MTL file and attaching them to each Material
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * created from that file. For example, if material.mapDiffuse is set (there
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * was data in the MTL file), then material.mapDiffuse.texture will contain
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * the downloaded image. This option defaults to `true`. By default, the MTL's
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * URL will be used to determine the location of the images.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The `mtlTextureRoot` attribute is optional and should point to the location
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * on the server that this MTL's texture files are located. The default is to
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * use the MTL file's location.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * @returns {Promise} the result of downloading the given list of models. The
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * promise will resolve with an object whose keys are the names of the models
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * and the value is its Mesh object. Each Mesh object will automatically
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * have its addMaterialLibrary() method called to set the given MTL data (if given).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */function downloadModels(models) {var finished = [];var _loop2 = function _loop2(model) {var parsed = [];if (!model.obj) {throw new Error('"obj" attribute of model object not set. The .obj file is required to be set ' + "in order to use downloadModels()");}var options = {};options.indicesPerMaterial = !!model.indicesPerMaterial;options.calcTangentsAndBitangents = !!model.calcTangentsAndBitangents; // if the name is not provided, dervive it from the given OBJ
        var name = model.name;if (!name) {var parts = model.obj.split("/");name = parts[parts.length - 1].replace(".obj", "");}parsed.push(Promise.resolve(name));parsed.push(fetch(model.obj).then(function (response) {return response.text();}).then(function (data) {return new _mesh2.default(data, options);})); // Download MaterialLibrary file?
        if (model.mtl) {var mtl = model.mtl;if (typeof mtl === "boolean") {mtl = model.obj.replace(/\.obj$/, ".mtl");}parsed.push(fetch(mtl).then(function (response) {return response.text();}).then(function (data) {var material = new _material.MaterialLibrary(data);if (model.downloadMtlTextures !== false) {var root = model.mtlTextureRoot;if (!root) {// get the directory of the MTL file as default
                        root = mtl.substr(0, mtl.lastIndexOf("/"));} // downloadMtlTextures returns a Promise that
                    // is resolved once all of the images it
                    // contains are downloaded. These are then
                    // attached to the map data objects
                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);}return Promise.all(Promise.resolve(material));}).then(function (value) {return value[0];}));}finished.push(Promise.all(parsed));};var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {for (var _iterator2 = models[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var model = _step2.value;_loop2(model);}} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}return Promise.all(finished).then(function (ms) {// the "finished" promise is a list of name, Mesh instance,
        // and MaterialLibary instance. This unpacks and returns an
        // object mapping name to Mesh (Mesh points to MTL).
        var models = {};var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {for (var _iterator3 = ms[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var model = _step3.value;var _model = _slicedToArray(model, 3),_name = _model[0],mesh = _model[1],mtl = _model[2];mesh.name = _name;if (mtl) {mesh.addMaterialLibrary(mtl);}models[_name] = mesh;}} catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3.return) {_iterator3.return();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}return models;});} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Takes in an object of `mesh_name`, `'/url/to/OBJ/file'` pairs and a callback
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * function. Each OBJ file will be ajaxed in and automatically converted to
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * an OBJ.Mesh. When all files have successfully downloaded the callback
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * function provided will be called and passed in an object containing
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * the newly created meshes.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * **Note:** In order to use this function as a way to download meshes, a
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * webserver of some sort must be used.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh's OBJ file
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { '<mesh_name>': OBJ.Mesh }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            */function downloadMeshes(nameAndURLs, completionCallback, meshes) {if (meshes === undefined) {meshes = {};}var completed = [];var _loop3 = function _loop3(mesh_name) {if (!nameAndURLs.hasOwnProperty(mesh_name)) {return "continue";}var url = nameAndURLs[mesh_name];completed.push(fetch(url).then(function (response) {return response.text();}).then(function (data) {return [mesh_name, new _mesh2.default(data)];}));};for (var mesh_name in nameAndURLs) {var _ret3 = _loop3(mesh_name);if (_ret3 === "continue") continue;}Promise.all(completed).then(function (ms) {var _iteratorNormalCompletion4 = true;var _didIteratorError4 = false;var _iteratorError4 = undefined;try {for (var _iterator4 = ms[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {var _ref = _step4.value;var _ref2 = _slicedToArray(_ref, 2);var _name2 = _ref2[0];var mesh = _ref2[1];meshes[_name2] = mesh;}} catch (err) {_didIteratorError4 = true;_iteratorError4 = err;} finally {try {if (!_iteratorNormalCompletion4 && _iterator4.return) {_iterator4.return();}} finally {if (_didIteratorError4) {throw _iteratorError4;}}}return completionCallback(meshes);});}var _buildBuffer = function _buildBuffer(gl, type, data, itemSize) {var buffer = gl.createBuffer();var arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;gl.bindBuffer(type, buffer);gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);buffer.itemSize = itemSize;buffer.numItems = data.length / itemSize;return buffer;}; /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Takes in the WebGL context and a Mesh, then creates and appends the buffers
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * to the mesh object as attributes.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * @param {WebGLRenderingContext} gl the `canvas.getContext('webgl')` context instance
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * @param {Mesh} mesh a single `OBJ.Mesh` instance
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * The newly created mesh attributes are:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Attrbute | Description
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * :--- | ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * **normalBuffer**       |contains the model&#39;s Vertex Normals
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * normalBuffer.itemSize  |set to 3 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * normalBuffer.numItems  |the total number of vertex normals
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * **textureBuffer**      |contains the model&#39;s Texture Coordinates
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * textureBuffer.itemSize |set to 2 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * textureBuffer.numItems |the number of texture coordinates
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * vertexBuffer.itemSize  |set to 3 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * vertexBuffer.numItems  |the total number of vertices
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * **indexBuffer**        |contains the indices of the faces
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * indexBuffer.itemSize   |is set to 1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * indexBuffer.numItems   |the total number of indices
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * A simple example (a lot of steps are missing, so don't copy and paste):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     var gl   = canvas.getContext('webgl'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *         mesh = OBJ.Mesh(obj_file_data);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // compile the shaders and create a shader program
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     var shaderProgram = gl.createProgram();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // compilation stuff here
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     ...
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // make sure you have vertex, vertex normal, and texture coordinate
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // attributes located in your shaders and attach them to the shader program
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // create and initialize the vertex, vertex normal, and texture coordinate buffers
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // and save on to the mesh object
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     OBJ.initMeshBuffers(gl, mesh);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // now to render the mesh
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // it's possible that the mesh doesn't contain
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // any texture coordinates (e.g. suzanne.obj in the development branch).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // in this case, the texture vertexAttribArray will need to be disabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     // before the call to drawElements
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     if(!mesh.textures.length){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     else{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *       // if the texture vertexAttribArray has been previously
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *       // disabled, then it needs to be re-enabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */function initMeshBuffers(gl, mesh) {mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);}function deleteMeshBuffers(gl, mesh) {gl.deleteBuffer(mesh.normalBuffer);gl.deleteBuffer(mesh.textureBuffer);gl.deleteBuffer(mesh.vertexBuffer);gl.deleteBuffer(mesh.indexBuffer);}

/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlNTNlODViOGMxNGVmMDIxMmE1YyIsIndlYnBhY2s6Ly8vLi9zcmMvbGF5b3V0LmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRlcmlhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIl0sIm5hbWVzIjpbIkxheW91dCIsImF0dHJpYnV0ZXMiLCJvZmZzZXQiLCJtYXhTdHJpZGVNdWx0aXBsZSIsImF0dHJpYnV0ZSIsImtleSIsIkR1cGxpY2F0ZUF0dHJpYnV0ZUV4Y2VwdGlvbiIsInNpemVPZlR5cGUiLCJjb25zb2xlIiwid2FybiIsInNpemUiLCJ0eXBlIiwibm9ybWFsaXplZCIsInNpemVJbkJ5dGVzIiwiTWF0aCIsIm1heCIsInN0cmlkZSIsIm1lc3NhZ2UiLCJBdHRyaWJ1dGUiLCJzaXplSW5CeXRlc09mVHlwZSIsIlBPU0lUSU9OIiwiTk9STUFMIiwiVEFOR0VOVCIsIkJJVEFOR0VOVCIsIlVWIiwiTUFURVJJQUxfSU5ERVgiLCJNQVRFUklBTF9FTkFCTEVEIiwiQU1CSUVOVCIsIkRJRkZVU0UiLCJTUEVDVUxBUiIsIlNQRUNVTEFSX0VYUE9ORU5UIiwiRU1JU1NJVkUiLCJUUkFOU01JU1NJT05fRklMVEVSIiwiRElTU09MVkUiLCJJTExVTUlOQVRJT04iLCJSRUZSQUNUSU9OX0lOREVYIiwiU0hBUlBORVNTIiwiTUFQX0RJRkZVU0UiLCJNQVBfQU1CSUVOVCIsIk1BUF9TUEVDVUxBUiIsIk1BUF9TUEVDVUxBUl9FWFBPTkVOVCIsIk1BUF9ESVNTT0xWRSIsIkFOVElfQUxJQVNJTkciLCJNQVBfQlVNUCIsIk1BUF9ESVNQTEFDRU1FTlQiLCJNQVBfREVDQUwiLCJNQVBfRU1JU1NJVkUiLCJNZXNoIiwib2JqZWN0RGF0YSIsIm9wdGlvbnMiLCJtYXRlcmlhbHMiLCJlbmFibGVXVGV4dHVyZUNvb3JkIiwiaW5kaWNlc1Blck1hdGVyaWFsIiwic2VsZiIsInZlcnRpY2VzIiwidmVydGV4Tm9ybWFscyIsInRleHR1cmVzIiwiaW5kaWNlcyIsInRleHR1cmVTdHJpZGUiLCJuYW1lIiwidmVydHMiLCJ2ZXJ0Tm9ybWFscyIsInVucGFja2VkIiwibWF0ZXJpYWxOYW1lc0J5SW5kZXgiLCJtYXRlcmlhbEluZGljZXNCeU5hbWUiLCJjdXJyZW50TWF0ZXJpYWxJbmRleCIsImN1cnJlbnRPYmplY3RCeU1hdGVyaWFsSW5kZXgiLCJub3JtcyIsImhhc2hpbmRpY2VzIiwibWF0ZXJpYWxJbmRpY2VzIiwiaW5kZXgiLCJWRVJURVhfUkUiLCJOT1JNQUxfUkUiLCJURVhUVVJFX1JFIiwiRkFDRV9SRSIsIldISVRFU1BBQ0VfUkUiLCJVU0VfTUFURVJJQUxfUkUiLCJsaW5lcyIsInNwbGl0IiwiaSIsImxlbmd0aCIsImxpbmUiLCJ0cmltIiwic3RhcnRzV2l0aCIsImVsZW1lbnRzIiwic2hpZnQiLCJ0ZXN0IiwicHVzaCIsImNvb3JkcyIsInNsaWNlIiwibWF0ZXJpYWxOYW1lIiwicXVhZCIsImoiLCJlbGVMZW4iLCJoYXNoMCIsImhhc2giLCJ2ZXJ0ZXgiLCJub3JtYWxJbmRleCIsInZlcnRleE1hdGVyaWFsSW5kaWNlcyIsIm1hdGVyaWFsTmFtZXMiLCJtYXRlcmlhbHNCeUluZGV4IiwiY2FsY1RhbmdlbnRzQW5kQml0YW5nZW50cyIsImNhbGN1bGF0ZVRhbmdlbnRzQW5kQml0YW5nZW50cyIsImFzc2VydCIsInRhbmdlbnRzIiwiQXJyYXkiLCJtYXAiLCJiaXRhbmdlbnRzIiwiaXNBcnJheSIsImNvbmNhdCIsImFwcGx5Iiwibm9ybWFscyIsInV2cyIsImkwIiwiaTEiLCJpMiIsInhfdjAiLCJ5X3YwIiwiel92MCIsInhfdXYwIiwieV91djAiLCJ4X3YxIiwieV92MSIsInpfdjEiLCJ4X3V2MSIsInlfdXYxIiwieF92MiIsInlfdjIiLCJ6X3YyIiwieF91djIiLCJ5X3V2MiIsInhfZGVsdGFQb3MxIiwieV9kZWx0YVBvczEiLCJ6X2RlbHRhUG9zMSIsInhfZGVsdGFQb3MyIiwieV9kZWx0YVBvczIiLCJ6X2RlbHRhUG9zMiIsInhfdXZEZWx0YVBvczEiLCJ5X3V2RGVsdGFQb3MxIiwieF91dkRlbHRhUG9zMiIsInlfdXZEZWx0YVBvczIiLCJySW52IiwiciIsImFicyIsInhfdGFuZ2VudCIsInlfdGFuZ2VudCIsInpfdGFuZ2VudCIsInhfYml0YW5nZW50IiwieV9iaXRhbmdlbnQiLCJ6X2JpdGFuZ2VudCIsInhfbjAiLCJ5X24wIiwiel9uMCIsInhfbjEiLCJ5X24xIiwiel9uMSIsInhfbjIiLCJ5X24yIiwiel9uMiIsIm4wX2RvdF90IiwibjFfZG90X3QiLCJuMl9kb3RfdCIsInhfcmVzVGFuZ2VudDAiLCJ5X3Jlc1RhbmdlbnQwIiwiel9yZXNUYW5nZW50MCIsInhfcmVzVGFuZ2VudDEiLCJ5X3Jlc1RhbmdlbnQxIiwiel9yZXNUYW5nZW50MSIsInhfcmVzVGFuZ2VudDIiLCJ5X3Jlc1RhbmdlbnQyIiwiel9yZXNUYW5nZW50MiIsIm1hZ1RhbmdlbnQwIiwic3FydCIsIm1hZ1RhbmdlbnQxIiwibWFnVGFuZ2VudDIiLCJuMF9kb3RfYnQiLCJuMV9kb3RfYnQiLCJuMl9kb3RfYnQiLCJ4X3Jlc0JpdGFuZ2VudDAiLCJ5X3Jlc0JpdGFuZ2VudDAiLCJ6X3Jlc0JpdGFuZ2VudDAiLCJ4X3Jlc0JpdGFuZ2VudDEiLCJ5X3Jlc0JpdGFuZ2VudDEiLCJ6X3Jlc0JpdGFuZ2VudDEiLCJ4X3Jlc0JpdGFuZ2VudDIiLCJ5X3Jlc0JpdGFuZ2VudDIiLCJ6X3Jlc0JpdGFuZ2VudDIiLCJtYWdCaXRhbmdlbnQwIiwibWFnQml0YW5nZW50MSIsIm1hZ0JpdGFuZ2VudDIiLCJsYXlvdXQiLCJudW1JdGVtcyIsImJ1ZmZlciIsIkFycmF5QnVmZmVyIiwiZGF0YVZpZXciLCJEYXRhVmlldyIsInZlcnRleE9mZnNldCIsInNldEZsb2F0MzIiLCJzZXRJbnQxNiIsIm1hdGVyaWFsSW5kZXgiLCJtYXRlcmlhbCIsImFtYmllbnQiLCJkaWZmdXNlIiwic3BlY3VsYXIiLCJzcGVjdWxhckV4cG9uZW50IiwiZW1pc3NpdmUiLCJ0cmFuc21pc3Npb25GaWx0ZXIiLCJkaXNzb2x2ZSIsImlsbHVtaW5hdGlvbiIsInJlZnJhY3Rpb25JbmRleCIsInNoYXJwbmVzcyIsImFudGlBbGlhc2luZyIsIlVpbnQxNkFycmF5IiwibXRsIiwiTWF0ZXJpYWwiLCJ0cmFuc3BhcmVuY3kiLCJtYXBEaWZmdXNlIiwibWFwQW1iaWVudCIsIm1hcFNwZWN1bGFyIiwibWFwU3BlY3VsYXJFeHBvbmVudCIsIm1hcERpc3NvbHZlIiwibWFwQnVtcCIsIm1hcERpc3BsYWNlbWVudCIsIm1hcERlY2FsIiwibWFwRW1pc3NpdmUiLCJtYXBSZWZsZWN0aW9ucyIsIk1hdGVyaWFsTGlicmFyeSIsIm10bERhdGEiLCJkYXRhIiwiY3VycmVudE1hdGVyaWFsIiwicGFyc2UiLCJ0b2tlbnMiLCJlcnJvciIsInBhcnNlRmxvYXQiLCJ2YWx1ZSIsInBhcnNlQ29sb3IiLCJwb3AiLCJwYXJzZUludCIsInZhbHVlcyIsImNvbG9yQ29ycmVjdGlvbiIsImhvcml6b250YWxCbGVuZGluZyIsInZlcnRpY2FsQmxlbmRpbmciLCJib29zdE1pcE1hcFNoYXJwbmVzcyIsIm1vZGlmeVRleHR1cmVNYXAiLCJicmlnaHRuZXNzIiwiY29udHJhc3QiLCJvcHRpb24iLCJkZWZhdWx0VmFsdWUiLCJ1IiwidiIsInciLCJwYXJzZV9vc3QiLCJzY2FsZSIsInR1cmJ1bGVuY2UiLCJ0ZXh0dXJlUmVzb2x1dGlvbiIsImNsYW1wIiwiYnVtcE11bHRpcGxpZXIiLCJpbWZDaGFuIiwicmVmbGVjdGlvblR5cGUiLCJvcHRpb25zVG9WYWx1ZXMiLCJyZXZlcnNlIiwidG9rZW4iLCJzdWJzdHIiLCJoYXNPd25Qcm9wZXJ0eSIsIm9wdGlvbk1ldGhvZCIsImJpbmQiLCJmaWxlbmFtZSIsInBhcnNlT3B0aW9ucyIsInBhcnNlTWFwIiwicGFyc2VfbWFwX2J1bXAiLCJkaXJlY3RpdmUiLCJwYXJzZU1ldGhvZCIsInZlcnNpb24iLCJkb3dubG9hZE1vZGVscyIsImRvd25sb2FkTWVzaGVzIiwiaW5pdE1lc2hCdWZmZXJzIiwiZGVsZXRlTWVzaEJ1ZmZlcnMiLCJkb3dubG9hZE10bFRleHR1cmVzIiwicm9vdCIsIm1hcEF0dHJpYnV0ZXMiLCJlbmRzV2l0aCIsImF0dHIiLCJtYXBEYXRhIiwidXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIkVycm9yIiwiYmxvYiIsImltYWdlIiwiSW1hZ2UiLCJzcmMiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJ0ZXh0dXJlIiwiUHJvbWlzZSIsIm9ubG9hZCIsInJlc29sdmUiLCJjYXRjaCIsImFsbCIsIm1vZGVscyIsImZpbmlzaGVkIiwibW9kZWwiLCJwYXJzZWQiLCJvYmoiLCJwYXJ0cyIsInJlcGxhY2UiLCJ0ZXh0IiwibXRsVGV4dHVyZVJvb3QiLCJsYXN0SW5kZXhPZiIsIm1zIiwibWVzaCIsImFkZE1hdGVyaWFsTGlicmFyeSIsIm5hbWVBbmRVUkxzIiwiY29tcGxldGlvbkNhbGxiYWNrIiwibWVzaGVzIiwidW5kZWZpbmVkIiwiY29tcGxldGVkIiwibWVzaF9uYW1lIiwiX2J1aWxkQnVmZmVyIiwiZ2wiLCJpdGVtU2l6ZSIsImNyZWF0ZUJ1ZmZlciIsImFycmF5VmlldyIsIkFSUkFZX0JVRkZFUiIsIkZsb2F0MzJBcnJheSIsImJpbmRCdWZmZXIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJub3JtYWxCdWZmZXIiLCJ0ZXh0dXJlQnVmZmVyIiwidmVydGV4QnVmZmVyIiwiaW5kZXhCdWZmZXIiLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsImRlbGV0ZUJ1ZmZlciJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNWQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFD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QWFDLEVBQWIsRUFBaUJBLEdBQUdhLG9CQUFwQixFQUEwQ3RCLEtBQUsvUCxPQUEvQyxFQUF3RCxDQUF4RCxDQUFuQixDQUNILENBRU0sU0FBUzJOLGlCQUFULENBQTJCNkMsRUFBM0IsRUFBK0JULElBQS9CLEVBQXFDLENBQ3hDUyxHQUFHYyxZQUFILENBQWdCdkIsS0FBS2tCLFlBQXJCLEVBQ0FULEdBQUdjLFlBQUgsQ0FBZ0J2QixLQUFLbUIsYUFBckIsRUFDQVYsR0FBR2MsWUFBSCxDQUFnQnZCLEtBQUtvQixZQUFyQixFQUNBWCxHQUFHYyxZQUFILENBQWdCdkIsS0FBS3FCLFdBQXJCLEVBQ0gsQyIsImZpbGUiOiJ3ZWJnbC1vYmotbG9hZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJPQkpcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiT0JKXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIk9CSlwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGU1M2U4NWI4YzE0ZWYwMjEyYTVjIiwiLyoqXG4gKiBBIGNsYXNzIHRvIHJlcHJlc2VudCB0aGUgbWVtb3J5IGxheW91dCBmb3IgYSB2ZXJ0ZXggYXR0cmlidXRlIGFycmF5LiBVc2VkIGJ5XG4gKiB7QGxpbmsgTWVzaH0ncyBUQkQoLi4uKSBtZXRob2QgdG8gZ2VuZXJhdGUgYSBwYWNrZWQgYXJyYXkgZnJvbSBtZXNoIGRhdGEuXG4gKiA8cD5cbiAqIExheW91dCBjYW4gc29ydCBvZiBiZSB0aG91Z2h0IG9mIGFzIGEgQy1zdHlsZSBzdHJ1Y3QgZGVjbGFyYXRpb24uXG4gKiB7QGxpbmsgTWVzaH0ncyBUQkQoLi4uKSBtZXRob2Qgd2lsbCB1c2UgdGhlIHtAbGluayBMYXlvdXR9IGluc3RhbmNlIHRvXG4gKiBwYWNrIGFuIGFycmF5IGluIHRoZSBnaXZlbiBhdHRyaWJ1dGUgb3JkZXIuXG4gKiA8cD5cbiAqIExheW91dCBhbHNvIGlzIHZlcnkgaGVscGZ1bCB3aGVuIGNhbGxpbmcgYSBXZWJHTCBjb250ZXh0J3NcbiAqIDxjb2RlPnZlcnRleEF0dHJpYlBvaW50ZXI8L2NvZGU+IG1ldGhvZC4gSWYgeW91J3ZlIGNyZWF0ZWQgYSBidWZmZXIgdXNpbmdcbiAqIGEgTGF5b3V0IGluc3RhbmNlLCB0aGVuIHRoZSBzYW1lIExheW91dCBpbnN0YW5jZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmVcbiAqIHRoZSBzaXplLCB0eXBlLCBub3JtYWxpemVkLCBzdHJpZGUsIGFuZCBvZmZzZXQgcGFyYW1ldGVycyBmb3JcbiAqIDxjb2RlPnZlcnRleEF0dHJpYlBvaW50ZXI8L2NvZGU+LlxuICogPHA+XG4gKiBGb3IgZXhhbXBsZTpcbiAqIDxwcmU+PGNvZGU+XG4gKlxuICogY29uc3QgaW5kZXggPSBnbGN0eC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcInBvc1wiKTtcbiAqIGdsY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gKiAgIGxheW91dC5wb3NpdGlvbi5zaXplLFxuICogICBnbGN0eFtsYXlvdXQucG9zaXRpb24udHlwZV0sXG4gKiAgIGxheW91dC5wb3NpdGlvbi5ub3JtYWxpemVkLFxuICogICBsYXlvdXQucG9zaXRpb24uc3RyaWRlLFxuICogICBsYXlvdXQucG9zaXRpb24ub2Zmc2V0KTtcbiAqIDwvY29kZT48L3ByZT5cbiAqIEBzZWUge0BsaW5rIE1lc2h9XG4gKi9cbmV4cG9ydCBjbGFzcyBMYXlvdXQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIExheW91dCBvYmplY3QuIFRoaXMgY29uc3RydWN0b3Igd2lsbCB0aHJvdyBpZiBhbnkgZHVwbGljYXRlXG4gICAgICogYXR0cmlidXRlcyBhcmUgZ2l2ZW4uXG4gICAgICogQHBhcmFtIHtBcnJheX0gLi4uYXR0cmlidXRlcyAtIEFuIG9yZGVyZWQgbGlzdCBvZiBhdHRyaWJ1dGVzIHRoYXRcbiAgICAgKiAgICAgICAgZGVzY3JpYmUgdGhlIGRlc2lyZWQgbWVtb3J5IGxheW91dCBmb3IgZWFjaCB2ZXJ0ZXggYXR0cmlidXRlLlxuICAgICAqICAgICAgICA8cD5cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIE1lc2h9XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4uYXR0cmlidXRlcykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IG1heFN0cmlkZU11bHRpcGxlID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYgKHRoaXNbYXR0cmlidXRlLmtleV0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRHVwbGljYXRlQXR0cmlidXRlRXhjZXB0aW9uKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBZGQgcGFkZGluZyB0byBzYXRpc2Z5IFdlYkdMJ3MgcmVxdWlyZW1lbnQgdGhhdCBhbGxcbiAgICAgICAgICAgIC8vIHZlcnRleEF0dHJpYlBvaW50ZXIgY2FsbHMgaGF2ZSBhbiBvZmZzZXQgdGhhdCBpcyBhIG11bHRpcGxlIG9mXG4gICAgICAgICAgICAvLyB0aGUgdHlwZSBzaXplLlxuICAgICAgICAgICAgaWYgKG9mZnNldCAlIGF0dHJpYnV0ZS5zaXplT2ZUeXBlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGF0dHJpYnV0ZS5zaXplT2ZUeXBlIC0gb2Zmc2V0ICUgYXR0cmlidXRlLnNpemVPZlR5cGU7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTGF5b3V0IHJlcXVpcmVzIHBhZGRpbmcgYmVmb3JlIFwiICsgYXR0cmlidXRlLmtleSArIFwiIGF0dHJpYnV0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNbYXR0cmlidXRlLmtleV0gPSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlOiBhdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgc2l6ZTogYXR0cmlidXRlLnNpemUsXG4gICAgICAgICAgICAgICAgdHlwZTogYXR0cmlidXRlLnR5cGUsXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZDogYXR0cmlidXRlLm5vcm1hbGl6ZWQsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvZmZzZXQgKz0gYXR0cmlidXRlLnNpemVJbkJ5dGVzO1xuICAgICAgICAgICAgbWF4U3RyaWRlTXVsdGlwbGUgPSBNYXRoLm1heChtYXhTdHJpZGVNdWx0aXBsZSwgYXR0cmlidXRlLnNpemVPZlR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCBwYWRkaW5nIHRvIHRoZSBlbmQgdG8gc2F0aXNmeSBXZWJHTCdzIHJlcXVpcmVtZW50IHRoYXQgYWxsXG4gICAgICAgIC8vIHZlcnRleEF0dHJpYlBvaW50ZXIgY2FsbHMgaGF2ZSBhIHN0cmlkZSB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgdGhlXG4gICAgICAgIC8vIHR5cGUgc2l6ZS4gQmVjYXVzZSB3ZSdyZSBwdXR0aW5nIGRpZmZlcmVudGx5IHNpemVkIGF0dHJpYnV0ZXMgaW50b1xuICAgICAgICAvLyB0aGUgc2FtZSBidWZmZXIsIGl0IG11c3QgYmUgcGFkZGVkIHRvIGEgbXVsdGlwbGUgb2YgdGhlIGxhcmdlc3RcbiAgICAgICAgLy8gdHlwZSBzaXplLlxuICAgICAgICBpZiAob2Zmc2V0ICUgbWF4U3RyaWRlTXVsdGlwbGUgIT09IDApIHtcbiAgICAgICAgICAgIG9mZnNldCArPSBtYXhTdHJpZGVNdWx0aXBsZSAtIG9mZnNldCAlIG1heFN0cmlkZU11bHRpcGxlO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTGF5b3V0IHJlcXVpcmVzIHBhZGRpbmcgYXQgdGhlIGJhY2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJpZGUgPSBvZmZzZXQ7XG4gICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHRoaXNbYXR0cmlidXRlLmtleV0uc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQW4gZXhjZXB0aW9uIGZvciB3aGVuIHR3byBvciBtb3JlIG9mIHRoZSBzYW1lIGF0dHJpYnV0ZXMgYXJlIGZvdW5kIGluIHRoZVxuICogc2FtZSBsYXlvdXQuXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBEdXBsaWNhdGVBdHRyaWJ1dGVFeGNlcHRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIER1cGxpY2F0ZUF0dHJpYnV0ZUV4Y2VwdGlvblxuICAgICAqIEBwYXJhbSB7QXR0cmlidXRlfSBhdHRyaWJ1dGUgLSBUaGUgYXR0cmlidXRlIHRoYXQgd2FzIGZvdW5kIG1vcmUgdGhhblxuICAgICAqICAgICAgICBvbmNlIGluIHRoZSB7QGxpbmsgTGF5b3V0fVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcImZvdW5kIGR1cGxpY2F0ZSBhdHRyaWJ1dGU6IFwiICsgYXR0cmlidXRlLmtleTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBob3cgYSB2ZXJ0ZXggYXR0cmlidXRlIHNob3VsZCBiZSBwYWNrZWQgaW50byBhbiBidWZmZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBBdHRyaWJ1dGUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBhdHRyaWJ1dGUuIERvIG5vdCBjYWxsIHRoaXMgZGlyZWN0bHksIHVzZSB0aGUgcHJlZGVmaW5lZFxuICAgICAqIGNvbnN0YW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIG5hbWUgb2YgdGhpcyBhdHRyaWJ1dGUgYXMgaWYgaXQgd2VyZSBhIGtleSBpblxuICAgICAqICAgICAgICBhbiBPYmplY3QuIFVzZSB0aGUgY2FtZWwgY2FzZSB2ZXJzaW9uIG9mIHRoZSB1cHBlciBzbmFrZSBjYXNlXG4gICAgICogICAgICAgIGNvbnN0IG5hbWUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgLSBUaGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgcGVyIHZlcnRleCBhdHRyaWJ1dGUuXG4gICAgICogICAgICAgIE11c3QgYmUgMSwgMiwgMywgb3IgNC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSBkYXRhIHR5cGUgb2YgZWFjaCBjb21wb25lbnQgZm9yIHRoaXNcbiAgICAgKiAgICAgICAgYXR0cmlidXRlLiBQb3NzaWJsZSB2YWx1ZXM6PGJyLz5cbiAgICAgKiAgICAgICAgXCJCWVRFXCI6IHNpZ25lZCA4LWJpdCBpbnRlZ2VyLCB3aXRoIHZhbHVlcyBpbiBbLTEyOCwgMTI3XTxici8+XG4gICAgICogICAgICAgIFwiU0hPUlRcIjogc2lnbmVkIDE2LWJpdCBpbnRlZ2VyLCB3aXRoIHZhbHVlcyBpblxuICAgICAqICAgICAgICAgICAgWy0zMjc2OCwgMzI3NjddPGJyLz5cbiAgICAgKiAgICAgICAgXCJVTlNJR05FRF9CWVRFXCI6IHVuc2lnbmVkIDgtYml0IGludGVnZXIsIHdpdGggdmFsdWVzIGluXG4gICAgICogICAgICAgICAgICBbMCwgMjU1XTxici8+XG4gICAgICogICAgICAgIFwiVU5TSUdORURfU0hPUlRcIjogdW5zaWduZWQgMTYtYml0IGludGVnZXIsIHdpdGggdmFsdWVzIGluXG4gICAgICogICAgICAgICAgICBbMCwgNjU1MzVdPGJyLz5cbiAgICAgKiAgICAgICAgXCJGTE9BVFwiOiAzMi1iaXQgZmxvYXRpbmcgcG9pbnQgbnVtYmVyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBub3JtYWxpemVkIC0gV2hldGhlciBpbnRlZ2VyIGRhdGEgdmFsdWVzIHNob3VsZCBiZVxuICAgICAqICAgICAgICBub3JtYWxpemVkIHdoZW4gYmVpbmcgY2FzdGVkIHRvIGEgZmxvYXQuPGJyLz5cbiAgICAgKiAgICAgICAgSWYgdHJ1ZSwgc2lnbmVkIGludGVnZXJzIGFyZSBub3JtYWxpemVkIHRvIFstMSwgMV0uPGJyLz5cbiAgICAgKiAgICAgICAgSWYgdHJ1ZSwgdW5zaWduZWQgaW50ZWdlcnMgYXJlIG5vcm1hbGl6ZWQgdG8gWzAsIDFdLjxici8+XG4gICAgICogICAgICAgIEZvciB0eXBlIFwiRkxPQVRcIiwgdGhpcyBwYXJhbWV0ZXIgaGFzIG5vIGVmZmVjdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihrZXksIHNpemUsIHR5cGUsIG5vcm1hbGl6ZWQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2l6ZU9mVHlwZSA9IHNpemVJbkJ5dGVzT2ZUeXBlKHR5cGUpO1xuICAgICAgICB0aGlzLnNpemVJbkJ5dGVzID0gdGhpcy5zaXplT2ZUeXBlICogc2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBBIHR5cGUgYWNjZXB0ZWQgYnkge0BsaW5rIEF0dHJpYnV0ZX0uXG4gKiBAcmV0dXJuIFRoZSBzaXplIChpbiBieXRlcykgZm9yIGEgZ2l2ZW4gdHlwZS5cbiAqIEBzZWUge0BsaW5rIEF0dHJpYnV0ZX1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNpemVJbkJ5dGVzT2ZUeXBlKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcIkJZVEVcIjpcbiAgICAgICAgY2FzZSBcIlVOU0lHTkVEX0JZVEVcIjpcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICBjYXNlIFwiU0hPUlRcIjpcbiAgICAgICAgY2FzZSBcIlVOU0lHTkVEX1NIT1JUXCI6XG4gICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgY2FzZSBcIkZMT0FUXCI6XG4gICAgICAgICAgICByZXR1cm4gNDtcbiAgICB9XG59XG5cbi8vIEdlb21ldHJ5IGF0dHJpYnV0ZXNcbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3MgeCwgeSwgJiB6IGFzIGZsb2F0c1xuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0LlBPU0lUSU9OID0gbmV3IEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIDMsIFwiRkxPQVRcIik7XG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3Mgbm9ybWFsJ3MgeCwgeSwgJiB6IGFzIGZsb2F0c1xuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0Lk5PUk1BTCA9IG5ldyBBdHRyaWJ1dGUoXCJub3JtYWxcIiwgMywgXCJGTE9BVFwiKTtcblxuLyoqXG4gKiBBdHRyaWJ1dGUgbGF5b3V0IHRvIHBhY2sgYSB2ZXJ0ZXgncyBub3JtYWwncyB4LCB5LCAmIHogYXMgZmxvYXRzLlxuICogPHA+XG4gKiBUaGlzIHZhbHVlIHdpbGwgYmUgY29tcHV0ZWQgb24tdGhlLWZseSBiYXNlZCBvbiB0aGUgdGV4dHVyZSBjb29yZGluYXRlcy5cbiAqIElmIG5vIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIGF2YWlsYWJsZSwgdGhlIGdlbmVyYXRlZCB2YWx1ZSB3aWxsIGRlZmF1bHQgdG9cbiAqIDAsIDAsIDAuXG4gKlxuICogQHNlZSB7QGxpbmsgTGF5b3V0fVxuICovXG5MYXlvdXQuVEFOR0VOVCA9IG5ldyBBdHRyaWJ1dGUoXCJ0YW5nZW50XCIsIDMsIFwiRkxPQVRcIik7XG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3Mgbm9ybWFsJ3MgYml0YW5nZW50IHgsIHksICYgeiBhcyBmbG9hdHMuXG4gKiA8cD5cbiAqIFRoaXMgdmFsdWUgd2lsbCBiZSBjb21wdXRlZCBvbi10aGUtZmx5IGJhc2VkIG9uIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGVzLlxuICogSWYgbm8gdGV4dHVyZSBjb29yZGluYXRlcyBhcmUgYXZhaWxhYmxlLCB0aGUgZ2VuZXJhdGVkIHZhbHVlIHdpbGwgZGVmYXVsdCB0b1xuICogMCwgMCwgMC5cbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0LkJJVEFOR0VOVCA9IG5ldyBBdHRyaWJ1dGUoXCJiaXRhbmdlbnRcIiwgMywgXCJGTE9BVFwiKTtcblxuLyoqXG4gKiBBdHRyaWJ1dGUgbGF5b3V0IHRvIHBhY2sgYSB2ZXJ0ZXgncyB0ZXh0dXJlIGNvb3JkaW5hdGVzJyB1ICYgdiBhcyBmbG9hdHNcbiAqXG4gKiBAc2VlIHtAbGluayBMYXlvdXR9XG4gKi9cbkxheW91dC5VViA9IG5ldyBBdHRyaWJ1dGUoXCJ1dlwiLCAyLCBcIkZMT0FUXCIpO1xuXG4vLyBNYXRlcmlhbCBhdHRyaWJ1dGVzXG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGFuIHVuc2lnbmVkIHNob3J0IHRvIGJlIGludGVycHJldGVkIGFzIGEgdGhlIGluZGV4XG4gKiBpbnRvIGEge0BsaW5rIE1lc2h9J3MgbWF0ZXJpYWxzIGxpc3QuXG4gKiA8cD5cbiAqIFRoZSBpbnRlbnRpb24gb2YgdGhpcyB2YWx1ZSBpcyB0byBzZW5kIGFsbCBvZiB0aGUge0BsaW5rIE1lc2h9J3MgbWF0ZXJpYWxzXG4gKiBpbnRvIG11bHRpcGxlIHNoYWRlciB1bmlmb3JtcyBhbmQgdGhlbiByZWZlcmVuY2UgdGhlIGN1cnJlbnQgb25lIGJ5IHRoaXNcbiAqIHZlcnRleCBhdHRyaWJ1dGUuXG4gKiA8cD5cbiAqIGV4YW1wbGUgZ2xzbCBjb2RlOlxuICpcbiAqIDxwcmU+PGNvZGU+XG4gKiAgLy8gdGhpcyBpcyBib3VuZCB1c2luZyBNQVRFUklBTF9JTkRFWFxuICogIGF0dHJpYnV0ZSBpbnQgbWF0ZXJpYWxJbmRleDtcbiAqXG4gKiAgc3RydWN0IE1hdGVyaWFsIHtcbiAqICAgIHZlYzMgZGlmZnVzZTtcbiAqICAgIHZlYzMgc3BlY3VsYXI7XG4gKiAgICB2ZWMzIHNwZWN1bGFyRXhwb25lbnQ7XG4gKiAgfTtcbiAqXG4gKiAgdW5pZm9ybSBNYXRlcmlhbCBtYXRlcmlhbHNbTUFYX01BVEVSSUFMU107XG4gKlxuICogIC8vIC4uLlxuICpcbiAqICB2ZWMzIGRpZmZ1c2UgPSBtYXRlcmlhbHNbbWF0ZXJpYWxJbmRleF07XG4gKlxuICogPC9jb2RlPjwvcHJlPlxuICogVE9ETzogTW9yZSBkZXNjcmlwdGlvbiAmIHRlc3QgdG8gbWFrZSBzdXJlIHN1YnNjcmlwdGluZyBieSBhdHRyaWJ1dGVzIGV2ZW5cbiAqIHdvcmtzIGZvciB3ZWJnbFxuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0Lk1BVEVSSUFMX0lOREVYID0gbmV3IEF0dHJpYnV0ZShcIm1hdGVyaWFsSW5kZXhcIiwgMSwgXCJTSE9SVFwiKTtcbkxheW91dC5NQVRFUklBTF9FTkFCTEVEID0gbmV3IEF0dHJpYnV0ZShcIm1hdGVyaWFsRW5hYmxlZFwiLCAxLCBcIlVOU0lHTkVEX1NIT1JUXCIpO1xuTGF5b3V0LkFNQklFTlQgPSBuZXcgQXR0cmlidXRlKFwiYW1iaWVudFwiLCAzLCBcIkZMT0FUXCIpO1xuTGF5b3V0LkRJRkZVU0UgPSBuZXcgQXR0cmlidXRlKFwiZGlmZnVzZVwiLCAzLCBcIkZMT0FUXCIpO1xuTGF5b3V0LlNQRUNVTEFSID0gbmV3IEF0dHJpYnV0ZShcInNwZWN1bGFyXCIsIDMsIFwiRkxPQVRcIik7XG5MYXlvdXQuU1BFQ1VMQVJfRVhQT05FTlQgPSBuZXcgQXR0cmlidXRlKFwic3BlY3VsYXJFeHBvbmVudFwiLCAzLCBcIkZMT0FUXCIpO1xuTGF5b3V0LkVNSVNTSVZFID0gbmV3IEF0dHJpYnV0ZShcImVtaXNzaXZlXCIsIDMsIFwiRkxPQVRcIik7XG5MYXlvdXQuVFJBTlNNSVNTSU9OX0ZJTFRFUiA9IG5ldyBBdHRyaWJ1dGUoXCJ0cmFuc21pc3Npb25GaWx0ZXJcIiwgMywgXCJGTE9BVFwiKTtcbkxheW91dC5ESVNTT0xWRSA9IG5ldyBBdHRyaWJ1dGUoXCJkaXNzb2x2ZVwiLCAxLCBcIkZMT0FUXCIpO1xuTGF5b3V0LklMTFVNSU5BVElPTiA9IG5ldyBBdHRyaWJ1dGUoXCJpbGx1bWluYXRpb25cIiwgMSwgXCJVTlNJR05FRF9TSE9SVFwiKTtcbkxheW91dC5SRUZSQUNUSU9OX0lOREVYID0gbmV3IEF0dHJpYnV0ZShcInJlZnJhY3Rpb25JbmRleFwiLCAxLCBcIkZMT0FUXCIpO1xuTGF5b3V0LlNIQVJQTkVTUyA9IG5ldyBBdHRyaWJ1dGUoXCJzaGFycG5lc3NcIiwgMSwgXCJGTE9BVFwiKTtcbkxheW91dC5NQVBfRElGRlVTRSA9IG5ldyBBdHRyaWJ1dGUoXCJtYXBEaWZmdXNlXCIsIDEsIFwiU0hPUlRcIik7XG5MYXlvdXQuTUFQX0FNQklFTlQgPSBuZXcgQXR0cmlidXRlKFwibWFwQW1iaWVudFwiLCAxLCBcIlNIT1JUXCIpO1xuTGF5b3V0Lk1BUF9TUEVDVUxBUiA9IG5ldyBBdHRyaWJ1dGUoXCJtYXBTcGVjdWxhclwiLCAxLCBcIlNIT1JUXCIpO1xuTGF5b3V0Lk1BUF9TUEVDVUxBUl9FWFBPTkVOVCA9IG5ldyBBdHRyaWJ1dGUoXCJtYXBTcGVjdWxhckV4cG9uZW50XCIsIDEsIFwiU0hPUlRcIik7XG5MYXlvdXQuTUFQX0RJU1NPTFZFID0gbmV3IEF0dHJpYnV0ZShcIm1hcERpc3NvbHZlXCIsIDEsIFwiU0hPUlRcIik7XG5MYXlvdXQuQU5USV9BTElBU0lORyA9IG5ldyBBdHRyaWJ1dGUoXCJhbnRpQWxpYXNpbmdcIiwgMSwgXCJVTlNJR05FRF9TSE9SVFwiKTtcbkxheW91dC5NQVBfQlVNUCA9IG5ldyBBdHRyaWJ1dGUoXCJtYXBCdW1wXCIsIDEsIFwiU0hPUlRcIik7XG5MYXlvdXQuTUFQX0RJU1BMQUNFTUVOVCA9IG5ldyBBdHRyaWJ1dGUoXCJtYXBEaXNwbGFjZW1lbnRcIiwgMSwgXCJTSE9SVFwiKTtcbkxheW91dC5NQVBfREVDQUwgPSBuZXcgQXR0cmlidXRlKFwibWFwRGVjYWxcIiwgMSwgXCJTSE9SVFwiKTtcbkxheW91dC5NQVBfRU1JU1NJVkUgPSBuZXcgQXR0cmlidXRlKFwibWFwRW1pc3NpdmVcIiwgMSwgXCJTSE9SVFwiKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9sYXlvdXQuanMiLCJpbXBvcnQgeyBMYXlvdXQgfSBmcm9tIFwiLi9sYXlvdXRcIjtcblxuLyoqXG4gKiBUaGUgbWFpbiBNZXNoIGNsYXNzLiBUaGUgY29uc3RydWN0b3Igd2lsbCBwYXJzZSB0aHJvdWdoIHRoZSBPQkogZmlsZSBkYXRhXG4gKiBhbmQgY29sbGVjdCB0aGUgdmVydGV4LCB2ZXJ0ZXggbm9ybWFsLCB0ZXh0dXJlLCBhbmQgZmFjZSBpbmZvcm1hdGlvbi4gVGhpc1xuICogaW5mb3JtYXRpb24gY2FuIHRoZW4gYmUgdXNlZCBsYXRlciBvbiB3aGVuIGNyZWF0aW5nIHlvdXIgVkJPcy4gU2VlXG4gKiBPQkouaW5pdE1lc2hCdWZmZXJzIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byB1c2UgdGhlIG5ld2x5IGNyZWF0ZWQgTWVzaFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXNoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBNZXNoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdERhdGEgLSBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhbiBPQkogZmlsZSB3aXRoXG4gICAgICogICAgIG5ld2xpbmVzIHByZXNlcnZlZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGEgSlMgb2JqZWN0IGNvbnRhaW5pbmcgdmFsaWQgb3B0aW9ucy4gU2VlIGNsYXNzXG4gICAgICogICAgIGRvY3VtZW50YXRpb24gZm9yIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtib29sfSBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQgLSBUZXh0dXJlIGNvb3JkaW5hdGVzIGNhbiBoYXZlXG4gICAgICogICAgIGFuIG9wdGlvbmFsIFwid1wiIGNvb3JkaW5hdGUgYWZ0ZXIgdGhlIHUgYW5kIHYgY29vcmRpbmF0ZXMuIFRoaXMgZXh0cmFcbiAgICAgKiAgICAgdmFsdWUgY2FuIGJlIHVzZWQgaW4gb3JkZXIgdG8gcGVyZm9ybSBmYW5jeSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlXG4gICAgICogICAgIHRleHR1cmVzIHRoZW1zZWx2ZXMuIERlZmF1bHQgaXMgdG8gdHJ1bmNhdGUgdG8gb25seSB0aGUgdSBhbiB2XG4gICAgICogICAgIGNvb3JkaW5hdGVzLiBQYXNzaW5nIHRydWUgd2lsbCBwcm92aWRlIGEgZGVmYXVsdCB2YWx1ZSBvZiAwIGluIHRoZVxuICAgICAqICAgICBldmVudCB0aGF0IGFueSBvciBhbGwgdGV4dHVyZSBjb29yZGluYXRlcyBkb24ndCBwcm92aWRlIGEgdyB2YWx1ZS5cbiAgICAgKiAgICAgQWx3YXlzIHVzZSB0aGUgdGV4dHVyZVN0cmlkZSBhdHRyaWJ1dGUgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHRoZVxuICAgICAqICAgICBzdHJpZGUgbGVuZ3RoIG9mIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGVzIHdoZW4gcmVuZGVyaW5nIHRoZSBlbGVtZW50XG4gICAgICogICAgIGFycmF5LlxuICAgICAqIEBwYXJhbSB7Ym9vbH0gb3B0aW9ucy5jYWxjVGFuZ2VudHNBbmRCaXRhbmdlbnRzIC0gQ2FsY3VsYXRlIHRoZSB0YW5nZW50c1xuICAgICAqICAgICBhbmQgYml0YW5nZW50cyB3aGVuIGxvYWRpbmcgb2YgdGhlIE9CSiBpcyBjb21wbGV0ZWQuIFRoaXMgYWRkcyB0d28gbmV3XG4gICAgICogICAgIGF0dHJpYnV0ZXMgdG8gdGhlIE1lc2ggaW5zdGFuY2U6IGB0YW5nZW50c2AgYW5kIGBiaXRhbmdlbnRzYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvYmplY3REYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm1hdGVyaWFscyA9IG9wdGlvbnMubWF0ZXJpYWxzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQgPSAhIW9wdGlvbnMuZW5hYmxlV1RleHR1cmVDb29yZDtcbiAgICAgICAgb3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwgPSAhIW9wdGlvbnMuaW5kaWNlc1Blck1hdGVyaWFsO1xuXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgLy8gdGhlIGxpc3Qgb2YgdW5pcXVlIHZlcnRleCwgbm9ybWFsLCB0ZXh0dXJlLCBhdHRyaWJ1dGVzXG4gICAgICAgIHNlbGYudmVydGljZXMgPSBbXTtcbiAgICAgICAgc2VsZi52ZXJ0ZXhOb3JtYWxzID0gW107XG4gICAgICAgIHNlbGYudGV4dHVyZXMgPSBbXTtcbiAgICAgICAgLy8gdGhlIGluZGljaWVzIHRvIGRyYXcgdGhlIGZhY2VzXG4gICAgICAgIHNlbGYuaW5kaWNlcyA9IFtdO1xuICAgICAgICBzZWxmLnRleHR1cmVTdHJpZGUgPSBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQgPyAzIDogMjtcblxuICAgICAgICAvKlxuICAgICAgICBUaGUgT0JKIGZpbGUgZm9ybWF0IGRvZXMgYSBzb3J0IG9mIGNvbXByZXNzaW9uIHdoZW4gc2F2aW5nIGEgbW9kZWwgaW4gYVxuICAgICAgICBwcm9ncmFtIGxpa2UgQmxlbmRlci4gVGhlcmUgYXJlIGF0IGxlYXN0IDMgc2VjdGlvbnMgKDQgaW5jbHVkaW5nIHRleHR1cmVzKVxuICAgICAgICB3aXRoaW4gdGhlIGZpbGUuIEVhY2ggbGluZSBpbiBhIHNlY3Rpb24gYmVnaW5zIHdpdGggdGhlIHNhbWUgc3RyaW5nOlxuICAgICAgICAgICogJ3YnOiBpbmRpY2F0ZXMgdmVydGV4IHNlY3Rpb25cbiAgICAgICAgICAqICd2bic6IGluZGljYXRlcyB2ZXJ0ZXggbm9ybWFsIHNlY3Rpb25cbiAgICAgICAgICAqICdmJzogaW5kaWNhdGVzIHRoZSBmYWNlcyBzZWN0aW9uXG4gICAgICAgICAgKiAndnQnOiBpbmRpY2F0ZXMgdmVydGV4IHRleHR1cmUgc2VjdGlvbiAoaWYgdGV4dHVyZXMgd2VyZSB1c2VkIG9uIHRoZSBtb2RlbClcbiAgICAgICAgRWFjaCBvZiB0aGUgYWJvdmUgc2VjdGlvbnMgKGV4Y2VwdCBmb3IgdGhlIGZhY2VzIHNlY3Rpb24pIGlzIGEgbGlzdC9zZXQgb2ZcbiAgICAgICAgdW5pcXVlIHZlcnRpY2VzLlxuXG4gICAgICAgIEVhY2ggbGluZSBvZiB0aGUgZmFjZXMgc2VjdGlvbiBjb250YWlucyBhIGxpc3Qgb2ZcbiAgICAgICAgKHZlcnRleCwgW3RleHR1cmVdLCBub3JtYWwpIGdyb3Vwcy5cblxuICAgICAgICAqKk5vdGU6KiogVGhlIGZvbGxvd2luZyBkb2N1bWVudGF0aW9uIHdpbGwgdXNlIGEgY2FwaXRhbCBcIlZcIiBWZXJ0ZXggdG9cbiAgICAgICAgZGVub3RlIHRoZSBhYm92ZSAodmVydGV4LCBbdGV4dHVyZV0sIG5vcm1hbCkgZ3JvdXBzIHdoZXJlYXMgYSBsb3dlcmNhc2VcbiAgICAgICAgXCJ2XCIgdmVydGV4IGlzIHVzZWQgdG8gZGVub3RlIGFuIFgsIFksIFogY29vcmRpbmF0ZS5cblxuICAgICAgICBTb21lIGV4YW1wbGVzOlxuICAgICAgICAgICAgLy8gdGhlIHRleHR1cmUgaW5kZXggaXMgb3B0aW9uYWwsIGJvdGggZm9ybWF0cyBhcmUgcG9zc2libGUgZm9yIG1vZGVsc1xuICAgICAgICAgICAgLy8gd2l0aG91dCBhIHRleHR1cmUgYXBwbGllZFxuICAgICAgICAgICAgZiAxLzI1IDE4LzQ2IDEyLzMxXG4gICAgICAgICAgICBmIDEvLzI1IDE4Ly80NiAxMi8vMzFcblxuICAgICAgICAgICAgLy8gQSAzIHZlcnRleCBmYWNlIHdpdGggdGV4dHVyZSBpbmRpY2VzXG4gICAgICAgICAgICBmIDE2LzkyLzExIDE0LzEwMS8yMiAxLzY5LzFcblxuICAgICAgICAgICAgLy8gQSA0IHZlcnRleCBmYWNlXG4gICAgICAgICAgICBmIDE2LzkyLzExIDQwLzEwOS80MCAzOC8xMTQvMzggMTQvMTAxLzIyXG5cbiAgICAgICAgVGhlIGZpcnN0IHR3byBsaW5lcyBhcmUgZXhhbXBsZXMgb2YgYSAzIHZlcnRleCBmYWNlIHdpdGhvdXQgYSB0ZXh0dXJlIGFwcGxpZWQuXG4gICAgICAgIFRoZSBzZWNvbmQgaXMgYW4gZXhhbXBsZSBvZiBhIDMgdmVydGV4IGZhY2Ugd2l0aCBhIHRleHR1cmUgYXBwbGllZC5cbiAgICAgICAgVGhlIHRoaXJkIGlzIGFuIGV4YW1wbGUgb2YgYSA0IHZlcnRleCBmYWNlLiBOb3RlOiBhIGZhY2UgY2FuIGNvbnRhaW4gTlxuICAgICAgICBudW1iZXIgb2YgdmVydGljZXMuXG5cbiAgICAgICAgRWFjaCBudW1iZXIgdGhhdCBhcHBlYXJzIGluIG9uZSBvZiB0aGUgZ3JvdXBzIGlzIGEgMS1iYXNlZCBpbmRleFxuICAgICAgICBjb3JyZXNwb25kaW5nIHRvIGFuIGl0ZW0gZnJvbSB0aGUgb3RoZXIgc2VjdGlvbnMgKG1lYW5pbmcgdGhhdCBpbmRleGluZ1xuICAgICAgICBzdGFydHMgYXQgb25lIGFuZCAqbm90KiB6ZXJvKS5cblxuICAgICAgICBGb3IgZXhhbXBsZTpcbiAgICAgICAgICAgIGBmIDE2LzkyLzExYCBpcyBzYXlpbmcgdG9cbiAgICAgICAgICAgICAgLSB0YWtlIHRoZSAxNnRoIGVsZW1lbnQgZnJvbSB0aGUgW3ZdIHZlcnRleCBhcnJheVxuICAgICAgICAgICAgICAtIHRha2UgdGhlIDkybmQgZWxlbWVudCBmcm9tIHRoZSBbdnRdIHRleHR1cmUgYXJyYXlcbiAgICAgICAgICAgICAgLSB0YWtlIHRoZSAxMXRoIGVsZW1lbnQgZnJvbSB0aGUgW3ZuXSBub3JtYWwgYXJyYXlcbiAgICAgICAgICAgIGFuZCB0b2dldGhlciB0aGV5IG1ha2UgYSB1bmlxdWUgdmVydGV4LlxuICAgICAgICBVc2luZyBhbGwgMysgdW5pcXVlIFZlcnRpY2VzIGZyb20gdGhlIGZhY2UgbGluZSB3aWxsIHByb2R1Y2UgYSBwb2x5Z29uLlxuXG4gICAgICAgIE5vdywgeW91IGNvdWxkIGp1c3QgZ28gdGhyb3VnaCB0aGUgT0JKIGZpbGUgYW5kIGNyZWF0ZSBhIG5ldyB2ZXJ0ZXggZm9yXG4gICAgICAgIGVhY2ggZmFjZSBsaW5lIGFuZCBXZWJHTCB3aWxsIGRyYXcgd2hhdCBhcHBlYXJzIHRvIGJlIHRoZSBzYW1lIG1vZGVsLlxuICAgICAgICBIb3dldmVyLCB2ZXJ0aWNlcyB3aWxsIGJlIG92ZXJsYXBwZWQgYW5kIGR1cGxpY2F0ZWQgYWxsIG92ZXIgdGhlIHBsYWNlLlxuXG4gICAgICAgIENvbnNpZGVyIGEgY3ViZSBpbiAzRCBzcGFjZSBjZW50ZXJlZCBhYm91dCB0aGUgb3JpZ2luIGFuZCBlYWNoIHNpZGUgaXNcbiAgICAgICAgMiB1bml0cyBsb25nLiBUaGUgZnJvbnQgZmFjZSAod2l0aCB0aGUgcG9zaXRpdmUgWi1heGlzIHBvaW50aW5nIHRvd2FyZHNcbiAgICAgICAgeW91KSB3b3VsZCBoYXZlIGEgVG9wIFJpZ2h0IHZlcnRleCAobG9va2luZyBvcnRob2dvbmFsIHRvIGl0cyBub3JtYWwpXG4gICAgICAgIG1hcHBlZCBhdCAoMSwxLDEpIFRoZSByaWdodCBmYWNlIHdvdWxkIGhhdmUgYSBUb3AgTGVmdCB2ZXJ0ZXggKGxvb2tpbmdcbiAgICAgICAgb3J0aG9nb25hbCB0byBpdHMgbm9ybWFsKSBhdCAoMSwxLDEpIGFuZCB0aGUgdG9wIGZhY2Ugd291bGQgaGF2ZSBhIEJvdHRvbVxuICAgICAgICBSaWdodCB2ZXJ0ZXggKGxvb2tpbmcgb3J0aG9nb25hbCB0byBpdHMgbm9ybWFsKSBhdCAoMSwxLDEpLiBFYWNoIGZhY2VcbiAgICAgICAgaGFzIGEgdmVydGV4IGF0IHRoZSBzYW1lIGNvb3JkaW5hdGVzLCBob3dldmVyLCB0aHJlZSBkaXN0aW5jdCB2ZXJ0aWNlc1xuICAgICAgICB3aWxsIGJlIGRyYXduIGF0IHRoZSBzYW1lIHNwb3QuXG5cbiAgICAgICAgVG8gc29sdmUgdGhlIGlzc3VlIG9mIGR1cGxpY2F0ZSBWZXJ0aWNlcyAodGhlIGAodmVydGV4LCBbdGV4dHVyZV0sIG5vcm1hbClgXG4gICAgICAgIGdyb3VwcyksIHdoaWxlIGl0ZXJhdGluZyB0aHJvdWdoIHRoZSBmYWNlIGxpbmVzLCB3aGVuIGEgZ3JvdXAgaXMgZW5jb3VudGVyZWRcbiAgICAgICAgdGhlIHdob2xlIGdyb3VwIHN0cmluZyAoJzE2LzkyLzExJykgaXMgY2hlY2tlZCB0byBzZWUgaWYgaXQgZXhpc3RzIGluIHRoZVxuICAgICAgICBwYWNrZWQuaGFzaGluZGljZXMgb2JqZWN0LCBhbmQgaWYgaXQgZG9lc24ndCwgdGhlIGluZGljZXMgaXQgc3BlY2lmaWVzXG4gICAgICAgIGFyZSB1c2VkIHRvIGxvb2sgdXAgZWFjaCBhdHRyaWJ1dGUgaW4gdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIGFycmF5c1xuICAgICAgICBhbHJlYWR5IGNyZWF0ZWQuIFRoZSB2YWx1ZXMgYXJlIHRoZW4gY29waWVkIHRvIHRoZSBjb3JyZXNwb25kaW5nIHVucGFja2VkXG4gICAgICAgIGFycmF5IChmbGF0dGVuZWQgdG8gcGxheSBuaWNlIHdpdGggV2ViR0wncyBFTEVNRU5UX0FSUkFZX0JVRkZFUiBpbmRleGluZyksXG4gICAgICAgIHRoZSBncm91cCBzdHJpbmcgaXMgYWRkZWQgdG8gdGhlIGhhc2hpbmRpY2VzIHNldCBhbmQgdGhlIGN1cnJlbnQgdW5wYWNrZWRcbiAgICAgICAgaW5kZXggaXMgdXNlZCBhcyB0aGlzIGhhc2hpbmRpY2VzIHZhbHVlIHNvIHRoYXQgdGhlIGdyb3VwIG9mIGVsZW1lbnRzIGNhblxuICAgICAgICBiZSByZXVzZWQuIFRoZSB1bnBhY2tlZCBpbmRleCBpcyBpbmNyZW1lbnRlZC4gSWYgdGhlIGdyb3VwIHN0cmluZyBhbHJlYWR5XG4gICAgICAgIGV4aXN0cyBpbiB0aGUgaGFzaGluZGljZXMgb2JqZWN0LCBpdHMgY29ycmVzcG9uZGluZyB2YWx1ZSBpcyB0aGUgaW5kZXggb2ZcbiAgICAgICAgdGhhdCBncm91cCBhbmQgaXMgYXBwZW5kZWQgdG8gdGhlIHVucGFja2VkIGluZGljZXMgYXJyYXkuXG4gICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gXCJcIjtcbiAgICAgICAgY29uc3QgdmVydHMgPSBbXTtcbiAgICAgICAgY29uc3QgdmVydE5vcm1hbHMgPSBbXTtcbiAgICAgICAgY29uc3QgdGV4dHVyZXMgPSBbXTtcbiAgICAgICAgY29uc3QgdW5wYWNrZWQgPSB7fTtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxOYW1lc0J5SW5kZXggPSBbXTtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRpY2VzQnlOYW1lID0ge307XG4gICAgICAgIC8vIGtlZXAgdHJhY2sgb2Ygd2hhdCBtYXRlcmlhbCB3ZSd2ZSBzZWVuIGxhc3RcbiAgICAgICAgbGV0IGN1cnJlbnRNYXRlcmlhbEluZGV4ID0gLTE7XG4gICAgICAgIC8vIGtlZXAgdHJhY2sgaWYgcHVzaGluZyBpbmRpY2VzIGJ5IG1hdGVyaWFscyAtIG90aGVyd2lzZSBub3QgdXNlZFxuICAgICAgICBsZXQgY3VycmVudE9iamVjdEJ5TWF0ZXJpYWxJbmRleCA9IDA7XG4gICAgICAgIC8vIHVucGFja2luZyBzdHVmZlxuICAgICAgICB1bnBhY2tlZC52ZXJ0cyA9IFtdO1xuICAgICAgICB1bnBhY2tlZC5ub3JtcyA9IFtdO1xuICAgICAgICB1bnBhY2tlZC50ZXh0dXJlcyA9IFtdO1xuICAgICAgICB1bnBhY2tlZC5oYXNoaW5kaWNlcyA9IHt9O1xuICAgICAgICB1bnBhY2tlZC5pbmRpY2VzID0gW1tdXTtcbiAgICAgICAgdW5wYWNrZWQubWF0ZXJpYWxJbmRpY2VzID0gW107XG4gICAgICAgIHVucGFja2VkLmluZGV4ID0gMDtcblxuICAgICAgICBjb25zdCBWRVJURVhfUkUgPSAvXnZcXHMvO1xuICAgICAgICBjb25zdCBOT1JNQUxfUkUgPSAvXnZuXFxzLztcbiAgICAgICAgY29uc3QgVEVYVFVSRV9SRSA9IC9ednRcXHMvO1xuICAgICAgICBjb25zdCBGQUNFX1JFID0gL15mXFxzLztcbiAgICAgICAgY29uc3QgV0hJVEVTUEFDRV9SRSA9IC9cXHMrLztcbiAgICAgICAgY29uc3QgVVNFX01BVEVSSUFMX1JFID0gL151c2VtdGwvO1xuXG4gICAgICAgIC8vIGFycmF5IG9mIGxpbmVzIHNlcGFyYXRlZCBieSB0aGUgbmV3bGluZVxuICAgICAgICBjb25zdCBsaW5lcyA9IG9iamVjdERhdGEuc3BsaXQoXCJcXG5cIik7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghbGluZSB8fCBsaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGxpbmUuc3BsaXQoV0hJVEVTUEFDRV9SRSk7XG4gICAgICAgICAgICBlbGVtZW50cy5zaGlmdCgpO1xuXG4gICAgICAgICAgICBpZiAoVkVSVEVYX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdmVydGV4XG4gICAgICAgICAgICAgICAgdmVydHMucHVzaCguLi5lbGVtZW50cyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKE5PUk1BTF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHZlcnRleCBub3JtYWxcbiAgICAgICAgICAgICAgICB2ZXJ0Tm9ybWFscy5wdXNoKC4uLmVsZW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoVEVYVFVSRV9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvb3JkcyA9IGVsZW1lbnRzO1xuICAgICAgICAgICAgICAgIC8vIGJ5IGRlZmF1bHQsIHRoZSBsb2FkZXIgd2lsbCBvbmx5IGxvb2sgYXQgdGhlIFUgYW5kIFZcbiAgICAgICAgICAgICAgICAvLyBjb29yZGluYXRlcyBvZiB0aGUgdnQgZGVjbGFyYXRpb24uIFNvLCB0aGlzIHRydW5jYXRlcyB0aGVcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50cyB0byBvbmx5IHRob3NlIDIgdmFsdWVzLiBJZiBXIHRleHR1cmUgY29vcmRpbmF0ZVxuICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQgaXMgZW5hYmxlZCwgdGhlbiB0aGUgdGV4dHVyZSBjb29yZGluYXRlIGlzXG4gICAgICAgICAgICAgICAgLy8gZXhwZWN0ZWQgdG8gaGF2ZSB0aHJlZSB2YWx1ZXMgaW4gaXQuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDIgJiYgIW9wdGlvbnMuZW5hYmxlV1RleHR1cmVDb29yZCkge1xuICAgICAgICAgICAgICAgICAgICBjb29yZHMgPSBlbGVtZW50cy5zbGljZSgwLCAxKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PT0gMiAmJiBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgZm9yIHNvbWUgcmVhc29uIFcgdGV4dHVyZSBjb29yZGluYXRlIHN1cHBvcnQgaXMgZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgb25seSB0aGUgVSBhbmQgViBjb29yZGluYXRlcyBhcmUgZ2l2ZW4sIHRoZW4gd2Ugc3VwcGx5XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IHZhbHVlIG9mIDAgc28gdGhhdCB0aGUgc3RyaWRlIGxlbmd0aCBpcyBjb3JyZWN0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHRleHR1cmVzIGFyZSB1bnBhY2tlZCBiZWxvdy5cbiAgICAgICAgICAgICAgICAgICAgY29vcmRzLnB1c2goMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRleHR1cmVzLnB1c2goLi4uY29vcmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoVVNFX01BVEVSSUFMX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbE5hbWUgPSBlbGVtZW50c1swXTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB3ZSd2ZSBldmVyIHNlZW4gaXQgYmVmb3JlXG4gICAgICAgICAgICAgICAgaWYgKCEobWF0ZXJpYWxOYW1lIGluIG1hdGVyaWFsSW5kaWNlc0J5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IG1hdGVyaWFsIHdlJ3ZlIG5ldmVyIHNlZW5cbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxOYW1lc0J5SW5kZXgucHVzaChtYXRlcmlhbE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGljZXNCeU5hbWVbbWF0ZXJpYWxOYW1lXSA9IG1hdGVyaWFsTmFtZXNCeUluZGV4Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIHB1c2ggbmV3IGFycmF5IGludG8gaW5kaWNlc1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgY29udGFpbnMgYW4gYXJyYXkgYXQgaW5kZXggemVybywgZG9uJ3QgYWRkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWxJbmRpY2VzQnlOYW1lW21hdGVyaWFsTmFtZV0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlcy5wdXNoKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBrZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50IG1hdGVyaWFsIGluZGV4XG4gICAgICAgICAgICAgICAgY3VycmVudE1hdGVyaWFsSW5kZXggPSBtYXRlcmlhbEluZGljZXNCeU5hbWVbbWF0ZXJpYWxOYW1lXTtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY3VycmVudCBpbmRleCBhcnJheVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmluZGljZXNQZXJNYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4ID0gY3VycmVudE1hdGVyaWFsSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChGQUNFX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgZmFjZVxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgc3BsaXQgdGhpcyBmYWNlIGludG8gYW4gYXJyYXkgb2YgVmVydGV4IGdyb3Vwc1xuICAgICAgICAgICAgICAgIGZvciBleGFtcGxlOlxuICAgICAgICAgICAgICAgICAgIGYgMTYvOTIvMTEgMTQvMTAxLzIyIDEvNjkvMVxuICAgICAgICAgICAgICAgIGJlY29tZXM6XG4gICAgICAgICAgICAgICAgICBbJzE2LzkyLzExJywgJzE0LzEwMS8yMicsICcxLzY5LzEnXTtcbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGxldCBxdWFkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGVsZUxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaiA8IGVsZUxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRyaWFuZ3VsYXRpbmcgcXVhZHNcbiAgICAgICAgICAgICAgICAgICAgLy8gcXVhZDogJ2YgdjAvdDAvdm4wIHYxL3QxL3ZuMSB2Mi90Mi92bjIgdjMvdDMvdm4zLydcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ycmVzcG9uZGluZyB0cmlhbmdsZXM6XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgJ2YgdjAvdDAvdm4wIHYxL3QxL3ZuMSB2Mi90Mi92bjInXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgJ2YgdjIvdDIvdm4yIHYzL3QzL3ZuMyB2MC90MC92bjAnXG4gICAgICAgICAgICAgICAgICAgIGlmIChqID09PSAzICYmICFxdWFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdjIvdDIvdm4yIGluIGFnYWluIGJlZm9yZSBjb250aW51aW5nIHRvIDNcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVhZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaDAgPSBlbGVtZW50c1swXSArIFwiLFwiICsgY3VycmVudE1hdGVyaWFsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBlbGVtZW50c1tqXSArIFwiLFwiICsgY3VycmVudE1hdGVyaWFsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNoIGluIHVucGFja2VkLmhhc2hpbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5pbmRpY2VzW2N1cnJlbnRPYmplY3RCeU1hdGVyaWFsSW5kZXhdLnB1c2godW5wYWNrZWQuaGFzaGluZGljZXNbaGFzaF0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgIEVhY2ggZWxlbWVudCBvZiB0aGUgZmFjZSBsaW5lIGFycmF5IGlzIGEgVmVydGV4IHdoaWNoIGhhcyBpdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgZGVsaW1pdGVkIGJ5IGEgZm9yd2FyZCBzbGFzaC4gVGhpcyB3aWxsIHNlcGFyYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoIGF0dHJpYnV0ZSBpbnRvIGFub3RoZXIgYXJyYXk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzE5LzkyLzExJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVjb21lczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJ0ZXggPSBbJzE5JywgJzkyJywgJzExJ107XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRleFswXSBpcyB0aGUgdmVydGV4IGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVydGV4WzFdIGlzIHRoZSB0ZXh0dXJlIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVydGV4WzJdIGlzIHRoZSBub3JtYWwgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICBUaGluayBvZiBmYWNlcyBoYXZpbmcgVmVydGljZXMgd2hpY2ggYXJlIGNvbXByaXNlZCBvZiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzIGxvY2F0aW9uICh2KSwgdGV4dHVyZSAodnQpLCBhbmQgbm9ybWFsICh2bikuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2ZXJ0ZXggPSBlbGVtZW50c1tqXS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIGZvciBmYWNlcyB0byBvbmx5IHNwZWNpZnkgdGhlIHZlcnRleFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBub3JtYWwuIEluIHRoaXMgY2FzZSwgdmVydGV4IHdpbGwgb25seSBoYXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGxlbmd0aCBvZiAyIGFuZCBub3QgMyBhbmQgdGhlIG5vcm1hbCB3aWxsIGJlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Vjb25kIGl0ZW0gaW4gdGhlIGxpc3Qgd2l0aCBhbiBpbmRleCBvZiAxLlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5vcm1hbEluZGV4ID0gdmVydGV4Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB2ZXJ0cywgdGV4dHVyZXMsIGFuZCB2ZXJ0Tm9ybWFscyBhcnJheXMgZWFjaCBjb250YWluIGFcbiAgICAgICAgICAgICAgICAgICAgICAgICBmbGF0dGVuZCBhcnJheSBvZiBjb29yZGluYXRlcy5cblxuICAgICAgICAgICAgICAgICAgICAgICAgIEJlY2F1c2UgaXQgZ2V0cyBjb25mdXNpbmcgYnkgcmVmZXJyaW5nIHRvIFZlcnRleCBhbmQgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleCAoYm90aCBhcmUgZGlmZmVyZW50IGluIG15IGRlc2NyaXB0aW9ucykgSSB3aWxsIGV4cGxhaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICB3aGF0J3MgZ29pbmcgb24gdXNpbmcgdGhlIHZlcnRleE5vcm1hbHMgYXJyYXk6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhbMl0gd2lsbCBjb250YWluIHRoZSBvbmUtYmFzZWQgaW5kZXggb2YgdGhlIHZlcnRleE5vcm1hbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uICh2bikuIE9uZSBpcyBzdWJ0cmFjdGVkIGZyb20gdGhpcyBpbmRleCBudW1iZXIgdG8gcGxheVxuICAgICAgICAgICAgICAgICAgICAgICAgIG5pY2Ugd2l0aCBqYXZhc2NyaXB0J3MgemVyby1iYXNlZCBhcnJheSBpbmRleGluZy5cblxuICAgICAgICAgICAgICAgICAgICAgICAgIEJlY2F1c2UgdmVydGV4Tm9ybWFsIGlzIGEgZmxhdHRlbmVkIGFycmF5IG9mIHgsIHksIHogdmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHNpbXBsZSBwb2ludGVyIGFyaXRobWV0aWMgaXMgdXNlZCB0byBza2lwIHRvIHRoZSBzdGFydCBvZiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhOb3JtYWwsIHRoZW4gdGhlIG9mZnNldCBpcyBhZGRlZCB0byBnZXQgdGhlIGNvcnJlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICswIGlzIHgsICsxIGlzIHksICsyIGlzIHouXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIHNhbWUgcHJvY2VzcyBpcyByZXBlYXRlZCBmb3IgdmVydHMgYW5kIHRleHR1cmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJ0ZXggcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLnZlcnRzLnB1c2goK3ZlcnRzWyh2ZXJ0ZXhbMF0gLSAxKSAqIDMgKyAwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC52ZXJ0cy5wdXNoKCt2ZXJ0c1sodmVydGV4WzBdIC0gMSkgKiAzICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudmVydHMucHVzaCgrdmVydHNbKHZlcnRleFswXSAtIDEpICogMyArIDJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcnRleCB0ZXh0dXJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHR1cmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHJpZGUgPSBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQgPyAzIDogMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC50ZXh0dXJlcy5wdXNoKCt0ZXh0dXJlc1sodmVydGV4WzFdIC0gMSkgKiBzdHJpZGUgKyAwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudGV4dHVyZXMucHVzaCgrdGV4dHVyZXNbKHZlcnRleFsxXSAtIDEpICogc3RyaWRlICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudGV4dHVyZXMucHVzaCgrdGV4dHVyZXNbKHZlcnRleFsxXSAtIDEpICogc3RyaWRlICsgMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcnRleCBub3JtYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5ub3Jtcy5wdXNoKCt2ZXJ0Tm9ybWFsc1sodmVydGV4W25vcm1hbEluZGV4XSAtIDEpICogMyArIDBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLm5vcm1zLnB1c2goK3ZlcnROb3JtYWxzWyh2ZXJ0ZXhbbm9ybWFsSW5kZXhdIC0gMSkgKiAzICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQubm9ybXMucHVzaCgrdmVydE5vcm1hbHNbKHZlcnRleFtub3JtYWxJbmRleF0gLSAxKSAqIDMgKyAyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJ0ZXggbWF0ZXJpYWwgaW5kaWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQubWF0ZXJpYWxJbmRpY2VzLnB1c2goY3VycmVudE1hdGVyaWFsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBuZXdseSBjcmVhdGVkIFZlcnRleCB0byB0aGUgbGlzdCBvZiBpbmRpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5oYXNoaW5kaWNlc1toYXNoXSA9IHVucGFja2VkLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlc1tjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4XS5wdXNoKHVucGFja2VkLmhhc2hpbmRpY2VzW2hhc2hdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCB0aGUgY291bnRlclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMyAmJiBxdWFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdjAvdDAvdm4wIG9udG8gdGhlIHNlY29uZCB0cmlhbmdsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlc1tjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4XS5wdXNoKHVucGFja2VkLmhhc2hpbmRpY2VzW2hhc2gwXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi52ZXJ0aWNlcyA9IHVucGFja2VkLnZlcnRzO1xuICAgICAgICBzZWxmLnZlcnRleE5vcm1hbHMgPSB1bnBhY2tlZC5ub3JtcztcbiAgICAgICAgc2VsZi50ZXh0dXJlcyA9IHVucGFja2VkLnRleHR1cmVzO1xuICAgICAgICBzZWxmLnZlcnRleE1hdGVyaWFsSW5kaWNlcyA9IHVucGFja2VkLm1hdGVyaWFsSW5kaWNlcztcbiAgICAgICAgc2VsZi5pbmRpY2VzID0gb3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwgPyB1bnBhY2tlZC5pbmRpY2VzIDogdW5wYWNrZWQuaW5kaWNlc1tjdXJyZW50T2JqZWN0QnlNYXRlcmlhbEluZGV4XTtcblxuICAgICAgICBzZWxmLm1hdGVyaWFsTmFtZXMgPSBtYXRlcmlhbE5hbWVzQnlJbmRleDtcbiAgICAgICAgc2VsZi5tYXRlcmlhbEluZGljZXMgPSBtYXRlcmlhbEluZGljZXNCeU5hbWU7XG4gICAgICAgIHNlbGYubWF0ZXJpYWxzQnlJbmRleCA9IHt9O1xuXG4gICAgICAgIGlmIChvcHRpb25zLmNhbGNUYW5nZW50c0FuZEJpdGFuZ2VudHMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVGFuZ2VudHNBbmRCaXRhbmdlbnRzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSB0YW5nZW50cyBhbmQgYml0YW5nZW50cyBvZiB0aGUgbWVzaCB0aGF0IGZvcm1zIGFuIG9ydGhvZ29uYWwgYmFzaXMgdG9nZXRoZXIgd2l0aCB0aGVcbiAgICAgKiBub3JtYWwgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgdGV4dHVyZSBjb29yZGluYXRlcy4gVGhlc2UgYXJlIHVzZWZ1bCBmb3Igc2V0dGluZyB1cCB0aGUgVEJOIG1hdHJpeFxuICAgICAqIHdoZW4gZGlzdG9ydGluZyB0aGUgbm9ybWFscyB0aHJvdWdoIG5vcm1hbCBtYXBzLlxuICAgICAqIE1ldGhvZCBkZXJpdmVkIGZyb206IGh0dHA6Ly93d3cub3BlbmdsLXR1dG9yaWFsLm9yZy9pbnRlcm1lZGlhdGUtdHV0b3JpYWxzL3R1dG9yaWFsLTEzLW5vcm1hbC1tYXBwaW5nL1xuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcmVxdWlyZXMgdGhlIG5vcm1hbHMgYW5kIHRleHR1cmUgY29vcmRpbmF0ZXMgdG8gYmUgcGFyc2VkIGFuZCBzZXQgdXAgY29ycmVjdGx5LlxuICAgICAqIEFkZHMgdGhlIHRhbmdlbnRzIGFuZCBiaXRhbmdlbnRzIGFzIG1lbWJlcnMgb2YgdGhlIGNsYXNzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZVRhbmdlbnRzQW5kQml0YW5nZW50cygpIHtcbiAgICAgICAgY29uc29sZS5hc3NlcnQoXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzICYmXG4gICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcy5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRleE5vcm1hbHMgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRleE5vcm1hbHMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlcyAmJlxuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZXMubGVuZ3RoLFxuICAgICAgICAgICAgXCJNaXNzaW5nIGF0dHJpYnV0ZXMgZm9yIGNhbGN1bGF0aW5nIHRhbmdlbnRzIGFuZCBiaXRhbmdlbnRzXCJcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB1bnBhY2tlZCA9IHt9O1xuICAgICAgICB1bnBhY2tlZC50YW5nZW50cyA9IFsuLi5uZXcgQXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpXS5tYXAodiA9PiAwKTtcbiAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50cyA9IFsuLi5uZXcgQXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpXS5tYXAodiA9PiAwKTtcblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIGZhY2VzIGluIHRoZSB3aG9sZSBtZXNoXG4gICAgICAgIGxldCBpbmRpY2VzO1xuICAgICAgICAvLyBJZiBzb3J0ZWQgYnkgbWF0ZXJpYWxcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5pbmRpY2VzWzBdKSkge1xuICAgICAgICAgICAgaW5kaWNlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgdGhpcy5pbmRpY2VzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XG4gICAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLnZlcnRleE5vcm1hbHM7XG4gICAgICAgIGNvbnN0IHV2cyA9IHRoaXMudGV4dHVyZXM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICBjb25zdCBpMCA9IGluZGljZXNbaSArIDBdO1xuICAgICAgICAgICAgY29uc3QgaTEgPSBpbmRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IGkyID0gaW5kaWNlc1tpICsgMl07XG5cbiAgICAgICAgICAgIGNvbnN0IHhfdjAgPSB2ZXJ0aWNlc1tpMCAqIDMgKyAwXTtcbiAgICAgICAgICAgIGNvbnN0IHlfdjAgPSB2ZXJ0aWNlc1tpMCAqIDMgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHpfdjAgPSB2ZXJ0aWNlc1tpMCAqIDMgKyAyXTtcblxuICAgICAgICAgICAgY29uc3QgeF91djAgPSB1dnNbaTAgKiAyICsgMF07XG4gICAgICAgICAgICBjb25zdCB5X3V2MCA9IHV2c1tpMCAqIDIgKyAxXTtcblxuICAgICAgICAgICAgY29uc3QgeF92MSA9IHZlcnRpY2VzW2kxICogMyArIDBdO1xuICAgICAgICAgICAgY29uc3QgeV92MSA9IHZlcnRpY2VzW2kxICogMyArIDFdO1xuICAgICAgICAgICAgY29uc3Qgel92MSA9IHZlcnRpY2VzW2kxICogMyArIDJdO1xuXG4gICAgICAgICAgICBjb25zdCB4X3V2MSA9IHV2c1tpMSAqIDIgKyAwXTtcbiAgICAgICAgICAgIGNvbnN0IHlfdXYxID0gdXZzW2kxICogMiArIDFdO1xuXG4gICAgICAgICAgICBjb25zdCB4X3YyID0gdmVydGljZXNbaTIgKiAzICsgMF07XG4gICAgICAgICAgICBjb25zdCB5X3YyID0gdmVydGljZXNbaTIgKiAzICsgMV07XG4gICAgICAgICAgICBjb25zdCB6X3YyID0gdmVydGljZXNbaTIgKiAzICsgMl07XG5cbiAgICAgICAgICAgIGNvbnN0IHhfdXYyID0gdXZzW2kyICogMiArIDBdO1xuICAgICAgICAgICAgY29uc3QgeV91djIgPSB1dnNbaTIgKiAyICsgMV07XG5cbiAgICAgICAgICAgIGNvbnN0IHhfZGVsdGFQb3MxID0geF92MSAtIHhfdjA7XG4gICAgICAgICAgICBjb25zdCB5X2RlbHRhUG9zMSA9IHlfdjEgLSB5X3YwO1xuICAgICAgICAgICAgY29uc3Qgel9kZWx0YVBvczEgPSB6X3YxIC0gel92MDtcblxuICAgICAgICAgICAgY29uc3QgeF9kZWx0YVBvczIgPSB4X3YyIC0geF92MDtcbiAgICAgICAgICAgIGNvbnN0IHlfZGVsdGFQb3MyID0geV92MiAtIHlfdjA7XG4gICAgICAgICAgICBjb25zdCB6X2RlbHRhUG9zMiA9IHpfdjIgLSB6X3YwO1xuXG4gICAgICAgICAgICBjb25zdCB4X3V2RGVsdGFQb3MxID0geF91djEgLSB4X3V2MDtcbiAgICAgICAgICAgIGNvbnN0IHlfdXZEZWx0YVBvczEgPSB5X3V2MSAtIHlfdXYwO1xuXG4gICAgICAgICAgICBjb25zdCB4X3V2RGVsdGFQb3MyID0geF91djIgLSB4X3V2MDtcbiAgICAgICAgICAgIGNvbnN0IHlfdXZEZWx0YVBvczIgPSB5X3V2MiAtIHlfdXYwO1xuXG4gICAgICAgICAgICBjb25zdCBySW52ID0geF91dkRlbHRhUG9zMSAqIHlfdXZEZWx0YVBvczIgLSB5X3V2RGVsdGFQb3MxICogeF91dkRlbHRhUG9zMjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAxLjAgLyAoTWF0aC5hYnMockludiA8IDAuMDAwMSkgPyAxLjAgOiBySW52KTtcblxuICAgICAgICAgICAgLy8gVGFuZ2VudFxuICAgICAgICAgICAgY29uc3QgeF90YW5nZW50ID0gKHhfZGVsdGFQb3MxICogeV91dkRlbHRhUG9zMiAtIHhfZGVsdGFQb3MyICogeV91dkRlbHRhUG9zMSkgKiByO1xuICAgICAgICAgICAgY29uc3QgeV90YW5nZW50ID0gKHlfZGVsdGFQb3MxICogeV91dkRlbHRhUG9zMiAtIHlfZGVsdGFQb3MyICogeV91dkRlbHRhUG9zMSkgKiByO1xuICAgICAgICAgICAgY29uc3Qgel90YW5nZW50ID0gKHpfZGVsdGFQb3MxICogeV91dkRlbHRhUG9zMiAtIHpfZGVsdGFQb3MyICogeV91dkRlbHRhUG9zMSkgKiByO1xuXG4gICAgICAgICAgICAvLyBCaXRhbmdlbnRcbiAgICAgICAgICAgIGNvbnN0IHhfYml0YW5nZW50ID0gKHhfZGVsdGFQb3MyICogeF91dkRlbHRhUG9zMSAtIHhfZGVsdGFQb3MxICogeF91dkRlbHRhUG9zMikgKiByO1xuICAgICAgICAgICAgY29uc3QgeV9iaXRhbmdlbnQgPSAoeV9kZWx0YVBvczIgKiB4X3V2RGVsdGFQb3MxIC0geV9kZWx0YVBvczEgKiB4X3V2RGVsdGFQb3MyKSAqIHI7XG4gICAgICAgICAgICBjb25zdCB6X2JpdGFuZ2VudCA9ICh6X2RlbHRhUG9zMiAqIHhfdXZEZWx0YVBvczEgLSB6X2RlbHRhUG9zMSAqIHhfdXZEZWx0YVBvczIpICogcjtcblxuICAgICAgICAgICAgLy8gR3JhbS1TY2htaWR0IG9ydGhvZ29uYWxpemVcbiAgICAgICAgICAgIC8vdCA9IGdsbTo6bm9ybWFsaXplKHQgLSBuICogZ2xtOjogZG90KG4sIHQpKTtcbiAgICAgICAgICAgIGNvbnN0IHhfbjAgPSBub3JtYWxzW2kwICogMyArIDBdO1xuICAgICAgICAgICAgY29uc3QgeV9uMCA9IG5vcm1hbHNbaTAgKiAzICsgMV07XG4gICAgICAgICAgICBjb25zdCB6X24wID0gbm9ybWFsc1tpMCAqIDMgKyAyXTtcblxuICAgICAgICAgICAgY29uc3QgeF9uMSA9IG5vcm1hbHNbaTEgKiAzICsgMF07XG4gICAgICAgICAgICBjb25zdCB5X24xID0gbm9ybWFsc1tpMSAqIDMgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHpfbjEgPSBub3JtYWxzW2kxICogMyArIDJdO1xuXG4gICAgICAgICAgICBjb25zdCB4X24yID0gbm9ybWFsc1tpMiAqIDMgKyAwXTtcbiAgICAgICAgICAgIGNvbnN0IHlfbjIgPSBub3JtYWxzW2kyICogMyArIDFdO1xuICAgICAgICAgICAgY29uc3Qgel9uMiA9IG5vcm1hbHNbaTIgKiAzICsgMl07XG5cbiAgICAgICAgICAgIC8vIFRhbmdlbnRcbiAgICAgICAgICAgIGNvbnN0IG4wX2RvdF90ID0geF90YW5nZW50ICogeF9uMCArIHlfdGFuZ2VudCAqIHlfbjAgKyB6X3RhbmdlbnQgKiB6X24wO1xuICAgICAgICAgICAgY29uc3QgbjFfZG90X3QgPSB4X3RhbmdlbnQgKiB4X24xICsgeV90YW5nZW50ICogeV9uMSArIHpfdGFuZ2VudCAqIHpfbjE7XG4gICAgICAgICAgICBjb25zdCBuMl9kb3RfdCA9IHhfdGFuZ2VudCAqIHhfbjIgKyB5X3RhbmdlbnQgKiB5X24yICsgel90YW5nZW50ICogel9uMjtcblxuICAgICAgICAgICAgY29uc3QgeF9yZXNUYW5nZW50MCA9IHhfdGFuZ2VudCAtIHhfbjAgKiBuMF9kb3RfdDtcbiAgICAgICAgICAgIGNvbnN0IHlfcmVzVGFuZ2VudDAgPSB5X3RhbmdlbnQgLSB5X24wICogbjBfZG90X3Q7XG4gICAgICAgICAgICBjb25zdCB6X3Jlc1RhbmdlbnQwID0gel90YW5nZW50IC0gel9uMCAqIG4wX2RvdF90O1xuXG4gICAgICAgICAgICBjb25zdCB4X3Jlc1RhbmdlbnQxID0geF90YW5nZW50IC0geF9uMSAqIG4xX2RvdF90O1xuICAgICAgICAgICAgY29uc3QgeV9yZXNUYW5nZW50MSA9IHlfdGFuZ2VudCAtIHlfbjEgKiBuMV9kb3RfdDtcbiAgICAgICAgICAgIGNvbnN0IHpfcmVzVGFuZ2VudDEgPSB6X3RhbmdlbnQgLSB6X24xICogbjFfZG90X3Q7XG5cbiAgICAgICAgICAgIGNvbnN0IHhfcmVzVGFuZ2VudDIgPSB4X3RhbmdlbnQgLSB4X24yICogbjJfZG90X3Q7XG4gICAgICAgICAgICBjb25zdCB5X3Jlc1RhbmdlbnQyID0geV90YW5nZW50IC0geV9uMiAqIG4yX2RvdF90O1xuICAgICAgICAgICAgY29uc3Qgel9yZXNUYW5nZW50MiA9IHpfdGFuZ2VudCAtIHpfbjIgKiBuMl9kb3RfdDtcblxuICAgICAgICAgICAgY29uc3QgbWFnVGFuZ2VudDAgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgeF9yZXNUYW5nZW50MCAqIHhfcmVzVGFuZ2VudDAgKyB5X3Jlc1RhbmdlbnQwICogeV9yZXNUYW5nZW50MCArIHpfcmVzVGFuZ2VudDAgKiB6X3Jlc1RhbmdlbnQwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgbWFnVGFuZ2VudDEgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgeF9yZXNUYW5nZW50MSAqIHhfcmVzVGFuZ2VudDEgKyB5X3Jlc1RhbmdlbnQxICogeV9yZXNUYW5nZW50MSArIHpfcmVzVGFuZ2VudDEgKiB6X3Jlc1RhbmdlbnQxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgbWFnVGFuZ2VudDIgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgeF9yZXNUYW5nZW50MiAqIHhfcmVzVGFuZ2VudDIgKyB5X3Jlc1RhbmdlbnQyICogeV9yZXNUYW5nZW50MiArIHpfcmVzVGFuZ2VudDIgKiB6X3Jlc1RhbmdlbnQyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBCaXRhbmdlbnRcbiAgICAgICAgICAgIGNvbnN0IG4wX2RvdF9idCA9IHhfYml0YW5nZW50ICogeF9uMCArIHlfYml0YW5nZW50ICogeV9uMCArIHpfYml0YW5nZW50ICogel9uMDtcbiAgICAgICAgICAgIGNvbnN0IG4xX2RvdF9idCA9IHhfYml0YW5nZW50ICogeF9uMSArIHlfYml0YW5nZW50ICogeV9uMSArIHpfYml0YW5nZW50ICogel9uMTtcbiAgICAgICAgICAgIGNvbnN0IG4yX2RvdF9idCA9IHhfYml0YW5nZW50ICogeF9uMiArIHlfYml0YW5nZW50ICogeV9uMiArIHpfYml0YW5nZW50ICogel9uMjtcblxuICAgICAgICAgICAgY29uc3QgeF9yZXNCaXRhbmdlbnQwID0geF9iaXRhbmdlbnQgLSB4X24wICogbjBfZG90X2J0O1xuICAgICAgICAgICAgY29uc3QgeV9yZXNCaXRhbmdlbnQwID0geV9iaXRhbmdlbnQgLSB5X24wICogbjBfZG90X2J0O1xuICAgICAgICAgICAgY29uc3Qgel9yZXNCaXRhbmdlbnQwID0gel9iaXRhbmdlbnQgLSB6X24wICogbjBfZG90X2J0O1xuXG4gICAgICAgICAgICBjb25zdCB4X3Jlc0JpdGFuZ2VudDEgPSB4X2JpdGFuZ2VudCAtIHhfbjEgKiBuMV9kb3RfYnQ7XG4gICAgICAgICAgICBjb25zdCB5X3Jlc0JpdGFuZ2VudDEgPSB5X2JpdGFuZ2VudCAtIHlfbjEgKiBuMV9kb3RfYnQ7XG4gICAgICAgICAgICBjb25zdCB6X3Jlc0JpdGFuZ2VudDEgPSB6X2JpdGFuZ2VudCAtIHpfbjEgKiBuMV9kb3RfYnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHhfcmVzQml0YW5nZW50MiA9IHhfYml0YW5nZW50IC0geF9uMiAqIG4yX2RvdF9idDtcbiAgICAgICAgICAgIGNvbnN0IHlfcmVzQml0YW5nZW50MiA9IHlfYml0YW5nZW50IC0geV9uMiAqIG4yX2RvdF9idDtcbiAgICAgICAgICAgIGNvbnN0IHpfcmVzQml0YW5nZW50MiA9IHpfYml0YW5nZW50IC0gel9uMiAqIG4yX2RvdF9idDtcblxuICAgICAgICAgICAgY29uc3QgbWFnQml0YW5nZW50MCA9IE1hdGguc3FydChcbiAgICAgICAgICAgICAgICB4X3Jlc0JpdGFuZ2VudDAgKiB4X3Jlc0JpdGFuZ2VudDAgK1xuICAgICAgICAgICAgICAgICAgICB5X3Jlc0JpdGFuZ2VudDAgKiB5X3Jlc0JpdGFuZ2VudDAgK1xuICAgICAgICAgICAgICAgICAgICB6X3Jlc0JpdGFuZ2VudDAgKiB6X3Jlc0JpdGFuZ2VudDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBtYWdCaXRhbmdlbnQxID0gTWF0aC5zcXJ0KFxuICAgICAgICAgICAgICAgIHhfcmVzQml0YW5nZW50MSAqIHhfcmVzQml0YW5nZW50MSArXG4gICAgICAgICAgICAgICAgICAgIHlfcmVzQml0YW5nZW50MSAqIHlfcmVzQml0YW5nZW50MSArXG4gICAgICAgICAgICAgICAgICAgIHpfcmVzQml0YW5nZW50MSAqIHpfcmVzQml0YW5nZW50MVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IG1hZ0JpdGFuZ2VudDIgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgeF9yZXNCaXRhbmdlbnQyICogeF9yZXNCaXRhbmdlbnQyICtcbiAgICAgICAgICAgICAgICAgICAgeV9yZXNCaXRhbmdlbnQyICogeV9yZXNCaXRhbmdlbnQyICtcbiAgICAgICAgICAgICAgICAgICAgel9yZXNCaXRhbmdlbnQyICogel9yZXNCaXRhbmdlbnQyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB1bnBhY2tlZC50YW5nZW50c1tpMCAqIDMgKyAwXSArPSB4X3Jlc1RhbmdlbnQwIC8gbWFnVGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC50YW5nZW50c1tpMCAqIDMgKyAxXSArPSB5X3Jlc1RhbmdlbnQwIC8gbWFnVGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC50YW5nZW50c1tpMCAqIDMgKyAyXSArPSB6X3Jlc1RhbmdlbnQwIC8gbWFnVGFuZ2VudDA7XG5cbiAgICAgICAgICAgIHVucGFja2VkLnRhbmdlbnRzW2kxICogMyArIDBdICs9IHhfcmVzVGFuZ2VudDEgLyBtYWdUYW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLnRhbmdlbnRzW2kxICogMyArIDFdICs9IHlfcmVzVGFuZ2VudDEgLyBtYWdUYW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLnRhbmdlbnRzW2kxICogMyArIDJdICs9IHpfcmVzVGFuZ2VudDEgLyBtYWdUYW5nZW50MTtcblxuICAgICAgICAgICAgdW5wYWNrZWQudGFuZ2VudHNbaTIgKiAzICsgMF0gKz0geF9yZXNUYW5nZW50MiAvIG1hZ1RhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQudGFuZ2VudHNbaTIgKiAzICsgMV0gKz0geV9yZXNUYW5nZW50MiAvIG1hZ1RhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQudGFuZ2VudHNbaTIgKiAzICsgMl0gKz0gel9yZXNUYW5nZW50MiAvIG1hZ1RhbmdlbnQyO1xuXG4gICAgICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzW2kwICogMyArIDBdICs9IHhfcmVzQml0YW5nZW50MCAvIG1hZ0JpdGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzW2kwICogMyArIDFdICs9IHlfcmVzQml0YW5nZW50MCAvIG1hZ0JpdGFuZ2VudDA7XG4gICAgICAgICAgICB1bnBhY2tlZC5iaXRhbmdlbnRzW2kwICogMyArIDJdICs9IHpfcmVzQml0YW5nZW50MCAvIG1hZ0JpdGFuZ2VudDA7XG5cbiAgICAgICAgICAgIHVucGFja2VkLmJpdGFuZ2VudHNbaTEgKiAzICsgMF0gKz0geF9yZXNCaXRhbmdlbnQxIC8gbWFnQml0YW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLmJpdGFuZ2VudHNbaTEgKiAzICsgMV0gKz0geV9yZXNCaXRhbmdlbnQxIC8gbWFnQml0YW5nZW50MTtcbiAgICAgICAgICAgIHVucGFja2VkLmJpdGFuZ2VudHNbaTEgKiAzICsgMl0gKz0gel9yZXNCaXRhbmdlbnQxIC8gbWFnQml0YW5nZW50MTtcblxuICAgICAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50c1tpMiAqIDMgKyAwXSArPSB4X3Jlc0JpdGFuZ2VudDIgLyBtYWdCaXRhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50c1tpMiAqIDMgKyAxXSArPSB5X3Jlc0JpdGFuZ2VudDIgLyBtYWdCaXRhbmdlbnQyO1xuICAgICAgICAgICAgdW5wYWNrZWQuYml0YW5nZW50c1tpMiAqIDMgKyAyXSArPSB6X3Jlc0JpdGFuZ2VudDIgLyBtYWdCaXRhbmdlbnQyO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBjaGVjayBoYW5kZWRuZXNzXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRhbmdlbnRzID0gdW5wYWNrZWQudGFuZ2VudHM7XG4gICAgICAgIHRoaXMuYml0YW5nZW50cyA9IHVucGFja2VkLmJpdGFuZ2VudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXlvdXR9IGxheW91dCAtIEEge0BsaW5rIExheW91dH0gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZVxuICAgICAqIGRlc2lyZWQgbWVtb3J5IGxheW91dCBvZiB0aGUgZ2VuZXJhdGVkIGJ1ZmZlclxuICAgICAqIEByZXR1cm4ge0FycmF5QnVmZmVyfSBUaGUgcGFja2VkIGFycmF5IGluIHRoZSAuLi4gVE9ET1xuICAgICAqL1xuICAgIG1ha2VCdWZmZXJEYXRhKGxheW91dCkge1xuICAgICAgICBjb25zdCBudW1JdGVtcyA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMztcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGxheW91dC5zdHJpZGUgKiBudW1JdGVtcyk7XG4gICAgICAgIGJ1ZmZlci5udW1JdGVtcyA9IG51bUl0ZW1zO1xuICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgdmVydGV4T2Zmc2V0ID0gMDsgaSA8IG51bUl0ZW1zOyBpKyspIHtcbiAgICAgICAgICAgIHZlcnRleE9mZnNldCA9IGkgKiBsYXlvdXQuc3RyaWRlO1xuICAgICAgICAgICAgLy8gY29weSBpbiB0aGUgdmVydGV4IGRhdGEgaW4gdGhlIG9yZGVyIGFuZCBmb3JtYXQgZ2l2ZW4gYnkgdGhlXG4gICAgICAgICAgICAvLyBsYXlvdXQgcGFyYW1cbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGxheW91dC5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdmVydGV4T2Zmc2V0ICsgbGF5b3V0W2F0dHJpYnV0ZS5rZXldLm9mZnNldDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZS5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuUE9TSVRJT04ua2V5OlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIHRoaXMudmVydGljZXNbaSAqIDNdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgdGhpcy52ZXJ0aWNlc1tpICogMyArIDFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgdGhpcy52ZXJ0aWNlc1tpICogMyArIDJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5VVi5rZXk6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgdGhpcy50ZXh0dXJlc1tpICogMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCB0aGlzLnZlcnRpY2VzW2kgKiAyICsgMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0Lk5PUk1BTC5rZXk6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgdGhpcy52ZXJ0ZXhOb3JtYWxzW2kgKiAzXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIHRoaXMudmVydGV4Tm9ybWFsc1tpICogMyArIDFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgdGhpcy52ZXJ0ZXhOb3JtYWxzW2kgKiAzICsgMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0Lk1BVEVSSUFMX0lOREVYLmtleTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LkFNQklFTlQua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNYXRlcmlhbCBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLmFtYmllbnRbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCBtYXRlcmlhbC5hbWJpZW50WzFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgbWF0ZXJpYWwuYW1iaWVudFsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5ESUZGVVNFLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTWF0ZXJpYWwgXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCBtYXRlcmlhbC5kaWZmdXNlWzBdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgbWF0ZXJpYWwuZGlmZnVzZVsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLmRpZmZ1c2VbMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuU1BFQ1VMQVIua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNYXRlcmlhbCBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnNwZWN1bGFyWzBdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgbWF0ZXJpYWwuc3BlY3VsYXJbMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA4LCBtYXRlcmlhbC5zcGVjdWxhclsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5TUEVDVUxBUl9FWFBPTkVOVC5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01hdGVyaWFsIFwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuc3BlY3VsYXJFeHBvbmVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5FTUlTU0lWRS5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01hdGVyaWFsIFwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuZW1pc3NpdmVbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCBtYXRlcmlhbC5lbWlzc2l2ZVsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLmVtaXNzaXZlWzJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlRSQU5TTUlTU0lPTl9GSUxURVIua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNYXRlcmlhbCBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlclswXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIG1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlclsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlclsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5ESVNTT0xWRS5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01hdGVyaWFsIFwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuZGlzc29sdmUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuSUxMVU1JTkFUSU9OLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTWF0ZXJpYWwgXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgbWF0ZXJpYWwuaWxsdW1pbmF0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlJFRlJBQ1RJT05fSU5ERVgua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNYXRlcmlhbCBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnJlZnJhY3Rpb25JbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5TSEFSUE5FU1Mua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNYXRlcmlhbCBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLnNoYXJwbmVzcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5BTlRJX0FMSUFTSU5HLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTWF0ZXJpYWwgXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgbWF0ZXJpYWwuYW50aUFsaWFzaW5nLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxuXG4gICAgbWFrZUluZGV4QnVmZmVyRGF0YSgpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KHRoaXMuaW5kaWNlcyk7XG4gICAgICAgIGJ1ZmZlci5udW1JdGVtcyA9IHRoaXMuaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxuXG4gICAgYWRkTWF0ZXJpYWxMaWJyYXJ5KG10bCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gbXRsLm1hdGVyaWFscykge1xuICAgICAgICAgICAgaWYgKCEobmFtZSBpbiB0aGlzLm1hdGVyaWFsSW5kaWNlcykpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1hdGVyaWFsIGlzIG5vdCByZWZlcmVuY2VkIGJ5IHRoZSBtZXNoXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbXRsLm1hdGVyaWFsc1tuYW1lXTtcblxuICAgICAgICAgICAgLy8gRmluZCB0aGUgbWF0ZXJpYWwgaW5kZXggZm9yIHRoaXMgbWF0ZXJpYWxcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLm1hdGVyaWFsSW5kaWNlc1ttYXRlcmlhbC5uYW1lXTtcblxuICAgICAgICAgICAgLy8gUHV0IHRoZSBtYXRlcmlhbCBpbnRvIHRoZSBtYXRlcmlhbHNCeUluZGV4IG9iamVjdCBhdCB0aGUgcmlnaHRcbiAgICAgICAgICAgIC8vIHNwb3QgYXMgZGV0ZXJtaW5lZCB3aGVuIHRoZSBvYmogZmlsZSB3YXMgcGFyc2VkXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF0gPSBtYXRlcmlhbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tZXNoLmpzIiwiLyoqXG4gKiBUaGUgTWF0ZXJpYWwgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXRlcmlhbCB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgdW5pcXVlIG5hbWUgb2YgdGhlIG1hdGVyaWFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgICAvLyB0aGUgdW5pcXVlIG1hdGVyaWFsIElELlxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAvLyBUaGUgdmFsdWVzIGZvciB0aGUgZm9sbG93aW5nIGF0dGlidXRlc1xuICAgICAgICAvLyBhcmUgYW4gYXJyYXkgb2YgUiwgRywgQiBub3JtYWxpemVkIHZhbHVlcy5cbiAgICAgICAgLy8gS2EgLSBBbWJpZW50IFJlZmxlY3Rpdml0eVxuICAgICAgICB0aGlzLmFtYmllbnQgPSBbMCwgMCwgMF07XG4gICAgICAgIC8vIEtkIC0gRGVmdXNlIFJlZmxlY3Rpdml0eVxuICAgICAgICB0aGlzLmRpZmZ1c2UgPSBbMCwgMCwgMF07XG4gICAgICAgIC8vIEtzXG4gICAgICAgIHRoaXMuc3BlY3VsYXIgPSBbMCwgMCwgMF07XG4gICAgICAgIC8vIEtlXG4gICAgICAgIHRoaXMuZW1pc3NpdmUgPSBbMCwgMCwgMF07XG4gICAgICAgIC8vIFRmXG4gICAgICAgIHRoaXMudHJhbnNtaXNzaW9uRmlsdGVyID0gWzAsIDAsIDBdO1xuICAgICAgICAvLyBkXG4gICAgICAgIHRoaXMuZGlzc29sdmUgPSAwO1xuICAgICAgICAvLyB2YWxpZCByYW5nZSBpcyBiZXR3ZWVuIDAgYW5kIDEwMDBcbiAgICAgICAgdGhpcy5zcGVjdWxhckV4cG9uZW50ID0gMDtcbiAgICAgICAgLy8gZWl0aGVyIGQgb3IgVHI7IHZhbGlkIHZhbHVlcyBhcmUgbm9ybWFsaXplZFxuICAgICAgICB0aGlzLnRyYW5zcGFyZW5jeSA9IDA7XG4gICAgICAgIC8vIGlsbHVtIC0gdGhlIGVudW0gb2YgdGhlIGlsbHVtaW5hdGlvbiBtb2RlbCB0byB1c2VcbiAgICAgICAgdGhpcy5pbGx1bWluYXRpb24gPSAwO1xuICAgICAgICAvLyBOaSAtIFNldCB0byBcIm5vcm1hbFwiIChhaXIpLlxuICAgICAgICB0aGlzLnJlZnJhY3Rpb25JbmRleCA9IDE7XG4gICAgICAgIC8vIHNoYXJwbmVzc1xuICAgICAgICB0aGlzLnNoYXJwbmVzcyA9IDA7XG4gICAgICAgIC8vIG1hcF9LZFxuICAgICAgICB0aGlzLm1hcERpZmZ1c2UgPSBudWxsO1xuICAgICAgICAvLyBtYXBfS2FcbiAgICAgICAgdGhpcy5tYXBBbWJpZW50ID0gbnVsbDtcbiAgICAgICAgLy8gbWFwX0tzXG4gICAgICAgIHRoaXMubWFwU3BlY3VsYXIgPSBudWxsO1xuICAgICAgICAvLyBtYXBfTnNcbiAgICAgICAgdGhpcy5tYXBTcGVjdWxhckV4cG9uZW50ID0gbnVsbDtcbiAgICAgICAgLy8gbWFwX2RcbiAgICAgICAgdGhpcy5tYXBEaXNzb2x2ZSA9IG51bGw7XG4gICAgICAgIC8vIG1hcF9hYXRcbiAgICAgICAgdGhpcy5hbnRpQWxpYXNpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gbWFwX2J1bXAgb3IgYnVtcFxuICAgICAgICB0aGlzLm1hcEJ1bXAgPSBudWxsO1xuICAgICAgICAvLyBkaXNwXG4gICAgICAgIHRoaXMubWFwRGlzcGxhY2VtZW50ID0gbnVsbDtcbiAgICAgICAgLy8gZGVjYWxcbiAgICAgICAgdGhpcy5tYXBEZWNhbCA9IG51bGw7XG4gICAgICAgIC8vIG1hcF9LZVxuICAgICAgICB0aGlzLm1hcEVtaXNzaXZlID0gbnVsbDtcbiAgICAgICAgLy8gcmVmbCAtIHdoZW4gdGhlIHJlZmxlY3Rpb24gdHlwZSBpcyBhIGN1YmUsIHRoZXJlIHdpbGwgYmUgbXVsdGlwbGUgcmVmbFxuICAgICAgICAvLyAgICAgICAgc3RhdGVtZW50cyBmb3IgZWFjaCBzaWRlIG9mIHRoZSBjdWJlLiBJZiBpdCdzIGEgc3BoZXJpY2FsXG4gICAgICAgIC8vICAgICAgICByZWZsZWN0aW9uLCB0aGVyZSBzaG91bGQgb25seSBldmVyIGJlIG9uZS5cbiAgICAgICAgdGhpcy5tYXBSZWZsZWN0aW9ucyA9IFtdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XYXZlZnJvbnRfLm9ial9maWxlXG4gKiBodHRwOi8vcGF1bGJvdXJrZS5uZXQvZGF0YWZvcm1hdHMvbXRsL1xuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWxMaWJyYXJ5IHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIHRoZSBNYXRlcmlhbCBQYXJzZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbXRsRGF0YSB0aGUgTVRMIGZpbGUgY29udGVudHNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihtdGxEYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IG10bERhdGE7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsID0gbnVsbDtcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMgPSB7fTtcblxuICAgICAgICB0aGlzLnBhcnNlKCk7XG4gICAgfVxuXG4gICAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4gICAgLyogdGhlIGZ1bmN0aW9uIG5hbWVzIGhlcmUgZGlzb2JleSBjYW1lbENhc2UgY29udmVudGlvbnNcbiAgICAgdG8gbWFrZSBwYXJzaW5nL3JvdXRpbmcgZWFzaWVyLiBzZWUgdGhlIHBhcnNlIGZ1bmN0aW9uXG4gICAgIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uICovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1hdGVyaWFsIG9iamVjdCBhbmQgYWRkcyB0byB0aGUgcmVnaXN0cnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9uZXdtdGwodG9rZW5zKSB7XG4gICAgICAgIGxldCBuYW1lID0gdG9rZW5zWzBdO1xuICAgICAgICAvLyBjb25zb2xlLmluZm8oJ1BhcnNpbmcgbmV3IE1hdGVyaWFsOicsIG5hbWUpO1xuXG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5hbWUpO1xuICAgICAgICB0aGlzLm1hdGVyaWFsc1tuYW1lXSA9IHRoaXMuY3VycmVudE1hdGVyaWFsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlZSB0aGUgZG9jdW1lbmF0aW9uIGZvciBwYXJzZV9LYSBiZWxvdyBmb3IgYSBiZXR0ZXIgdW5kZXJzdGFuZGluZy5cbiAgICAgKlxuICAgICAqIEdpdmVuIGEgbGlzdCBvZiBwb3NzaWJsZSBjb2xvciB0b2tlbnMsIHJldHVybnMgYW4gYXJyYXkgb2YgUiwgRywgYW5kIEJcbiAgICAgKiBjb2xvciB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgICAqIEByZXR1cm4geyp9IGEgMyBlbGVtZW50IGFycmF5IGNvbnRhaW5pbmcgdGhlIFIsIEcsIGFuZCBCIHZhbHVlc1xuICAgICAqIG9mIHRoZSBjb2xvci5cbiAgICAgKi9cbiAgICBwYXJzZUNvbG9yKHRva2Vucykge1xuICAgICAgICBpZiAodG9rZW5zWzBdID09IFwic3BlY3RyYWxcIikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICBcIlRoZSBNVEwgcGFyc2VyIGRvZXMgbm90IHN1cHBvcnQgc3BlY3RyYWwgY3VydmUgZmlsZXMuIFlvdSB3aWxsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJuZWVkIHRvIGNvbnZlcnQgdGhlIE1UTCBjb2xvcnMgdG8gZWl0aGVyIFJHQiBvciBDSUVYWVouXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9rZW5zWzBdID09IFwieHl6XCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRPRE86IGNvbnZlcnQgWFlaIHRvIFJHQlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZyb20gbXkgdW5kZXJzdGFuZGluZyBvZiB0aGUgc3BlYywgUkdCIHZhbHVlcyBhdCB0aGlzIHBvaW50XG4gICAgICAgIC8vIHdpbGwgZWl0aGVyIGJlIDMgZmxvYXRzIG9yIGV4YWN0bHkgMSBmbG9hdCwgc28gdGhhdCdzIHRoZSBjaGVja1xuICAgICAgICAvLyB0aGF0IGknbSBnb2luZyB0byBwZXJmb3JtIGhlcmVcbiAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT0gMykge1xuICAgICAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAocGFyc2VGbG9hdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaW5jZSB0b2tlbnMgYXQgdGhpcyBwb2ludCBoYXMgYSBsZW5ndGggb2YgMywgd2UncmUgZ29pbmcgdG8gYXNzdW1lXG4gICAgICAgIC8vIGl0J3MgZXhhY3RseSAxLCBza2lwcGluZyB0aGUgY2hlY2sgZm9yIDIuXG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQodG9rZW5zWzBdKTtcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlLCBhbGwgdmFsdWVzIGFyZSBlcXVpdmFsZW50XG4gICAgICAgIHJldHVybiBbdmFsdWUsIHZhbHVlLCB2YWx1ZV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIGFtYmllbnQgcmVmbGVjdGl2aXR5XG4gICAgICpcbiAgICAgKiBBIEthIGRpcmVjdGl2ZSBjYW4gdGFrZSBvbmUgb2YgdGhyZWUgZm9ybXM6XG4gICAgICogICAtIEthIHIgZyBiXG4gICAgICogICAtIEthIHNwZWN0cmFsIGZpbGUucmZsXG4gICAgICogICAtIEthIHh5eiB4IHkgelxuICAgICAqIFRoZXNlIHRocmVlIGZvcm1zIGFyZSBtdXR1YWxseSBleGNsdXNpdmUgaW4gdGhhdCBvbmx5IG9uZVxuICAgICAqIGRlY2xhcmF0aW9uIGNhbiBleGlzdCBwZXIgbWF0ZXJpYWwuIEl0IGlzIGNvbnNpZGVyZWQgYSBzeW50YXhcbiAgICAgKiBlcnJvciBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBUaGUgXCJLYVwiIGZvcm0gc3BlY2lmaWVzIHRoZSBhbWJpZW50IHJlZmxlY3Rpdml0eSB1c2luZyBSR0IgdmFsdWVzLlxuICAgICAqIFRoZSBcImdcIiBhbmQgXCJiXCIgdmFsdWVzIGFyZSBvcHRpb25hbC4gSWYgb25seSB0aGUgXCJyXCIgdmFsdWUgaXNcbiAgICAgKiBzcGVjaWZpZWQsIHRoZW4gdGhlIFwiZ1wiIGFuZCBcImJcIiB2YWx1ZXMgYXJlIGFzc2lnbmVkIHRoZSB2YWx1ZSBvZlxuICAgICAqIFwiclwiLiBWYWx1ZXMgYXJlIG5vcm1hbGx5IGluIHRoZSByYW5nZSAwLjAgdG8gMS4wLiBWYWx1ZXMgb3V0c2lkZVxuICAgICAqIG9mIHRoaXMgcmFuZ2UgaW5jcmVhc2Ugb3IgZGVjcmVhc2UgdGhlIHJlZmxlY3Rpdml0eSBhY2NvcmRpbmdseS5cbiAgICAgKlxuICAgICAqIFRoZSBcIkthIHNwZWN0cmFsXCIgZm9ybSBzcGVjaWZpZXMgdGhlIGFtYmllbnQgcmVmbGVjdGl2aXR5IHVzaW5nIGFcbiAgICAgKiBzcGVjdHJhbCBjdXJ2ZS4gXCJmaWxlLnJmbFwiIGlzIHRoZSBuYW1lIG9mIHRoZSBcIi5yZmxcIiBmaWxlIGNvbnRhaW5pbmdcbiAgICAgKiB0aGUgY3VydmUgZGF0YS4gXCJmYWN0b3JcIiBpcyBhbiBvcHRpb25hbCBhcmd1bWVudCB3aGljaCBpcyBhIG11bHRpcGxpZXJcbiAgICAgKiBmb3IgdGhlIHZhbHVlcyBpbiB0aGUgLnJmbCBmaWxlIGFuZCBkZWZhdWx0cyB0byAxLjAgaWYgbm90IHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBcIkthIHh5elwiIGZvcm0gc3BlY2lmaWVzIHRoZSBhbWJpZW50IHJlZmxlY3Rpdml0eSB1c2luZyBDSUVYWVogdmFsdWVzLlxuICAgICAqIFwieCB5IHpcIiBhcmUgdGhlIHZhbHVlcyBvZiB0aGUgQ0lFWFlaIGNvbG9yIHNwYWNlLiBUaGUgXCJ5XCIgYW5kIFwielwiIGFyZ3VtZW50c1xuICAgICAqIGFyZSBvcHRpb25hbCBhbmQgdGFrZSBvbiB0aGUgdmFsdWUgb2YgdGhlIFwieFwiIGNvbXBvbmVudCBpZiBvbmx5IFwieFwiIGlzXG4gICAgICogc3BlY2lmaWVkLiBUaGUgXCJ4IHkgelwiIHZhbHVlcyBhcmUgbm9ybWFsbHkgaW4gdGhlIHJhbmdlIG9mIDAuMCB0byAxLjAgYW5kXG4gICAgICogaW5jcmVhc2Ugb3IgZGVjcmVhc2UgYW1iaWVudCByZWZsZWN0aXZpdHkgYWNjb3JkaW5nbHkgb3V0c2lkZSBvZiB0aGF0XG4gICAgICogcmFuZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgICAqL1xuICAgIHBhcnNlX0thKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5hbWJpZW50ID0gdGhpcy5wYXJzZUNvbG9yKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlmZnVzZSBSZWZsZWN0aXZpdHlcbiAgICAgKlxuICAgICAqIFNpbWlsYXIgdG8gdGhlIEthIGRpcmVjdGl2ZS4gU2ltcGx5IHJlcGxhY2UgXCJLYVwiIHdpdGggXCJLZFwiIGFuZCB0aGUgcnVsZXNcbiAgICAgKiBhcmUgdGhlIHNhbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAgICovXG4gICAgcGFyc2VfS2QodG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmRpZmZ1c2UgPSB0aGlzLnBhcnNlQ29sb3IodG9rZW5zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTcGVjdHJhbCBSZWZsZWN0aXZpdHlcbiAgICAgKlxuICAgICAqIFNpbWlsYXIgdG8gdGhlIEthIGRpcmVjdGl2ZS4gU2ltcGx5IHJlcGxhY2UgXCJLc1wiIHdpdGggXCJLZFwiIGFuZCB0aGUgcnVsZXNcbiAgICAgKiBhcmUgdGhlIHNhbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAgICovXG4gICAgcGFyc2VfS3ModG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLnNwZWN1bGFyID0gdGhpcy5wYXJzZUNvbG9yKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1pc3NpdmVcbiAgICAgKlxuICAgICAqIFRoZSBhbW91bnQgYW5kIGNvbG9yIG9mIGxpZ2h0IGVtaXR0ZWQgYnkgdGhlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAgICovXG4gICAgcGFyc2VfS2UodG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmVtaXNzaXZlID0gdGhpcy5wYXJzZUNvbG9yKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNtaXNzaW9uIEZpbHRlclxuICAgICAqXG4gICAgICogQW55IGxpZ2h0IHBhc3NpbmcgdGhyb3VnaCB0aGUgb2JqZWN0IGlzIGZpbHRlcmVkIGJ5IHRoZSB0cmFuc21pc3Npb25cbiAgICAgKiBmaWx0ZXIsIHdoaWNoIG9ubHkgYWxsb3dzIHNwZWNpZmljIGNvbG9ycyB0byBwYXNzIHRocm91Z2guIEZvciBleGFtcGxlLCBUZlxuICAgICAqIDAgMSAwIGFsbG93cyBhbGwgb2YgdGhlIGdyZWVuIHRvIHBhc3MgdGhyb3VnaCBhbmQgZmlsdGVycyBvdXQgYWxsIG9mIHRoZVxuICAgICAqIHJlZCBhbmQgYmx1ZS5cbiAgICAgKlxuICAgICAqIFNpbWlsYXIgdG8gdGhlIEthIGRpcmVjdGl2ZS4gU2ltcGx5IHJlcGxhY2UgXCJLc1wiIHdpdGggXCJUZlwiIGFuZCB0aGUgcnVsZXNcbiAgICAgKiBhcmUgdGhlIHNhbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAgICovXG4gICAgcGFyc2VfVGYodG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlciA9IHRoaXMucGFyc2VDb2xvcih0b2tlbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgZGlzc29sdmUgZm9yIHRoZSBjdXJyZW50IG1hdGVyaWFsLlxuICAgICAqXG4gICAgICogU3RhdGVtZW50OiBkIFstaGFsb10gYGZhY3RvcmBcbiAgICAgKlxuICAgICAqIEV4YW1wbGU6IFwiZCAwLjVcIlxuICAgICAqXG4gICAgICogVGhlIGZhY3RvciBpcyB0aGUgYW1vdW50IHRoaXMgbWF0ZXJpYWwgZGlzc29sdmVzIGludG8gdGhlIGJhY2tncm91bmQuIEFcbiAgICAgKiBmYWN0b3Igb2YgMS4wIGlzIGZ1bGx5IG9wYXF1ZS4gVGhpcyBpcyB0aGUgZGVmYXVsdCB3aGVuIGEgbmV3IG1hdGVyaWFsIGlzXG4gICAgICogY3JlYXRlZC4gQSBmYWN0b3Igb2YgMC4wIGlzIGZ1bGx5IGRpc3NvbHZlZCAoY29tcGxldGVseSB0cmFuc3BhcmVudCkuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgYSByZWFsIHRyYW5zcGFyZW50IG1hdGVyaWFsLCB0aGUgZGlzc29sdmUgZG9lcyBub3QgZGVwZW5kIHVwb25cbiAgICAgKiBtYXRlcmlhbCB0aGlja25lc3Mgbm9yIGRvZXMgaXQgaGF2ZSBhbnkgc3BlY3RyYWwgY2hhcmFjdGVyLiBEaXNzb2x2ZSB3b3Jrc1xuICAgICAqIG9uIGFsbCBpbGx1bWluYXRpb24gbW9kZWxzLlxuICAgICAqXG4gICAgICogVGhlIGRpc3NvbHZlIHN0YXRlbWVudCBhbGxvd3MgZm9yIGFuIG9wdGlvbmFsIFwiLWhhbG9cIiBmbGFnIHdoaWNoIGluZGljYXRlc1xuICAgICAqIHRoYXQgYSBkaXNzb2x2ZSBpcyBkZXBlbmRlbnQgb24gdGhlIHN1cmZhY2Ugb3JpZW50YXRpb24gcmVsYXRpdmUgdG8gdGhlXG4gICAgICogdmlld2VyLiBGb3IgZXhhbXBsZSwgYSBzcGhlcmUgd2l0aCB0aGUgZm9sbG93aW5nIGRpc3NvbHZlLCBcImQgLWhhbG8gMC4wXCIsXG4gICAgICogd2lsbCBiZSBmdWxseSBkaXNzb2x2ZWQgYXQgaXRzIGNlbnRlciBhbmQgd2lsbCBhcHBlYXIgZ3JhZHVhbGx5IG1vcmUgb3BhcXVlXG4gICAgICogdG93YXJkIGl0cyBlZGdlLlxuICAgICAqXG4gICAgICogXCJmYWN0b3JcIiBpcyB0aGUgbWluaW11bSBhbW91bnQgb2YgZGlzc29sdmUgYXBwbGllZCB0byB0aGUgbWF0ZXJpYWwuIFRoZVxuICAgICAqIGFtb3VudCBvZiBkaXNzb2x2ZSB3aWxsIHZhcnkgYmV0d2VlbiAxLjAgKGZ1bGx5IG9wYXF1ZSkgYW5kIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBcImZhY3RvclwiLiBUaGUgZm9ybXVsYSBpczpcbiAgICAgKlxuICAgICAqICAgIGRpc3NvbHZlID0gMS4wIC0gKE4qdikoMS4wLWZhY3RvcilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAgICovXG4gICAgcGFyc2VfZCh0b2tlbnMpIHtcbiAgICAgICAgLy8gdGhpcyBpZ25vcmVzIHRoZSAtaGFsbyBvcHRpb24gYXMgSSBjYW4ndCBmaW5kIGFueSBkb2N1bWVudGF0aW9uIG9uIHdoYXRcbiAgICAgICAgLy8gaXQncyBzdXBwb3NlZCB0byBiZS5cbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuZGlzc29sdmUgPSBwYXJzZUZsb2F0KHRva2Vucy5wb3AoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIFwiaWxsdW1cIiBzdGF0ZW1lbnQgc3BlY2lmaWVzIHRoZSBpbGx1bWluYXRpb24gbW9kZWwgdG8gdXNlIGluIHRoZVxuICAgICAqIG1hdGVyaWFsLiBJbGx1bWluYXRpb24gbW9kZWxzIGFyZSBtYXRoZW1hdGljYWwgZXF1YXRpb25zIHRoYXQgcmVwcmVzZW50XG4gICAgICogdmFyaW91cyBtYXRlcmlhbCBsaWdodGluZyBhbmQgc2hhZGluZyBlZmZlY3RzLlxuICAgICAqXG4gICAgICogVGhlIGlsbHVtaW5hdGlvbiBudW1iZXIgY2FuIGJlIGEgbnVtYmVyIGZyb20gMCB0byAxMC4gVGhlIGZvbGxvd2luZyBhcmVcbiAgICAgKiB0aGUgbGlzdCBvZiBpbGx1bWluYXRpb24gZW51bWVyYXRpb25zIGFuZCB0aGVpciBzdW1tYXJpZXM6XG4gICAgICogMC4gQ29sb3Igb24gYW5kIEFtYmllbnQgb2ZmXG4gICAgICogMS4gQ29sb3Igb24gYW5kIEFtYmllbnQgb25cbiAgICAgKiAyLiBIaWdobGlnaHQgb25cbiAgICAgKiAzLiBSZWZsZWN0aW9uIG9uIGFuZCBSYXkgdHJhY2Ugb25cbiAgICAgKiA0LiBUcmFuc3BhcmVuY3k6IEdsYXNzIG9uLCBSZWZsZWN0aW9uOiBSYXkgdHJhY2Ugb25cbiAgICAgKiA1LiBSZWZsZWN0aW9uOiBGcmVzbmVsIG9uIGFuZCBSYXkgdHJhY2Ugb25cbiAgICAgKiA2LiBUcmFuc3BhcmVuY3k6IFJlZnJhY3Rpb24gb24sIFJlZmxlY3Rpb246IEZyZXNuZWwgb2ZmIGFuZCBSYXkgdHJhY2Ugb25cbiAgICAgKiA3LiBUcmFuc3BhcmVuY3k6IFJlZnJhY3Rpb24gb24sIFJlZmxlY3Rpb246IEZyZXNuZWwgb24gYW5kIFJheSB0cmFjZSBvblxuICAgICAqIDguIFJlZmxlY3Rpb24gb24gYW5kIFJheSB0cmFjZSBvZmZcbiAgICAgKiA5LiBUcmFuc3BhcmVuY3k6IEdsYXNzIG9uLCBSZWZsZWN0aW9uOiBSYXkgdHJhY2Ugb2ZmXG4gICAgICogMTAuIENhc3RzIHNoYWRvd3Mgb250byBpbnZpc2libGUgc3VyZmFjZXNcbiAgICAgKlxuICAgICAqIEV4YW1wbGU6IFwiaWxsdW0gMlwiIHRvIHNwZWNpZnkgdGhlIFwiSGlnaGxpZ2h0IG9uXCIgbW9kZWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAgICovXG4gICAgcGFyc2VfaWxsdW0odG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmlsbHVtaW5hdGlvbiA9IHBhcnNlSW50KHRva2Vuc1swXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3B0aWNhbCBEZW5zaXR5IChBS0EgSW5kZXggb2YgUmVmcmFjdGlvbilcbiAgICAgKlxuICAgICAqIFN0YXRlbWVudDogTmkgYGluZGV4YFxuICAgICAqXG4gICAgICogRXhhbXBsZTogTmkgMS4wXG4gICAgICpcbiAgICAgKiBTcGVjaWZpZXMgdGhlIG9wdGljYWwgZGVuc2l0eSBmb3IgdGhlIHN1cmZhY2UuIGBpbmRleGAgaXMgdGhlIHZhbHVlXG4gICAgICogZm9yIHRoZSBvcHRpY2FsIGRlbnNpdHkuIFRoZSB2YWx1ZXMgY2FuIHJhbmdlIGZyb20gMC4wMDEgdG8gMTAuICBBIHZhbHVlIG9mXG4gICAgICogMS4wIG1lYW5zIHRoYXQgbGlnaHQgZG9lcyBub3QgYmVuZCBhcyBpdCBwYXNzZXMgdGhyb3VnaCBhbiBvYmplY3QuXG4gICAgICogSW5jcmVhc2luZyB0aGUgb3B0aWNhbF9kZW5zaXR5IGluY3JlYXNlcyB0aGUgYW1vdW50IG9mIGJlbmRpbmcuIEdsYXNzIGhhc1xuICAgICAqIGFuIGluZGV4IG9mIHJlZnJhY3Rpb24gb2YgYWJvdXQgMS41LiBWYWx1ZXMgb2YgbGVzcyB0aGFuIDEuMCBwcm9kdWNlXG4gICAgICogYml6YXJyZSByZXN1bHRzIGFuZCBhcmUgbm90IHJlY29tbWVuZGVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgICAqL1xuICAgIHBhcnNlX05pKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5yZWZyYWN0aW9uSW5kZXggPSBwYXJzZUZsb2F0KHRva2Vuc1swXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBzcGVjdWxhciBleHBvbmVudCBmb3IgdGhlIGN1cnJlbnQgbWF0ZXJpYWwuIFRoaXMgZGVmaW5lcyB0aGVcbiAgICAgKiBmb2N1cyBvZiB0aGUgc3BlY3VsYXIgaGlnaGxpZ2h0LlxuICAgICAqXG4gICAgICogU3RhdGVtZW50OiBOcyBgZXhwb25lbnRgXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOiBcIk5zIDI1MFwiXG4gICAgICpcbiAgICAgKiBgZXhwb25lbnRgIGlzIHRoZSB2YWx1ZSBmb3IgdGhlIHNwZWN1bGFyIGV4cG9uZW50LiBBIGhpZ2ggZXhwb25lbnQgcmVzdWx0c1xuICAgICAqIGluIGEgdGlnaHQsIGNvbmNlbnRyYXRlZCBoaWdobGlnaHQuIE5zIFZhbHVlcyBub3JtYWxseSByYW5nZSBmcm9tIDAgdG9cbiAgICAgKiAxMDAwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9Ocyh0b2tlbnMpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuc3BlY3VsYXJFeHBvbmVudCA9IHBhcnNlSW50KHRva2Vuc1swXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBzaGFycG5lc3Mgb2YgdGhlIHJlZmxlY3Rpb25zIGZyb20gdGhlIGxvY2FsIHJlZmxlY3Rpb24gbWFwLlxuICAgICAqXG4gICAgICogU3RhdGVtZW50OiBzaGFycG5lc3MgYHZhbHVlYFxuICAgICAqXG4gICAgICogRXhhbXBsZTogXCJzaGFycG5lc3MgMTAwXCJcbiAgICAgKlxuICAgICAqIElmIGEgbWF0ZXJpYWwgZG9lcyBub3QgaGF2ZSBhIGxvY2FsIHJlZmxlY3Rpb24gbWFwIGRlZmluZWQgaW4gaXRzIG1hdGVyaWFsXG4gICAgICogZGVmaW50aW9ucywgc2hhcnBuZXNzIHdpbGwgYXBwbHkgdG8gdGhlIGdsb2JhbCByZWZsZWN0aW9uIG1hcCBkZWZpbmVkIGluXG4gICAgICogUHJlVmlldy5cbiAgICAgKlxuICAgICAqIGB2YWx1ZWAgY2FuIGJlIGEgbnVtYmVyIGZyb20gMCB0byAxMDAwLiBUaGUgZGVmYXVsdCBpcyA2MC4gQSBoaWdoIHZhbHVlXG4gICAgICogcmVzdWx0cyBpbiBhIGNsZWFyIHJlZmxlY3Rpb24gb2Ygb2JqZWN0cyBpbiB0aGUgcmVmbGVjdGlvbiBtYXAuXG4gICAgICpcbiAgICAgKiBUaXA6IHNoYXJwbmVzcyB2YWx1ZXMgZ3JlYXRlciB0aGFuIDEwMCBpbnRyb2R1Y2UgYWxpYXNpbmcgZWZmZWN0cyBpblxuICAgICAqIGZsYXQgc3VyZmFjZXMgdGhhdCBhcmUgdmlld2VkIGF0IGEgc2hhcnAgYW5nbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgICAqL1xuICAgIHBhcnNlX3NoYXJwbmVzcyh0b2tlbnMpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuc2hhcnBuZXNzID0gcGFyc2VJbnQodG9rZW5zWzBdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIC1jYyBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1jYyBmbGFnXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgICAqL1xuICAgIHBhcnNlX2NjKHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zLmNvbG9yQ29ycmVjdGlvbiA9IHZhbHVlc1swXSA9PSBcIm9uXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSAtYmxlbmR1IGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWJsZW5kdSBmbGFnXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgICAqL1xuICAgIHBhcnNlX2JsZW5kdSh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5ob3Jpem9udGFsQmxlbmRpbmcgPSB2YWx1ZXNbMF0gPT0gXCJvblwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgLWJsZW5kdiBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1ibGVuZHYgZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV9ibGVuZHYodmFsdWVzLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMudmVydGljYWxCbGVuZGluZyA9IHZhbHVlc1swXSA9PSBcIm9uXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSAtYm9vc3QgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtYm9vc3QgZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV9ib29zdCh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5ib29zdE1pcE1hcFNoYXJwbmVzcyA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIC1tbSBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1tbSBmbGFnXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgICAqL1xuICAgIHBhcnNlX21tKHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zLm1vZGlmeVRleHR1cmVNYXAuYnJpZ2h0bmVzcyA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgb3B0aW9ucy5tb2RpZnlUZXh0dXJlTWFwLmNvbnRyYXN0ID0gcGFyc2VGbG9hdCh2YWx1ZXNbMV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbmQgc2V0cyB0aGUgLW8sIC1zLCBhbmQgLXQgIHUsIHYsIGFuZCB3IHZhbHVlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtbywgLXMsIC10IGZsYWdcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uIHRoZSBPYmplY3Qgb2YgZWl0aGVyIHRoZSAtbywgLXMsIC10IG9wdGlvblxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gZGVmYXVsdFZhbHVlIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV9vc3QodmFsdWVzLCBvcHRpb24sIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB3aGlsZSAodmFsdWVzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb24udSA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgb3B0aW9uLnYgPSBwYXJzZUZsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgIG9wdGlvbi53ID0gcGFyc2VGbG9hdCh2YWx1ZXNbMl0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgLW8gZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtbyBmbGFnXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgICAqL1xuICAgIHBhcnNlX28odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucGFyc2Vfb3N0KHZhbHVlcywgb3B0aW9ucy5vZmZzZXQsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgLXMgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtcyBmbGFnXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgICAqL1xuICAgIHBhcnNlX3ModmFsdWVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucGFyc2Vfb3N0KHZhbHVlcywgb3B0aW9ucy5zY2FsZSwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSAtdCBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC10IGZsYWdcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAgICovXG4gICAgcGFyc2VfdCh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5wYXJzZV9vc3QodmFsdWVzLCBvcHRpb25zLnR1cmJ1bGVuY2UsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgLXRleHJlcyBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC10ZXhyZXMgZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV90ZXhyZXModmFsdWVzLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMudGV4dHVyZVJlc29sdXRpb24gPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSAtY2xhbXAgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtY2xhbXAgZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV9jbGFtcCh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5jbGFtcCA9IHZhbHVlc1swXSA9PSBcIm9uXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSAtYm0gZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtYm0gZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV9ibSh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5idW1wTXVsdGlwbGllciA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIC1pbWZjaGFuIGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWltZmNoYW4gZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV9pbWZjaGFuKHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zLmltZkNoYW4gPSB2YWx1ZXNbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBvbmx5IGV4aXN0cyBmb3IgcmVsZWN0aW9uIG1hcHMgYW5kIGRlbm90ZXMgdGhlIHR5cGUgb2YgcmVmbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLXR5cGUgZmxhZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBwYXJzZV90eXBlKHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zLnJlZmxlY3Rpb25UeXBlID0gdmFsdWVzWzBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgdGV4dHVyZSdzIG9wdGlvbnMgYW5kIHJldHVybnMgYW4gb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgaW5mb1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGFsbCBvZiB0aGUgb3B0aW9uIHRva2VucyB0byBwYXNzIHRvIHRoZSB0ZXh0dXJlXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBhIGNvbXBsZXRlIG9iamVjdCBvZiBvYmplY3RzIHRvIGFwcGx5IHRvIHRoZSB0ZXh0dXJlXG4gICAgICovXG4gICAgcGFyc2VPcHRpb25zKHRva2Vucykge1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNvbG9yQ29ycmVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICBob3Jpem9udGFsQmxlbmRpbmc6IHRydWUsXG4gICAgICAgICAgICB2ZXJ0aWNhbEJsZW5kaW5nOiB0cnVlLFxuICAgICAgICAgICAgYm9vc3RNaXBNYXBTaGFycG5lc3M6IDAsXG4gICAgICAgICAgICBtb2RpZnlUZXh0dXJlTWFwOiB7XG4gICAgICAgICAgICAgICAgYnJpZ2h0bmVzczogMCxcbiAgICAgICAgICAgICAgICBjb250cmFzdDogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9mZnNldDogeyB1OiAwLCB2OiAwLCB3OiAwIH0sXG4gICAgICAgICAgICBzY2FsZTogeyB1OiAxLCB2OiAxLCB3OiAxIH0sXG4gICAgICAgICAgICB0dXJidWxlbmNlOiB7IHU6IDAsIHY6IDAsIHc6IDAgfSxcbiAgICAgICAgICAgIGNsYW1wOiBmYWxzZSxcbiAgICAgICAgICAgIHRleHR1cmVSZXNvbHV0aW9uOiBudWxsLFxuICAgICAgICAgICAgYnVtcE11bHRpcGxpZXI6IDEsXG4gICAgICAgICAgICBpbWZDaGFuOiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IG9wdGlvbjtcbiAgICAgICAgbGV0IHZhbHVlcztcbiAgICAgICAgbGV0IG9wdGlvbnNUb1ZhbHVlcyA9IHt9O1xuXG4gICAgICAgIHRva2Vucy5yZXZlcnNlKCk7XG5cbiAgICAgICAgd2hpbGUgKHRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zLnBvcCgpO1xuXG4gICAgICAgICAgICBpZiAodG9rZW4uc3RhcnRzV2l0aChcIi1cIikpIHtcbiAgICAgICAgICAgICAgICBvcHRpb24gPSB0b2tlbi5zdWJzdHIoMSk7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1RvVmFsdWVzW29wdGlvbl0gPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1RvVmFsdWVzW29wdGlvbl0ucHVzaCh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKG9wdGlvbiBpbiBvcHRpb25zVG9WYWx1ZXMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9uc1RvVmFsdWVzLmhhc093blByb3BlcnR5KG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlcyA9IG9wdGlvbnNUb1ZhbHVlc1tvcHRpb25dO1xuICAgICAgICAgICAgbGV0IG9wdGlvbk1ldGhvZCA9IHRoaXNbYHBhcnNlXyR7b3B0aW9ufWBdO1xuICAgICAgICAgICAgaWYgKG9wdGlvbk1ldGhvZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbk1ldGhvZC5iaW5kKHRoaXMpKHZhbHVlcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGdpdmVuIHRleHR1cmUgbWFwIGxpbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgYWxsIG9mIHRoZSB0b2tlbnMgcmVwcmVzZW50aW5nIHRoZSB0ZXh0dXJlXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBhIGNvbXBsZXRlIG9iamVjdCBvZiBvYmplY3RzIHRvIGFwcGx5IHRvIHRoZSB0ZXh0dXJlXG4gICAgICovXG4gICAgcGFyc2VNYXAodG9rZW5zKSB7XG4gICAgICAgIC8vIGFjY29yZGluZyB0byB3aWtpcGVkaWE6XG4gICAgICAgIC8vIChodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XYXZlZnJvbnRfLm9ial9maWxlI1ZlbmRvcl9zcGVjaWZpY19hbHRlcmF0aW9ucylcbiAgICAgICAgLy8gdGhlcmUgaXMgYXQgbGVhc3Qgb25lIHZlbmRvciB0aGF0IHBsYWNlcyB0aGUgZmlsZW5hbWUgYmVmb3JlIHRoZSBvcHRpb25zXG4gICAgICAgIC8vIHJhdGhlciB0aGFuIGFmdGVyICh3aGljaCBpcyB0byBzcGVjKS4gQWxsIG9wdGlvbnMgc3RhcnQgd2l0aCBhICctJ1xuICAgICAgICAvLyBzbyBpZiB0aGUgZmlyc3QgdG9rZW4gZG9lc24ndCBzdGFydCB3aXRoIGEgJy0nLCB3ZSdyZSBnb2luZyB0byBhc3N1bWVcbiAgICAgICAgLy8gaXQncyB0aGUgbmFtZSBvZiB0aGUgbWFwIGZpbGUuXG4gICAgICAgIGxldCBmaWxlbmFtZTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICghdG9rZW5zWzBdLnN0YXJ0c1dpdGgoXCItXCIpKSB7XG4gICAgICAgICAgICBbZmlsZW5hbWUsIC4uLm9wdGlvbnNdID0gdG9rZW5zO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsZW5hbWUgPSB0b2tlbnMucG9wKCk7XG4gICAgICAgICAgICBvcHRpb25zID0gdG9rZW5zO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IHRoaXMucGFyc2VPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zW1wiZmlsZW5hbWVcIl0gPSBmaWxlbmFtZTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBhbWJpZW50IG1hcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9LYSBkaXJlY2l2ZVxuICAgICAqL1xuICAgIHBhcnNlX21hcF9LYSh0b2tlbnMpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwQW1iaWVudCA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGRpZmZ1c2UgbWFwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX0tkIGRpcmVjaXZlXG4gICAgICovXG4gICAgcGFyc2VfbWFwX0tkKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBEaWZmdXNlID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgc3BlY3VsYXIgbWFwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX0tzIGRpcmVjaXZlXG4gICAgICovXG4gICAgcGFyc2VfbWFwX0tzKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBTcGVjdWxhciA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGVtaXNzaXZlIG1hcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9LZSBkaXJlY2l2ZVxuICAgICAqL1xuICAgIHBhcnNlX21hcF9LZSh0b2tlbnMpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwRW1pc3NpdmUgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBzcGVjdWxhciBleHBvbmVudCBtYXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfTnMgZGlyZWNpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9tYXBfTnModG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcFNwZWN1bGFyRXhwb25lbnQgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBkaXNzb2x2ZSBtYXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfZCBkaXJlY2l2ZVxuICAgICAqL1xuICAgIHBhcnNlX21hcF9kKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBEaXNzb2x2ZSA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGFudGktYWxpYXNpbmcgb3B0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX2FhdCBkaXJlY2l2ZVxuICAgICAqL1xuICAgIHBhcnNlX21hcF9hYXQodG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmFudGlBbGlhc2luZyA9IHRva2Vuc1swXSA9PSBcIm9uXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBidW1wIG1hcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9idW1wIGRpcmVjaXZlXG4gICAgICovXG4gICAgcGFyc2VfbWFwX2J1bXAodG9rZW5zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcEJ1bXAgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBidW1wIG1hcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIGJ1bXAgZGlyZWNpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9idW1wKHRva2Vucykge1xuICAgICAgICB0aGlzLnBhcnNlX21hcF9idW1wKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBkaXNwIG1hcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIGRpc3AgZGlyZWNpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9kaXNwKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBEaXNwbGFjZW1lbnQgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBkZWNhbCBtYXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfZGVjYWwgZGlyZWNpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9kZWNhbCh0b2tlbnMpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwRGVjYWwgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSByZWZsIG1hcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIHJlZmwgZGlyZWNpdmVcbiAgICAgKi9cbiAgICBwYXJzZV9yZWZsKHRva2Vucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBSZWZsZWN0aW9ucy5wdXNoKHRoaXMucGFyc2VNYXAodG9rZW5zKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBNVEwgZmlsZS5cbiAgICAgKlxuICAgICAqIEl0ZXJhdGVzIGxpbmUgYnkgbGluZSBwYXJzaW5nIGVhY2ggTVRMIGRpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZXhwZWN0cyB0aGUgZmlyc3QgdG9rZW4gaW4gdGhlIGxpbmVcbiAgICAgKiB0byBiZSBhIHZhbGlkIE1UTCBkaXJlY3RpdmUuIFRoYXQgdG9rZW4gaXMgdGhlbiB1c2VkXG4gICAgICogdG8gdHJ5IGFuZCBydW4gYSBtZXRob2Qgb24gdGhpcyBjbGFzcy4gcGFyc2VfW2RpcmVjdGl2ZV1cbiAgICAgKiBFLmcuLCB0aGUgYG5ld210bGAgZGlyZWN0aXZlIHdvdWxkIHRyeSB0byBjYWxsIHRoZSBtZXRob2RcbiAgICAgKiBwYXJzZV9uZXdtdGwuIEVhY2ggcGFyc2luZyBmdW5jdGlvbiB0YWtlcyBpbiB0aGUgcmVtYWluaW5nXG4gICAgICogbGlzdCBvZiB0b2tlbnMgYW5kIHVwZGF0ZXMgdGhlIGN1cnJlbnRNYXRlcmlhbCBjbGFzcyB3aXRoXG4gICAgICogdGhlIGF0dHJpYnV0ZXMgcHJvdmlkZWQuXG4gICAgICovXG4gICAgcGFyc2UoKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHRoaXMuZGF0YS5zcGxpdCgvXFxyP1xcbi8pO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBsaW5lID0gbGluZS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIWxpbmUgfHwgbGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdG9rZW5zID0gbGluZS5zcGxpdCgvXFxzLyk7XG4gICAgICAgICAgICBsZXQgZGlyZWN0aXZlO1xuICAgICAgICAgICAgW2RpcmVjdGl2ZSwgLi4udG9rZW5zXSA9IHRva2VucztcblxuICAgICAgICAgICAgbGV0IHBhcnNlTWV0aG9kID0gdGhpc1tgcGFyc2VfJHtkaXJlY3RpdmV9YF07XG5cbiAgICAgICAgICAgIGlmICghcGFyc2VNZXRob2QpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYERvbid0IGtub3cgaG93IHRvIHBhcnNlIHRoZSBkaXJlY3RpdmU6IFwiJHtkaXJlY3RpdmV9XCJgKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFBhcnNpbmcgXCIke2RpcmVjdGl2ZX1cIiB3aXRoIHRva2VuczogJHt0b2tlbnN9YCk7XG4gICAgICAgICAgICBwYXJzZU1ldGhvZC5iaW5kKHRoaXMpKHRva2Vucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzb21lIGNsZWFudXAuIFRoZXNlIGRvbid0IG5lZWQgdG8gYmUgZXhwb3NlZCBhcyBwdWJsaWMgZGF0YS5cbiAgICAgICAgZGVsZXRlIHRoaXMuZGF0YTtcbiAgICAgICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwgPSBudWxsO1xuICAgIH1cblxuICAgIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlKi9cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tYXRlcmlhbC5qcyIsImltcG9ydCBNZXNoIGZyb20gXCIuL21lc2hcIjtcbmltcG9ydCB7IE1hdGVyaWFsLCBNYXRlcmlhbExpYnJhcnkgfSBmcm9tIFwiLi9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgTGF5b3V0IH0gZnJvbSBcIi4vbGF5b3V0XCI7XG5pbXBvcnQgeyBkb3dubG9hZE1vZGVscywgZG93bmxvYWRNZXNoZXMsIGluaXRNZXNoQnVmZmVycywgZGVsZXRlTWVzaEJ1ZmZlcnMgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG52ZXJzaW9uID0gXCIxLjEuMFwiO1xuXG4vKipcbiAqIEBuYW1lc3BhY2VcbiAqL1xuZXhwb3J0IHtcbiAgICBNZXNoLFxuICAgIE1hdGVyaWFsLFxuICAgIE1hdGVyaWFsTGlicmFyeSxcbiAgICBMYXlvdXQsXG4gICAgZG93bmxvYWRNb2RlbHMsXG4gICAgZG93bmxvYWRNZXNoZXMsXG4gICAgaW5pdE1lc2hCdWZmZXJzLFxuICAgIGRlbGV0ZU1lc2hCdWZmZXJzLFxuICAgIHZlcnNpb25cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJpbXBvcnQgTWVzaCBmcm9tIFwiLi9tZXNoXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCwgTWF0ZXJpYWxMaWJyYXJ5IH0gZnJvbSBcIi4vbWF0ZXJpYWxcIjtcbmltcG9ydCB7IExheW91dCB9IGZyb20gXCIuL2xheW91dFwiO1xuXG5mdW5jdGlvbiBkb3dubG9hZE10bFRleHR1cmVzKG10bCwgcm9vdCkge1xuICAgIGNvbnN0IG1hcEF0dHJpYnV0ZXMgPSBbXG4gICAgICAgIFwibWFwRGlmZnVzZVwiLFxuICAgICAgICBcIm1hcEFtYmllbnRcIixcbiAgICAgICAgXCJtYXBTcGVjdWxhclwiLFxuICAgICAgICBcIm1hcERpc3NvbHZlXCIsXG4gICAgICAgIFwibWFwQnVtcFwiLFxuICAgICAgICBcIm1hcERpc3BsYWNlbWVudFwiLFxuICAgICAgICBcIm1hcERlY2FsXCIsXG4gICAgICAgIFwibWFwRW1pc3NpdmVcIlxuICAgIF07XG4gICAgaWYgKCFyb290LmVuZHNXaXRoKFwiL1wiKSkge1xuICAgICAgICByb290ICs9IFwiL1wiO1xuICAgIH1cbiAgICBsZXQgdGV4dHVyZXMgPSBbXTtcblxuICAgIGZvciAobGV0IG1hdGVyaWFsIGluIG10bC5tYXRlcmlhbHMpIHtcbiAgICAgICAgaWYgKCFtdGwubWF0ZXJpYWxzLmhhc093blByb3BlcnR5KG1hdGVyaWFsKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbWF0ZXJpYWwgPSBtdGwubWF0ZXJpYWxzW21hdGVyaWFsXTtcblxuICAgICAgICBmb3IgKGxldCBhdHRyIG9mIG1hcEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGxldCBtYXBEYXRhID0gbWF0ZXJpYWxbYXR0cl07XG4gICAgICAgICAgICBpZiAoIW1hcERhdGEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHVybCA9IHJvb3QgKyBtYXBEYXRhLmZpbGVuYW1lO1xuICAgICAgICAgICAgdGV4dHVyZXMucHVzaChcbiAgICAgICAgICAgICAgICBmZXRjaCh1cmwpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcERhdGEudGV4dHVyZSA9IGltYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gKGltYWdlLm9ubG9hZCA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZG93bmxvYWQgdGV4dHVyZTogJHt1cmx9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRleHR1cmVzKTtcbn1cblxuLyoqXG4gKiBBY2NlcHRzIGEgbGlzdCBvZiBtb2RlbCByZXF1ZXN0IG9iamVjdHMgYW5kIHJldHVybnMgYSBQcm9taXNlIHRoYXRcbiAqIHJlc29sdmVzIHdoZW4gYWxsIG1vZGVscyBoYXZlIGJlZW4gZG93bmxvYWRlZCBhbmQgcGFyc2VkLlxuICpcbiAqIFRoZSBsaXN0IG9mIG1vZGVsIG9iamVjdHMgZm9sbG93IHRoaXMgaW50ZXJmYWNlOlxuICoge1xuICogIG9iajogJ3BhdGgvdG8vbW9kZWwub2JqJyxcbiAqICBtdGw6IHRydWUgfCAncGF0aC90by9tb2RlbC5tdGwnLFxuICogIGRvd25sb2FkTXRsVGV4dHVyZXM6IHRydWUgfCBmYWxzZVxuICogIG10bFRleHR1cmVSb290OiAnL21vZGVscy9zdXphbm5lL21hcHMnXG4gKiAgbmFtZTogJ3N1emFubmUnXG4gKiB9XG4gKlxuICogVGhlIGBvYmpgIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBhbmQgc2hvdWxkIGJlIHRoZSBwYXRoIHRvIHRoZVxuICogbW9kZWwncyAub2JqIGZpbGUgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgcmVwbyAoYWJzb2x1dGUgVVJMcyBhcmVcbiAqIHN1Z2dlc3RlZCkuXG4gKlxuICogVGhlIGBtdGxgIGF0dHJpYnV0ZSBpcyBvcHRpb25hbCBhbmQgY2FuIGVpdGhlciBiZSBhIGJvb2xlYW4gb3JcbiAqIGEgcGF0aCB0byB0aGUgbW9kZWwncyAubXRsIGZpbGUgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgVVJMLiBJZlxuICogdGhlIHZhbHVlIGlzIGB0cnVlYCwgdGhlbiB0aGUgcGF0aCBhbmQgYmFzZW5hbWUgZ2l2ZW4gZm9yIHRoZSBgb2JqYFxuICogYXR0cmlidXRlIGlzIHVzZWQgcmVwbGFjaW5nIHRoZSAub2JqIHN1ZmZpeCBmb3IgLm10bFxuICogRS5nLjoge29iajogJ21vZGVscy9mb28ub2JqJywgbXRsOiB0cnVlfSB3b3VsZCBzZWFyY2ggZm9yICdtb2RlbHMvZm9vLm10bCdcbiAqXG4gKiBUaGUgYG5hbWVgIGF0dHJpYnV0ZSBpcyBvcHRpb25hbCBhbmQgaXMgYSBodW1hbiBmcmllbmRseSBuYW1lIHRvIGJlXG4gKiBpbmNsdWRlZCB3aXRoIHRoZSBwYXJzZWQgT0JKIGFuZCBNVEwgZmlsZXMuIElmIG5vdCBnaXZlbiwgdGhlIGJhc2UgLm9ialxuICogZmlsZW5hbWUgd2lsbCBiZSB1c2VkLlxuICpcbiAqIFRoZSBgZG93bmxvYWRNdGxUZXh0dXJlc2AgYXR0cmlidXRlIGlzIGEgZmxhZyBmb3IgYXV0b21hdGljYWxseSBkb3dubG9hZGluZ1xuICogYW55IGltYWdlcyBmb3VuZCBpbiB0aGUgTVRMIGZpbGUgYW5kIGF0dGFjaGluZyB0aGVtIHRvIGVhY2ggTWF0ZXJpYWxcbiAqIGNyZWF0ZWQgZnJvbSB0aGF0IGZpbGUuIEZvciBleGFtcGxlLCBpZiBtYXRlcmlhbC5tYXBEaWZmdXNlIGlzIHNldCAodGhlcmVcbiAqIHdhcyBkYXRhIGluIHRoZSBNVEwgZmlsZSksIHRoZW4gbWF0ZXJpYWwubWFwRGlmZnVzZS50ZXh0dXJlIHdpbGwgY29udGFpblxuICogdGhlIGRvd25sb2FkZWQgaW1hZ2UuIFRoaXMgb3B0aW9uIGRlZmF1bHRzIHRvIGB0cnVlYC4gQnkgZGVmYXVsdCwgdGhlIE1UTCdzXG4gKiBVUkwgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgbG9jYXRpb24gb2YgdGhlIGltYWdlcy5cbiAqXG4gKiBUaGUgYG10bFRleHR1cmVSb290YCBhdHRyaWJ1dGUgaXMgb3B0aW9uYWwgYW5kIHNob3VsZCBwb2ludCB0byB0aGUgbG9jYXRpb25cbiAqIG9uIHRoZSBzZXJ2ZXIgdGhhdCB0aGlzIE1UTCdzIHRleHR1cmUgZmlsZXMgYXJlIGxvY2F0ZWQuIFRoZSBkZWZhdWx0IGlzIHRvXG4gKiB1c2UgdGhlIE1UTCBmaWxlJ3MgbG9jYXRpb24uXG4gKlxuICogQHJldHVybnMge1Byb21pc2V9IHRoZSByZXN1bHQgb2YgZG93bmxvYWRpbmcgdGhlIGdpdmVuIGxpc3Qgb2YgbW9kZWxzLiBUaGVcbiAqIHByb21pc2Ugd2lsbCByZXNvbHZlIHdpdGggYW4gb2JqZWN0IHdob3NlIGtleXMgYXJlIHRoZSBuYW1lcyBvZiB0aGUgbW9kZWxzXG4gKiBhbmQgdGhlIHZhbHVlIGlzIGl0cyBNZXNoIG9iamVjdC4gRWFjaCBNZXNoIG9iamVjdCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGhhdmUgaXRzIGFkZE1hdGVyaWFsTGlicmFyeSgpIG1ldGhvZCBjYWxsZWQgdG8gc2V0IHRoZSBnaXZlbiBNVEwgZGF0YSAoaWYgZ2l2ZW4pLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG93bmxvYWRNb2RlbHMobW9kZWxzKSB7XG4gICAgY29uc3QgZmluaXNoZWQgPSBbXTtcblxuICAgIGZvciAoY29uc3QgbW9kZWwgb2YgbW9kZWxzKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IFtdO1xuXG4gICAgICAgIGlmICghbW9kZWwub2JqKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgJ1wib2JqXCIgYXR0cmlidXRlIG9mIG1vZGVsIG9iamVjdCBub3Qgc2V0LiBUaGUgLm9iaiBmaWxlIGlzIHJlcXVpcmVkIHRvIGJlIHNldCAnICtcbiAgICAgICAgICAgICAgICAgICAgXCJpbiBvcmRlciB0byB1c2UgZG93bmxvYWRNb2RlbHMoKVwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgb3B0aW9ucy5pbmRpY2VzUGVyTWF0ZXJpYWwgPSAhIW1vZGVsLmluZGljZXNQZXJNYXRlcmlhbDtcbiAgICAgICAgb3B0aW9ucy5jYWxjVGFuZ2VudHNBbmRCaXRhbmdlbnRzID0gISFtb2RlbC5jYWxjVGFuZ2VudHNBbmRCaXRhbmdlbnRzO1xuXG4gICAgICAgIC8vIGlmIHRoZSBuYW1lIGlzIG5vdCBwcm92aWRlZCwgZGVydml2ZSBpdCBmcm9tIHRoZSBnaXZlbiBPQkpcbiAgICAgICAgbGV0IG5hbWUgPSBtb2RlbC5uYW1lO1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgIGxldCBwYXJ0cyA9IG1vZGVsLm9iai5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBuYW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV0ucmVwbGFjZShcIi5vYmpcIiwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VkLnB1c2goUHJvbWlzZS5yZXNvbHZlKG5hbWUpKTtcblxuICAgICAgICBwYXJzZWQucHVzaChcbiAgICAgICAgICAgIGZldGNoKG1vZGVsLm9iailcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWVzaChkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIERvd25sb2FkIE1hdGVyaWFsTGlicmFyeSBmaWxlP1xuICAgICAgICBpZiAobW9kZWwubXRsKSB7XG4gICAgICAgICAgICBsZXQgbXRsID0gbW9kZWwubXRsO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtdGwgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgbXRsID0gbW9kZWwub2JqLnJlcGxhY2UoL1xcLm9iaiQvLCBcIi5tdGxcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcnNlZC5wdXNoKFxuICAgICAgICAgICAgICAgIGZldGNoKG10bClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbExpYnJhcnkoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWwuZG93bmxvYWRNdGxUZXh0dXJlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm9vdCA9IG1vZGVsLm10bFRleHR1cmVSb290O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGRpcmVjdG9yeSBvZiB0aGUgTVRMIGZpbGUgYXMgZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290ID0gbXRsLnN1YnN0cigwLCBtdGwubGFzdEluZGV4T2YoXCIvXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG93bmxvYWRNdGxUZXh0dXJlcyByZXR1cm5zIGEgUHJvbWlzZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIGltYWdlcyBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5zIGFyZSBkb3dubG9hZGVkLiBUaGVzZSBhcmUgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaGVkIHRvIHRoZSBtYXAgZGF0YSBvYmplY3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtQcm9taXNlLnJlc29sdmUobWF0ZXJpYWwpLCBkb3dubG9hZE10bFRleHR1cmVzKG1hdGVyaWFsLCByb290KV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFByb21pc2UucmVzb2x2ZShtYXRlcmlhbCkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVbMF07XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgZmluaXNoZWQucHVzaChQcm9taXNlLmFsbChwYXJzZWQpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoZmluaXNoZWQpLnRoZW4obXMgPT4ge1xuICAgICAgICAvLyB0aGUgXCJmaW5pc2hlZFwiIHByb21pc2UgaXMgYSBsaXN0IG9mIG5hbWUsIE1lc2ggaW5zdGFuY2UsXG4gICAgICAgIC8vIGFuZCBNYXRlcmlhbExpYmFyeSBpbnN0YW5jZS4gVGhpcyB1bnBhY2tzIGFuZCByZXR1cm5zIGFuXG4gICAgICAgIC8vIG9iamVjdCBtYXBwaW5nIG5hbWUgdG8gTWVzaCAoTWVzaCBwb2ludHMgdG8gTVRMKS5cbiAgICAgICAgY29uc3QgbW9kZWxzID0ge307XG5cbiAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBtcykge1xuICAgICAgICAgICAgY29uc3QgW25hbWUsIG1lc2gsIG10bF0gPSBtb2RlbDtcbiAgICAgICAgICAgIG1lc2gubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBpZiAobXRsKSB7XG4gICAgICAgICAgICAgICAgbWVzaC5hZGRNYXRlcmlhbExpYnJhcnkobXRsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZGVsc1tuYW1lXSA9IG1lc2g7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbW9kZWxzO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFRha2VzIGluIGFuIG9iamVjdCBvZiBgbWVzaF9uYW1lYCwgYCcvdXJsL3RvL09CSi9maWxlJ2AgcGFpcnMgYW5kIGEgY2FsbGJhY2tcbiAqIGZ1bmN0aW9uLiBFYWNoIE9CSiBmaWxlIHdpbGwgYmUgYWpheGVkIGluIGFuZCBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0b1xuICogYW4gT0JKLk1lc2guIFdoZW4gYWxsIGZpbGVzIGhhdmUgc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQgdGhlIGNhbGxiYWNrXG4gKiBmdW5jdGlvbiBwcm92aWRlZCB3aWxsIGJlIGNhbGxlZCBhbmQgcGFzc2VkIGluIGFuIG9iamVjdCBjb250YWluaW5nXG4gKiB0aGUgbmV3bHkgY3JlYXRlZCBtZXNoZXMuXG4gKlxuICogKipOb3RlOioqIEluIG9yZGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIGFzIGEgd2F5IHRvIGRvd25sb2FkIG1lc2hlcywgYVxuICogd2Vic2VydmVyIG9mIHNvbWUgc29ydCBtdXN0IGJlIHVzZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5hbWVBbmRBdHRycyBhbiBvYmplY3Qgd2hlcmUgdGhlIGtleSBpcyB0aGUgbmFtZSBvZiB0aGUgbWVzaCBhbmQgdGhlIHZhbHVlIGlzIHRoZSB1cmwgdG8gdGhhdCBtZXNoJ3MgT0JKIGZpbGVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wbGV0aW9uQ2FsbGJhY2sgc2hvdWxkIGNvbnRhaW4gYSBmdW5jdGlvbiB0aGF0IHdpbGwgdGFrZSBvbmUgcGFyYW1ldGVyOiBhbiBvYmplY3QgYXJyYXkgd2hlcmUgdGhlIGtleXMgd2lsbCBiZSB0aGUgdW5pcXVlIG9iamVjdCBuYW1lIGFuZCB0aGUgdmFsdWUgd2lsbCBiZSBhIE1lc2ggb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG1lc2hlcyBJbiBjYXNlIG90aGVyIG1lc2hlcyBhcmUgbG9hZGVkIHNlcGFyYXRlbHkgb3IgaWYgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHZhcmlhYmxlIGlzIGRlc2lyZWQgdG8gYmUgdXNlZCwgcGFzcyBpbiBhIChwb3NzaWJseSBlbXB0eSkganNvbiBvYmplY3Qgb2YgdGhlIHBhdHRlcm46IHsgJzxtZXNoX25hbWU+JzogT0JKLk1lc2ggfVxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkTWVzaGVzKG5hbWVBbmRVUkxzLCBjb21wbGV0aW9uQ2FsbGJhY2ssIG1lc2hlcykge1xuICAgIGlmIChtZXNoZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtZXNoZXMgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wbGV0ZWQgPSBbXTtcblxuICAgIGZvciAoY29uc3QgbWVzaF9uYW1lIGluIG5hbWVBbmRVUkxzKSB7XG4gICAgICAgIGlmICghbmFtZUFuZFVSTHMuaGFzT3duUHJvcGVydHkobWVzaF9uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gbmFtZUFuZFVSTHNbbWVzaF9uYW1lXTtcbiAgICAgICAgY29tcGxldGVkLnB1c2goXG4gICAgICAgICAgICBmZXRjaCh1cmwpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW21lc2hfbmFtZSwgbmV3IE1lc2goZGF0YSldO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgUHJvbWlzZS5hbGwoY29tcGxldGVkKS50aGVuKG1zID0+IHtcbiAgICAgICAgZm9yIChsZXQgW25hbWUsIG1lc2hdIG9mIG1zKSB7XG4gICAgICAgICAgICBtZXNoZXNbbmFtZV0gPSBtZXNoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbXBsZXRpb25DYWxsYmFjayhtZXNoZXMpO1xuICAgIH0pO1xufVxuXG52YXIgX2J1aWxkQnVmZmVyID0gZnVuY3Rpb24oZ2wsIHR5cGUsIGRhdGEsIGl0ZW1TaXplKSB7XG4gICAgdmFyIGJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIHZhciBhcnJheVZpZXcgPSB0eXBlID09PSBnbC5BUlJBWV9CVUZGRVIgPyBGbG9hdDMyQXJyYXkgOiBVaW50MTZBcnJheTtcbiAgICBnbC5iaW5kQnVmZmVyKHR5cGUsIGJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YSh0eXBlLCBuZXcgYXJyYXlWaWV3KGRhdGEpLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgYnVmZmVyLml0ZW1TaXplID0gaXRlbVNpemU7XG4gICAgYnVmZmVyLm51bUl0ZW1zID0gZGF0YS5sZW5ndGggLyBpdGVtU2l6ZTtcbiAgICByZXR1cm4gYnVmZmVyO1xufTtcblxuLyoqXG4gKiBUYWtlcyBpbiB0aGUgV2ViR0wgY29udGV4dCBhbmQgYSBNZXNoLCB0aGVuIGNyZWF0ZXMgYW5kIGFwcGVuZHMgdGhlIGJ1ZmZlcnNcbiAqIHRvIHRoZSBtZXNoIG9iamVjdCBhcyBhdHRyaWJ1dGVzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgYGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpYCBjb250ZXh0IGluc3RhbmNlXG4gKiBAcGFyYW0ge01lc2h9IG1lc2ggYSBzaW5nbGUgYE9CSi5NZXNoYCBpbnN0YW5jZVxuICpcbiAqIFRoZSBuZXdseSBjcmVhdGVkIG1lc2ggYXR0cmlidXRlcyBhcmU6XG4gKlxuICogQXR0cmJ1dGUgfCBEZXNjcmlwdGlvblxuICogOi0tLSB8IC0tLVxuICogKipub3JtYWxCdWZmZXIqKiAgICAgICB8Y29udGFpbnMgdGhlIG1vZGVsJiMzOTtzIFZlcnRleCBOb3JtYWxzXG4gKiBub3JtYWxCdWZmZXIuaXRlbVNpemUgIHxzZXQgdG8gMyBpdGVtc1xuICogbm9ybWFsQnVmZmVyLm51bUl0ZW1zICB8dGhlIHRvdGFsIG51bWJlciBvZiB2ZXJ0ZXggbm9ybWFsc1xuICogfFxuICogKip0ZXh0dXJlQnVmZmVyKiogICAgICB8Y29udGFpbnMgdGhlIG1vZGVsJiMzOTtzIFRleHR1cmUgQ29vcmRpbmF0ZXNcbiAqIHRleHR1cmVCdWZmZXIuaXRlbVNpemUgfHNldCB0byAyIGl0ZW1zXG4gKiB0ZXh0dXJlQnVmZmVyLm51bUl0ZW1zIHx0aGUgbnVtYmVyIG9mIHRleHR1cmUgY29vcmRpbmF0ZXNcbiAqIHxcbiAqICoqdmVydGV4QnVmZmVyKiogICAgICAgfGNvbnRhaW5zIHRoZSBtb2RlbCYjMzk7cyBWZXJ0ZXggUG9zaXRpb24gQ29vcmRpbmF0ZXMgKGRvZXMgbm90IGluY2x1ZGUgdylcbiAqIHZlcnRleEJ1ZmZlci5pdGVtU2l6ZSAgfHNldCB0byAzIGl0ZW1zXG4gKiB2ZXJ0ZXhCdWZmZXIubnVtSXRlbXMgIHx0aGUgdG90YWwgbnVtYmVyIG9mIHZlcnRpY2VzXG4gKiB8XG4gKiAqKmluZGV4QnVmZmVyKiogICAgICAgIHxjb250YWlucyB0aGUgaW5kaWNlcyBvZiB0aGUgZmFjZXNcbiAqIGluZGV4QnVmZmVyLml0ZW1TaXplICAgfGlzIHNldCB0byAxXG4gKiBpbmRleEJ1ZmZlci5udW1JdGVtcyAgIHx0aGUgdG90YWwgbnVtYmVyIG9mIGluZGljZXNcbiAqXG4gKiBBIHNpbXBsZSBleGFtcGxlIChhIGxvdCBvZiBzdGVwcyBhcmUgbWlzc2luZywgc28gZG9uJ3QgY29weSBhbmQgcGFzdGUpOlxuICpcbiAqICAgICB2YXIgZ2wgICA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpLFxuICogICAgICAgICBtZXNoID0gT0JKLk1lc2gob2JqX2ZpbGVfZGF0YSk7XG4gKiAgICAgLy8gY29tcGlsZSB0aGUgc2hhZGVycyBhbmQgY3JlYXRlIGEgc2hhZGVyIHByb2dyYW1cbiAqICAgICB2YXIgc2hhZGVyUHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAqICAgICAvLyBjb21waWxhdGlvbiBzdHVmZiBoZXJlXG4gKiAgICAgLi4uXG4gKiAgICAgLy8gbWFrZSBzdXJlIHlvdSBoYXZlIHZlcnRleCwgdmVydGV4IG5vcm1hbCwgYW5kIHRleHR1cmUgY29vcmRpbmF0ZVxuICogICAgIC8vIGF0dHJpYnV0ZXMgbG9jYXRlZCBpbiB5b3VyIHNoYWRlcnMgYW5kIGF0dGFjaCB0aGVtIHRvIHRoZSBzaGFkZXIgcHJvZ3JhbVxuICogICAgIHNoYWRlclByb2dyYW0udmVydGV4UG9zaXRpb25BdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcImFWZXJ0ZXhQb3NpdGlvblwiKTtcbiAqICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlKTtcbiAqXG4gKiAgICAgc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhOb3JtYWxBdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcImFWZXJ0ZXhOb3JtYWxcIik7XG4gKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhOb3JtYWxBdHRyaWJ1dGUpO1xuICpcbiAqICAgICBzaGFkZXJQcm9ncmFtLnRleHR1cmVDb29yZEF0dHJpYnV0ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sIFwiYVRleHR1cmVDb29yZFwiKTtcbiAqICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJQcm9ncmFtLnRleHR1cmVDb29yZEF0dHJpYnV0ZSk7XG4gKlxuICogICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgdmVydGV4LCB2ZXJ0ZXggbm9ybWFsLCBhbmQgdGV4dHVyZSBjb29yZGluYXRlIGJ1ZmZlcnNcbiAqICAgICAvLyBhbmQgc2F2ZSBvbiB0byB0aGUgbWVzaCBvYmplY3RcbiAqICAgICBPQkouaW5pdE1lc2hCdWZmZXJzKGdsLCBtZXNoKTtcbiAqXG4gKiAgICAgLy8gbm93IHRvIHJlbmRlciB0aGUgbWVzaFxuICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBtZXNoLnZlcnRleEJ1ZmZlcik7XG4gKiAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlLCBtZXNoLnZlcnRleEJ1ZmZlci5pdGVtU2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAqICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIG1lc2ggZG9lc24ndCBjb250YWluXG4gKiAgICAgLy8gYW55IHRleHR1cmUgY29vcmRpbmF0ZXMgKGUuZy4gc3V6YW5uZS5vYmogaW4gdGhlIGRldmVsb3BtZW50IGJyYW5jaCkuXG4gKiAgICAgLy8gaW4gdGhpcyBjYXNlLCB0aGUgdGV4dHVyZSB2ZXJ0ZXhBdHRyaWJBcnJheSB3aWxsIG5lZWQgdG8gYmUgZGlzYWJsZWRcbiAqICAgICAvLyBiZWZvcmUgdGhlIGNhbGwgdG8gZHJhd0VsZW1lbnRzXG4gKiAgICAgaWYoIW1lc2gudGV4dHVyZXMubGVuZ3RoKXtcbiAqICAgICAgIGdsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJQcm9ncmFtLnRleHR1cmVDb29yZEF0dHJpYnV0ZSk7XG4gKiAgICAgfVxuICogICAgIGVsc2V7XG4gKiAgICAgICAvLyBpZiB0aGUgdGV4dHVyZSB2ZXJ0ZXhBdHRyaWJBcnJheSBoYXMgYmVlbiBwcmV2aW91c2x5XG4gKiAgICAgICAvLyBkaXNhYmxlZCwgdGhlbiBpdCBuZWVkcyB0byBiZSByZS1lbmFibGVkXG4gKiAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJQcm9ncmFtLnRleHR1cmVDb29yZEF0dHJpYnV0ZSk7XG4gKiAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbWVzaC50ZXh0dXJlQnVmZmVyKTtcbiAqICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUsIG1lc2gudGV4dHVyZUJ1ZmZlci5pdGVtU2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAqICAgICB9XG4gKlxuICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBtZXNoLm5vcm1hbEJ1ZmZlcik7XG4gKiAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXJQcm9ncmFtLnZlcnRleE5vcm1hbEF0dHJpYnV0ZSwgbWVzaC5ub3JtYWxCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gKlxuICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG1vZGVsLm1lc2guaW5kZXhCdWZmZXIpO1xuICogICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIG1vZGVsLm1lc2guaW5kZXhCdWZmZXIubnVtSXRlbXMsIGdsLlVOU0lHTkVEX1NIT1JULCAwKTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRNZXNoQnVmZmVycyhnbCwgbWVzaCkge1xuICAgIG1lc2gubm9ybWFsQnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5BUlJBWV9CVUZGRVIsIG1lc2gudmVydGV4Tm9ybWFscywgMyk7XG4gICAgbWVzaC50ZXh0dXJlQnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5BUlJBWV9CVUZGRVIsIG1lc2gudGV4dHVyZXMsIG1lc2gudGV4dHVyZVN0cmlkZSk7XG4gICAgbWVzaC52ZXJ0ZXhCdWZmZXIgPSBfYnVpbGRCdWZmZXIoZ2wsIGdsLkFSUkFZX0JVRkZFUiwgbWVzaC52ZXJ0aWNlcywgMyk7XG4gICAgbWVzaC5pbmRleEJ1ZmZlciA9IF9idWlsZEJ1ZmZlcihnbCwgZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG1lc2guaW5kaWNlcywgMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVNZXNoQnVmZmVycyhnbCwgbWVzaCkge1xuICAgIGdsLmRlbGV0ZUJ1ZmZlcihtZXNoLm5vcm1hbEJ1ZmZlcik7XG4gICAgZ2wuZGVsZXRlQnVmZmVyKG1lc2gudGV4dHVyZUJ1ZmZlcik7XG4gICAgZ2wuZGVsZXRlQnVmZmVyKG1lc2gudmVydGV4QnVmZmVyKTtcbiAgICBnbC5kZWxldGVCdWZmZXIobWVzaC5pbmRleEJ1ZmZlcik7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMuanMiXSwic291cmNlUm9vdCI6IiJ9